{"version":3,"sources":["types.ts","components/page-title/index.tsx","components/page-title/page-title.tsx","pages/main-page.tsx","pages/todos-page/components/search-panel/index.tsx","pages/todos-page/components/search-panel/search-panel.tsx","helpers.ts","pages/todos-page/components/todo-item-content/index.tsx","pages/todos-page/components/todo-item-content/todo-item-content.tsx","pages/todos-page/components/todos-table/index.tsx","pages/todos-page/components/todos-table/todos-table.tsx","pages/todos-page/components/status-filter/index.tsx","pages/todos-page/components/status-filter/status-filter.tsx","components/portal/index.tsx","components/portal/portal.tsx","services/firebase-service.ts","context/AppContext.tsx","context/TooltipContext.tsx","pages/todos-page/components/todos-modal-content/index.tsx","pages/todos-page/components/todos-modal-content/todos-modal-content.tsx","components/modal/index.tsx","components/modal/modal.tsx","pages/todos-page/index.tsx","pages/notes-page/components/note-item-content/index.tsx","pages/notes-page/components/note-item-content/note-item-content.tsx","pages/notes-page/components/notes-list/index.tsx","pages/notes-page/components/notes-list/notes-list.tsx","pages/notes-page/components/notes-modal-content/index.tsx","pages/notes-page/components/notes-modal-content/notes-modal-content.tsx","pages/notes-page/index.tsx","components/required-mark/index.tsx","components/required-mark/required-mark.tsx","pages/settings-page/components/change-email-modal-content/index.tsx","pages/settings-page/components/change-email-modal-content/change-email-modal-content.tsx","pages/settings-page/components/change-password-modal-content/index.tsx","pages/settings-page/components/change-password-modal-content/change-password-modal-content.tsx","pages/settings-page/components/delete-account-modal-content/index.tsx","pages/settings-page/components/delete-account-modal-content/delete-account-modal-content.tsx","assets/img/anonymous.jpg","pages/settings-page/index.tsx","validationSchemas.ts","components/customInput/customInput.tsx","pages/sign-up-page/components/sign-up-modal-content/inputs-config.ts","pages/sign-up-page/components/sign-up-modal-content/index.tsx","pages/sign-up-page/components/sign-up-modal-content/sign-up-modal-content.tsx","pages/sign-up-page/index.tsx","pages/sign-in-page/components/sign-in-modal-content/inputs-config.ts","pages/sign-in-page/components/sign-in-modal-content/index.tsx","pages/sign-in-page/components/sign-in-modal-content/sign-in-modal-content.tsx","pages/sign-in-page/index.tsx","pages/reset-password-page/components/reset-password-modal-content.tsx","pages/reset-password-page/index.tsx","components/header/index.tsx","components/header/header.tsx","components/emailUnverifiedOverlay/emailUnverifiedOverlay.tsx","components/tooltip/index.tsx","components/tooltip/tooltip.tsx","app/index.tsx","app/app.tsx","index.tsx"],"names":["TooltipTypes","PageTitle","text","className","MainPage","SearchPanel","onSearchChange","useState","term","setTerm","type","placeholder","value","onChange","evt","changedTerm","target","getFormattedDate","date","currentMonth","getMonth","currentDay","getDate","getFullYear","String","length","TodoItemContent","fieldsContent","onDeleted","description","status","priority","endDatePlan","endDateActual","classNames","Date","onClick","xmlns","height","viewBox","width","fill","d","TodosTable","todos","onSelected","overlayText","tableHeaders","map","item","additionalClass","clazz","scope","tableRows","id","itemProps","importantClass","doneClass","expiredClass","toISOString","onDoubleClick","StatusFilter","filter","onFilterChange","everyStatusCount","buttonsParams","name","label","forEach","count","buttons","Portal","children","el","document","createElement","classList","add","useEffect","body","style","overflow","modalHtml","querySelector","append","remove","createPortal","firebaseSignOut","showTooltip","firebase","auth","signOut","catch","error","Error","message","AppContext","React","createContext","useAppContext","useContext","AppProvider","isLoggedIn","setIsLoggedIn","currentUser","setCurrentUser","isUserGet","setUserGet","actionCodeSettings","url","useTooltipContext","onAuthStateChanged","user","emailVerified","sendEmailVerification","err","localStorage","getItem","onLogIn","lastSignInTime","metadata","Math","round","getTime","onLogOut","Provider","TooltipContext","TooltipProvider","isOpen","setIsOpen","setType","setMessage","hideTooltip","TodosModalContent","selectedItemId","onEdited","onAdded","onToggleModal","state","setState","database","ref","uid","once","then","snapshot","childSnapshot","childData","val","onSubmit","preventDefault","htmlFor","maxLength","prevState","required","formattedTimeOffset","getTimezoneOffset","includes","replace","min","Modal","classes","title","onCloseBtnClick","TodosPage","showModal","isDataLoaded","getTodos","elem","restParams","todosData","todosRef","on","off","newItemId","addItem","newItem","createTodoItem","push","toggleModal","lastItemId","Object","values","visibleItems","items","filterItem","toLowerCase","indexOf","search","reverse","all","new","inProgress","done","key","set","NoteItemContent","creationDate","NotesList","notes","itemsList","CSSTransition","timeout","TransitionGroup","component","NotesModalContent","setDescription","NotesPage","getNotes","notesData","notesRef","createNoteItem","e","RequiredMark","ChangeEmailModalContent","oldEmail","email","password","credentials","setCredentials","setEmail","isFirstModal","setIsFirstModal","onCredentialsChange","credential","EmailAuthProvider","reauthenticateWithCredential","verifyBeforeUpdateEmail","Info","ChangePasswordModalContent","oldPassword","setPassword","updatePassword","Success","DeleteAccountModalContent","delete","SettingsPage","displayName","setName","photoURL","photoUrl","setPhotoUrl","isNameClicked","setIsNameClicked","isAvatarClicked","setIsAvatarClicked","showModalEmailChange","setShowModalEmailChange","showModalPasswordChange","setShowModalPasswordChange","showModalAccountDelete","setShowModalAccountDelete","isGoogleUser","providerData","providerId","toggleEmailChangeModal","prev","togglePasswordChangeModal","toggleAccountDeleteModal","src","anonymousImg","alt","updateProfile","undefined","sendPasswordResetEmail","signUpValidationSchema","Yup","repeatPassword","oneOf","signInValidationSchema","omit","shape","rememberMe","resetPasswordValidationSchema","pick","CustomInput","labelClass","isRequired","fieldClass","fieldName","isError","isTouched","inputsConfig","SignUpModalContent","initialValues","validationSchema","setSubmitting","createUserWithEmailAndPassword","setItem","finally","firebaseCreateUser","isSubmitting","errors","touched","useMemo","disabled","provider","GoogleAuthProvider","signInWithPopup","firebaseCreateUserWithGoogle","to","SignUpPage","SignInModalContent","Boolean","removeItem","signInWithEmailAndPassword","firebaseSignIn","firebaseGoogleSignIn","SignInPage","ResetPasswordModalContent","firebaseSendPasswordResetEmail","ResetPasswordPage","Header","exact","activeClassName","EmailUnverifiedOverlay","Tooltip","timerId","setTimeout","clearTimeout","Transition","in","unmountOnExit","transitionState","App","path","render","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","ReactDOM"],"mappings":"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","file":"static/js/main.01abbe92.chunk.js","sourcesContent":["export type Id = number;\r\n\r\nexport enum TooltipTypes {\r\n  Info = 'info',\r\n  Error = 'error',\r\n  Success = 'success',\r\n}\r\n","import PageTitle from \"./page-title\";\r\nexport default PageTitle;\r\n","import React from 'react';\r\nimport './page-title.css';\r\n\r\ninterface PageTitleProps {\r\n  text: string;\r\n}\r\n\r\nconst PageTitle: React.FC<PageTitleProps> = ({ text }) => {\r\n  return <h1 className=\"page-title\">{text}</h1>;\r\n};\r\n\r\nexport default PageTitle;\r\n","import React from 'react';\r\nimport PageTitle from '../components/page-title/';\r\n\r\nconst MainPage: React.FC = () => (\r\n  <main className=\"main-page\">\r\n    <div className=\"container\">\r\n      <PageTitle text=\"Welcome to the greatest todo app ever!!!\" />\r\n    </div>\r\n  </main>\r\n);\r\n\r\nexport default MainPage;\r\n","import SearchPanel from \"./search-panel\";\r\nexport default SearchPanel;\r\n","import React, { useState } from 'react';\r\nimport './search-panel.css';\r\n\r\ninterface SearchPanelProps {\r\n  onSearchChange: (changedTerm: string) => void;\r\n}\r\n\r\nconst SearchPanel: React.FC<SearchPanelProps> = ({ onSearchChange }) => {\r\n  const [term, setTerm] = useState<string>('');\r\n\r\n  const onSearchReplace = (evt: React.ChangeEvent<HTMLInputElement>) => {\r\n    const changedTerm = evt.target.value;\r\n    setTerm(changedTerm);\r\n\r\n    onSearchChange(changedTerm);\r\n  };\r\n\r\n  return (\r\n    <input\r\n      type=\"text\"\r\n      placeholder=\"Search by description\"\r\n      className=\"search-input\"\r\n      value={term}\r\n      onChange={onSearchReplace}\r\n    />\r\n  );\r\n};\r\nexport default SearchPanel;\r\n","export const getFormattedDate = (date: Date, type: string): string => {\r\n  const currentMonth: number = date.getMonth() + 1;\r\n  const currentDay: number = date.getDate();\r\n  if (type === 'calendar') {\r\n    return `${date.getFullYear()}-${\r\n      String(currentMonth).length == 2 ? currentMonth : '0' + currentMonth\r\n    }-${String(currentDay).length == 2 ? currentDay : '0' + currentDay}`;\r\n  }\r\n  return `${String(currentDay).length == 2 ? currentDay : '0' + currentDay}.${\r\n    String(currentMonth).length == 2 ? currentMonth : '0' + currentMonth\r\n  }.${date.getFullYear()}`;\r\n};\r\n","import TodoItemContent from \"./todo-item-content\";\r\nexport default TodoItemContent;\r\n","import React from 'react';\r\nimport { ITodoFieldsContent } from '../../../../interfaces';\r\nimport { Id } from '../../../../types';\r\nimport { getFormattedDate } from '../../../../helpers';\r\nimport './todo-item-content.css';\r\n\r\ninterface TodoItemContentProps {\r\n  fieldsContent: ITodoFieldsContent;\r\n  onDeleted: () => any;\r\n  // onDeleted: () => (id: Id) => void\r\n}\r\n\r\nconst TodoItemContent: React.FC<TodoItemContentProps> = ({ fieldsContent, onDeleted }) => {\r\n  const { description, status, priority, endDatePlan, endDateActual } = fieldsContent;\r\n\r\n  const classNames: string = 'table__item-cell';\r\n\r\n  return (\r\n    <>\r\n      <td className={classNames}>\r\n        <span className=\"table__item-cell--description\">{description}</span>\r\n      </td>\r\n      <td className={classNames}>\r\n        <span className=\"table__item-cell--status\">{status}</span>\r\n      </td>\r\n      <td className={classNames}>\r\n        <span className=\"table__item-cell--priority\">{priority}</span>\r\n      </td>\r\n      <td className={classNames}>\r\n        <span className=\"table__item-cell--datePlan\">\r\n          {getFormattedDate(new Date(endDatePlan), 'task')}\r\n        </span>\r\n      </td>\r\n      <td className={classNames}>\r\n        <span className=\"table__item-cell--actualDate\">\r\n          {endDateActual == '-' ? endDateActual : getFormattedDate(new Date(endDateActual), 'task')}\r\n        </span>\r\n      </td>\r\n      <td className={classNames}>\r\n        <button type=\"button\" className=\"btn table__btn table__btn--del\" onClick={onDeleted}>\r\n          <svg\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n            height=\"24px\"\r\n            viewBox=\"0 0 24 24\"\r\n            width=\"24px\"\r\n            fill=\"#ff2a2a\"\r\n          >\r\n            <path d=\"M0 0h24v24H0V0z\" fill=\"none\" />\r\n            <path d=\"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V9c0-1.1-.9-2-2-2H8c-1.1 0-2 .9-2 2v10zM9 9h6c.55 0 1 .45 1 1v8c0 .55-.45 1-1 1H9c-.55 0-1-.45-1-1v-8c0-.55.45-1 1-1zm6.5-5l-.71-.71c-.18-.18-.44-.29-.7-.29H9.91c-.26 0-.52.11-.7.29L8.5 4H6c-.55 0-1 .45-1 1s.45 1 1 1h12c.55 0 1-.45 1-1s-.45-1-1-1h-2.5z\" />\r\n          </svg>\r\n        </button>\r\n      </td>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default TodoItemContent;\r\n","import TodosTable from './todos-table';\r\nexport default TodosTable;\r\n","import React from 'react';\r\n\r\nimport TodoItemContent from '../todo-item-content';\r\nimport { ITodoItem } from '../../../../interfaces';\r\nimport { Id } from '../../../../types';\r\nimport './todos-table.css';\r\n\r\ninterface TodosTableProps {\r\n  todos?: ITodoItem[];\r\n  onDeleted?: (id: Id) => void;\r\n  onSelected?: (evt: React.MouseEvent<HTMLTableRowElement>, id: Id) => void;\r\n  overlayText?: string;\r\n}\r\n\r\nconst TodosTable: React.FC<TodosTableProps> = ({ todos, onDeleted, onSelected, overlayText }) => {\r\n  const tableHeadersText: string[] = [\r\n    'Description',\r\n    'Status',\r\n    'Priority',\r\n    'End date plan',\r\n    'End date actual',\r\n    'Action',\r\n  ];\r\n\r\n  const tableHeaders: JSX.Element[] = tableHeadersText.map((item: string): JSX.Element => {\r\n    const additionalClass: string =\r\n      item == 'Description'\r\n        ? 'table__header--description'\r\n        : item == 'Status'\r\n        ? 'table__header--status'\r\n        : item == 'Priority'\r\n        ? 'table__header--priority'\r\n        : item == 'End date plan'\r\n        ? 'table__header--planDate'\r\n        : item == 'End date actual'\r\n        ? 'table__header--actualDate'\r\n        : item == 'Action'\r\n        ? 'table__header--action'\r\n        : '';\r\n\r\n    const clazz: string = additionalClass ? `table__header ${additionalClass}` : 'table__header';\r\n\r\n    return (\r\n      <th key={item} className={clazz} scope=\"col\">\r\n        {item}\r\n      </th>\r\n    );\r\n  });\r\n\r\n  if (todos) {\r\n    const tableRows: JSX.Element[] = todos.map((item: ITodoItem): JSX.Element => {\r\n      const { id, ...itemProps } = item;\r\n\r\n      const importantClass: string | null =\r\n        itemProps.fieldsContent.priority == 'High' ? 'table__item--important' : '';\r\n      const doneClass: string | null =\r\n        itemProps.fieldsContent.status == 'Done' ? 'table__item--done' : '';\r\n      const expiredClass: string | null =\r\n        itemProps.fieldsContent.endDateActual != '-'\r\n          ? itemProps.fieldsContent.endDateActual < itemProps.fieldsContent.endDatePlan\r\n            ? ''\r\n            : 'table__item--expired'\r\n          : new Date().toISOString() > itemProps.fieldsContent.endDatePlan\r\n          ? 'table__item--expired'\r\n          : '';\r\n\r\n      return (\r\n        <tr\r\n          className={`table__item ${doneClass} ${importantClass} ${expiredClass}`}\r\n          key={id}\r\n          onDoubleClick={(evt) => onSelected!(evt, id)}\r\n        >\r\n          <TodoItemContent {...itemProps} onDeleted={() => onDeleted!(id)} />\r\n        </tr>\r\n      );\r\n    });\r\n\r\n    return (\r\n      <table className=\"table table--todo\">\r\n        <thead>\r\n          <tr className=\"table__headers table--todo__headers\">{tableHeaders}</tr>\r\n        </thead>\r\n        <tbody>{tableRows}</tbody>\r\n      </table>\r\n    );\r\n  }\r\n  return (\r\n    <>\r\n      <table className=\"table table--todo\">\r\n        <thead>\r\n          <tr className=\"table__headers table--todo__headers\">{tableHeaders}</tr>\r\n        </thead>\r\n        <tbody></tbody>\r\n      </table>\r\n      <span>{overlayText}</span>\r\n    </>\r\n  );\r\n};\r\nexport default TodosTable;\r\n","import StatusFilter from \"./status-filter\";\r\nexport default StatusFilter;\r\n","import React from 'react';\r\nimport './status-filter.css';\r\nimport { IEveryStatusCount } from '../../../../interfaces';\r\n\r\ninterface IButtonsParams {\r\n  name: string;\r\n  label: string;\r\n  count?: number;\r\n}\r\n\r\ninterface StatusFilterProps {\r\n  filter: string;\r\n  onFilterChange: (name: string) => void;\r\n  everyStatusCount: IEveryStatusCount;\r\n}\r\n\r\nconst StatusFilter: React.FC<StatusFilterProps> = ({\r\n  filter,\r\n  onFilterChange,\r\n  everyStatusCount,\r\n}) => {\r\n  const buttonsParams: IButtonsParams[] = [\r\n    { name: 'inProgress', label: 'In progress' },\r\n    { name: 'new', label: 'New' },\r\n    { name: 'done', label: 'Done' },\r\n    { name: 'all', label: 'All' },\r\n  ];\r\n\r\n  buttonsParams.forEach((item) => {\r\n    item.count = everyStatusCount[item.name];\r\n  });\r\n\r\n  const buttons: JSX.Element[] = buttonsParams.map(({ name, label, count }): JSX.Element => {\r\n    const isActive = filter === name;\r\n    const clazz = isActive ? 'status-filter__btn--active' : null;\r\n    return (\r\n      <button\r\n        type=\"button\"\r\n        className={`status-filter__btn btn ${clazz}`}\r\n        key={name}\r\n        onClick={() => {\r\n          onFilterChange(name);\r\n        }}\r\n      >\r\n        {`${label} - ${count}`}\r\n      </button>\r\n    );\r\n  });\r\n  return <div className=\"status-filter\">{buttons}</div>;\r\n};\r\n\r\nexport default StatusFilter;\r\n","import Portal from \"./portal\";\r\nexport default Portal;\r\n","import React, { ReactNode, useEffect } from 'react';\r\nimport { createPortal } from 'react-dom';\r\n\r\nimport './portal.css';\r\n\r\ninterface PortalProps {\r\n  children: ReactNode;\r\n}\r\n\r\nconst Portal: React.FC<PortalProps> = ({ children }) => {\r\n  const el: HTMLDivElement = document.createElement('div');\r\n  el.classList.add('overlay');\r\n\r\n  useEffect(() => {\r\n    document.body.style.overflow = 'hidden';\r\n    // document.querySelector(\"#modal\").append(el);\r\n\r\n    const modalHtml: HTMLDivElement | null = document.querySelector('#modal');\r\n    if (modalHtml) {\r\n      modalHtml.append(el);\r\n    }\r\n\r\n    return () => {\r\n      el.remove();\r\n      document.body.style.overflow = 'visible';\r\n    };\r\n  }, [children]);\r\n\r\n  return createPortal(children, el);\r\n};\r\n\r\nexport default Portal;\r\n","import firebase from 'firebase/app';\r\n\r\nimport { TooltipTypes } from '../types';\r\n\r\nexport const firebaseCreateUser = (values: any, showTooltip: any, setSubmitting: any) =>\r\n  firebase\r\n    .auth()\r\n    .createUserWithEmailAndPassword(values.email, values.password)\r\n    .then(() => localStorage.setItem('rememberMe', 'true'))\r\n    .catch((err) =>\r\n      showTooltip(TooltipTypes.Error, `Your account didn't be created: ${err.message}`)\r\n    )\r\n    .finally(() => setSubmitting(false));\r\n\r\nexport const firebaseSignIn = (values: any, showTooltip: any, setSubmitting: any) => {\r\n  if (values.rememberMe) {\r\n    localStorage.setItem('rememberMe', 'true');\r\n  } else {\r\n    localStorage.removeItem('rememberMe');\r\n  }\r\n\r\n  firebase\r\n    .auth()\r\n    .signInWithEmailAndPassword(values.email, values.password)\r\n    .catch((err) => showTooltip(TooltipTypes.Error, err.message))\r\n    .finally(() => setSubmitting(false));\r\n};\r\n\r\n// @todo Do i need in almost the same Google signIn/Up?\r\n// @todo  setSubmitting(false)\r\nexport const firebaseCreateUserWithGoogle = (showTooltip: any): void => {\r\n  const provider = new firebase.auth.GoogleAuthProvider();\r\n\r\n  firebase\r\n    .auth()\r\n    .signInWithPopup(provider)\r\n    .then(() => localStorage.setItem('rememberMe', 'true'))\r\n    .catch((error) => {\r\n      showTooltip(TooltipTypes.Error, error.message);\r\n    });\r\n};\r\n\r\n// @todo  setSubmitting(false)\r\nexport const firebaseGoogleSignIn = (showTooltip: any): void => {\r\n  const provider = new firebase.auth.GoogleAuthProvider();\r\n  firebase\r\n    .auth()\r\n    .signInWithPopup(provider)\r\n    .catch((error) => {\r\n      showTooltip(TooltipTypes.Error, error.message);\r\n    });\r\n};\r\n\r\n// @todo  setSubmitting(false)\r\nexport const firebaseSignOut = (\r\n  showTooltip: (type: TooltipTypes, message: string) => void\r\n): Promise<void> =>\r\n  firebase\r\n    .auth()\r\n    .signOut()\r\n    .catch((error) => {\r\n      showTooltip(TooltipTypes.Error, error.message);\r\n    });\r\n\r\nexport const firebaseSendPasswordResetEmail = (\r\n  values: any,\r\n  actionCodeSettings: any,\r\n  showTooltip: any,\r\n  setSubmitting: any\r\n) =>\r\n  firebase\r\n    .auth()\r\n    .sendPasswordResetEmail(values.email, actionCodeSettings)\r\n    .then(() => {\r\n      showTooltip(TooltipTypes.Info, 'The email to reset your password was send');\r\n    })\r\n    .catch((err) => {\r\n      showTooltip(TooltipTypes.Error, err.message);\r\n    })\r\n    .finally(() => setSubmitting(false));\r\n","import React, { useState, useEffect, useContext } from 'react';\r\nimport firebase from 'firebase/app';\r\n\r\nimport { useTooltipContext } from './index';\r\nimport { TooltipTypes } from '../types';\r\nimport { firebaseSignOut } from '../services/firebase-service';\r\n\r\ninterface AppContextProps {\r\n  children: React.ReactNode;\r\n}\r\n\r\n// @todo По идее мне не нужно указывать тип и аргумент. Нужно посмотреть, как сделать нормально\r\nconst AppContext = React.createContext<any>({});\r\n\r\nexport const useAppContext = () => {\r\n  return useContext(AppContext);\r\n};\r\n\r\n// @todo Не уверен, что корректно давать контексту тип React.FC\r\nexport const AppProvider: React.FC<AppContextProps> = ({ children }) => {\r\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\r\n  const [currentUser, setCurrentUser] = useState(false);\r\n  const [isUserGet, setUserGet] = useState(false);\r\n\r\n  const actionCodeSettings = {\r\n    url: 'https://vladmokrousov.github.io/doit/build/#/sign-in',\r\n    // url: 'http://localhost:3000/sign-in',\r\n  };\r\n\r\n  const { showTooltip } = useTooltipContext();\r\n\r\n  useEffect(() => {\r\n    firebase.auth().onAuthStateChanged((user) => {\r\n      if (user) {\r\n        if (!user.emailVerified) {\r\n          user.sendEmailVerification(actionCodeSettings).catch((err) => {\r\n            showTooltip(TooltipTypes.Error, `The email didn't send. ${err.message}`);\r\n          });\r\n        }\r\n        if (!localStorage.getItem('rememberMe')) {\r\n          const lastSignInTime = new Date(user.metadata.lastSignInTime!);\r\n          const lastSignInTimeTimeStamp = Math.round(lastSignInTime.getTime() / 1000);\r\n          const yesterdayTimeStamp = Math.round(new Date().getTime() / 1000) - 24 * 3600;\r\n\r\n          if (lastSignInTimeTimeStamp < yesterdayTimeStamp) {\r\n            firebaseSignOut(showTooltip);\r\n          } else {\r\n            onLogIn(user);\r\n          }\r\n        } else {\r\n          onLogIn(user);\r\n        }\r\n      } else {\r\n        onLogOut();\r\n      }\r\n      setUserGet(true);\r\n    });\r\n  }, []);\r\n\r\n  const onLogIn = (user: any): void => {\r\n    setIsLoggedIn(true);\r\n    setCurrentUser(user);\r\n  };\r\n  const onLogOut = (): void => {\r\n    setIsLoggedIn(false);\r\n    setCurrentUser(false);\r\n  };\r\n\r\n  return isUserGet ? (\r\n    <AppContext.Provider value={{ isLoggedIn, currentUser, actionCodeSettings }}>\r\n      {children}\r\n    </AppContext.Provider>\r\n  ) : null;\r\n};\r\n","import React, { useState, useContext } from 'react';\r\nimport { TooltipTypes } from '../types';\r\n\r\ninterface TooltipContextProps {\r\n  children: React.ReactNode;\r\n}\r\n\r\n//По идее мне не нужно указывать тип и аргумент. Нужно посмотреть, как сделать нормально\r\nconst TooltipContext = React.createContext<any>({});\r\n\r\nexport const useTooltipContext = () => {\r\n  return useContext(TooltipContext);\r\n};\r\n\r\n//Не уверен, что корректно давать контексту тип React.FC\r\nexport const TooltipProvider: React.FC<TooltipContextProps> = ({ children }) => {\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const [type, setType] = useState('');\r\n  const [message, setMessage] = useState('');\r\n\r\n  const showTooltip = (type: TooltipTypes, message: string): void => {\r\n    setType(type);\r\n    setMessage(message);\r\n    setIsOpen(true);\r\n  };\r\n  const hideTooltip = (): void => {\r\n    setIsOpen(false);\r\n  };\r\n\r\n  return (\r\n    <TooltipContext.Provider value={{ isOpen, type, message, showTooltip, hideTooltip }}>\r\n      {children}\r\n    </TooltipContext.Provider>\r\n  );\r\n};\r\n","import TodosModalContent from './todos-modal-content';\r\nexport default TodosModalContent;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { useAppContext, useTooltipContext } from '../../../../context';\r\nimport { ITodoFieldsContent } from '../../../../interfaces';\r\nimport { Id } from '../../../../types';\r\nimport firebase from 'firebase/app';\r\nimport { getFormattedDate } from '../../../../helpers';\r\nimport { TooltipTypes } from '../../../../types';\r\nimport './todos-modal-content.css';\r\n\r\ninterface TodosModalProps {\r\n  selectedItemId: Id | false;\r\n  onEdited?: (fieldsContent: ITodoFieldsContent) => void;\r\n  onAdded: (fieldsContent: ITodoFieldsContent) => void;\r\n  onToggleModal: (evt: any) => void;\r\n}\r\n\r\nconst TodosModalContent: React.FC<TodosModalProps> = ({\r\n  selectedItemId,\r\n  onEdited,\r\n  onAdded,\r\n  onToggleModal,\r\n}) => {\r\n  const { currentUser } = useAppContext();\r\n  const { showTooltip } = useTooltipContext();\r\n\r\n  const [state, setState] = useState<ITodoFieldsContent>({\r\n    description: '',\r\n    priority: 'Low',\r\n    status: 'New',\r\n    endDatePlan: '',\r\n    endDateActual: '-',\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (selectedItemId) {\r\n      const todosRef = firebase.database().ref('users/' + currentUser.uid + '/todos');\r\n      todosRef\r\n        .once('value')\r\n        .then((snapshot) => {\r\n          snapshot.forEach((childSnapshot) => {\r\n            const childData = childSnapshot.val();\r\n            if (childData.id === selectedItemId) {\r\n              setState({\r\n                ...childData.fieldsContent,\r\n              });\r\n\r\n              return true;\r\n            }\r\n          });\r\n        })\r\n        .catch((err) => {\r\n          showTooltip(TooltipTypes.Error, `Couldn't take the data from DB: ${err.message}`);\r\n        });\r\n    }\r\n  }, []);\r\n\r\n  const onDescriptionChange = (evt: React.ChangeEvent<HTMLInputElement>): void => {\r\n    setState((prevState) => {\r\n      return {\r\n        ...prevState,\r\n        description: evt.target.value,\r\n      };\r\n    });\r\n  };\r\n\r\n  const onPriorityChange = (evt: React.ChangeEvent<HTMLSelectElement>): void => {\r\n    setState((prevState) => {\r\n      return {\r\n        ...prevState,\r\n        priority: evt.target.value,\r\n      };\r\n    });\r\n  };\r\n\r\n  const onStatusChange = (evt: React.ChangeEvent<HTMLSelectElement>): void => {\r\n    if (evt.target.value == 'Done') {\r\n      setState((prevState) => {\r\n        return {\r\n          ...prevState,\r\n          endDateActual: new Date().toISOString(),\r\n        };\r\n      });\r\n    } else {\r\n      setState((prevState) => {\r\n        return {\r\n          ...prevState,\r\n          endDateActual: '-',\r\n        };\r\n      });\r\n    }\r\n    setState((prevState) => {\r\n      return {\r\n        ...prevState,\r\n        status: evt.target.value,\r\n      };\r\n    });\r\n  };\r\n\r\n  const onEndDatePlanChange = (evt: React.ChangeEvent<HTMLInputElement>): void => {\r\n    if (evt.target.value.length == 10) {\r\n      let formattedTimeOffset = String(new Date().getTimezoneOffset() / 60);\r\n\r\n      if (formattedTimeOffset.includes('-')) {\r\n        formattedTimeOffset.length == 2\r\n          ? (formattedTimeOffset = formattedTimeOffset.replace('-', '+0'))\r\n          : (formattedTimeOffset = formattedTimeOffset.replace('-', '+'));\r\n      } else {\r\n        formattedTimeOffset.length == 1\r\n          ? (formattedTimeOffset = `-0${formattedTimeOffset}`)\r\n          : (formattedTimeOffset = `-${formattedTimeOffset}`);\r\n      }\r\n\r\n      setState((prevState) => {\r\n        return {\r\n          ...prevState,\r\n          endDatePlan: new Date(\r\n            `${evt.target.value}T23:59:59.000${formattedTimeOffset}:00`\r\n          ).toISOString(),\r\n        };\r\n      });\r\n    }\r\n  };\r\n\r\n  const onSubmit = (evt: React.FormEvent<HTMLFormElement>): void => {\r\n    evt.preventDefault();\r\n\r\n    if (selectedItemId) {\r\n      onEdited!(state);\r\n    } else {\r\n      onAdded(state);\r\n    }\r\n\r\n    onToggleModal(evt);\r\n  };\r\n\r\n  const { description, priority, status, endDatePlan } = state;\r\n\r\n  return (\r\n    <form className=\"todos-form\" onSubmit={onSubmit}>\r\n      <div className=\"todos-form__field-wrapper\">\r\n        <label className=\"todos-form__label\" htmlFor=\"description\">\r\n          Description<sup className=\"todos-form__label-required\">*</sup>:\r\n        </label>\r\n        <input\r\n          maxLength={40}\r\n          className=\"todos-form__field\"\r\n          id=\"description\"\r\n          type=\"text\"\r\n          name=\"description\"\r\n          onChange={onDescriptionChange}\r\n          placeholder=\"What must be to do?\"\r\n          value={description}\r\n          required\r\n        />\r\n      </div>\r\n\r\n      <div className=\"todos-form__fields-group-wrapper\">\r\n        <div className=\"todos-form__field-wrapper\">\r\n          <label className=\"todos-form__label\" htmlFor=\"priority\">\r\n            Priority:\r\n          </label>\r\n          <select\r\n            className=\"todos-form__field\"\r\n            id=\"priority\"\r\n            name=\"priority\"\r\n            onChange={onPriorityChange}\r\n            value={priority}\r\n          >\r\n            <option value=\"Low\">Low</option>\r\n            <option value=\"Medium\">Medium</option>\r\n            <option value=\"High\">High</option>\r\n          </select>\r\n        </div>\r\n        <div className=\"todos-form__field-wrapper\">\r\n          <label className=\"todos-form__label\" htmlFor=\"status\">\r\n            Status:\r\n          </label>\r\n          <select\r\n            className=\"todos-form__field\"\r\n            id=\"status\"\r\n            name=\"status\"\r\n            onChange={onStatusChange}\r\n            value={status}\r\n          >\r\n            <option value=\"New\">New</option>\r\n            <option value=\"In progress\">In progress</option>\r\n            <option value=\"Done\">Done</option>\r\n          </select>\r\n        </div>\r\n      </div>\r\n      <div className=\"todos-form__field-wrapper\">\r\n        <label className=\"todos-form__label\" htmlFor=\"calendar\">\r\n          End Date:{' '}\r\n        </label>\r\n        <input\r\n          required\r\n          className=\"todos-form__field\"\r\n          id=\"calendar\"\r\n          type=\"date\"\r\n          name=\"calendar\"\r\n          onChange={onEndDatePlanChange}\r\n          value={endDatePlan ? getFormattedDate(new Date(endDatePlan), 'calendar') : endDatePlan}\r\n          min={getFormattedDate(new Date(), 'calendar')}\r\n        />\r\n      </div>\r\n\r\n      <button className=\"todos-form__submit-btn\">Save</button>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default TodosModalContent;\r\n","import Modal from './modal';\r\nexport default Modal;\r\n","import React, { ReactNode } from 'react';\r\nimport './modal.css';\r\n\r\ninterface IModal {\r\n  classes: string;\r\n  title: string;\r\n  onCloseBtnClick?: (evt: any) => void;\r\n  children: ReactNode;\r\n}\r\n\r\nconst Modal: React.FC<IModal> = ({ classes, title, onCloseBtnClick, children }) => (\r\n  <section className={`modal ${classes}`}>\r\n    <h2 className=\"modal__title\">{title}</h2>\r\n    {onCloseBtnClick && (\r\n      <button className=\"modal__close\" onClick={onCloseBtnClick}>\r\n        <span className=\"visually-hidden\">Закрыть</span>\r\n      </button>\r\n    )}\r\n    {children}\r\n  </section>\r\n);\r\n\r\nexport default Modal;\r\n","import React, { useState, useEffect } from 'react';\r\nimport PageTitle from '../../components/page-title';\r\nimport SearchPanel from './components/search-panel';\r\nimport TodosTable from './components/todos-table';\r\nimport StatusFilter from './components/status-filter';\r\nimport Portal from '../../components/portal';\r\nimport TodosModalContent from './components/todos-modal-content';\r\nimport Modal from '../../components/modal';\r\nimport { useAppContext, useTooltipContext } from '../../context';\r\nimport firebase from 'firebase/app';\r\nimport { ITodoFieldsContent, ITodoItem, IEveryStatusCount } from '../../interfaces';\r\nimport { Id, TooltipTypes } from '../../types';\r\n\r\nimport './index.css';\r\n\r\ninterface ITodosData {\r\n  [key: string]: ITodoItem;\r\n}\r\n\r\ninterface ITodosPageState {\r\n  todosData?: ITodosData;\r\n  term: string;\r\n  filter: string;\r\n  showModal: boolean;\r\n  selectedItemId: Id | false;\r\n  isDataLoaded: boolean;\r\n}\r\n\r\nconst TodosPage: React.FC = () => {\r\n  const { currentUser } = useAppContext();\r\n  const { showTooltip } = useTooltipContext();\r\n  const [state, setState] = useState<ITodosPageState>({\r\n    term: '',\r\n    filter: 'inProgress',\r\n    showModal: false,\r\n    selectedItemId: false,\r\n    isDataLoaded: false,\r\n  });\r\n  useEffect(() => {\r\n    //Обернуть в try catch?\r\n    const getTodos = (elem: firebase.database.DataSnapshot) => {\r\n      setState(({ isDataLoaded, ...restParams }) => {\r\n        return {\r\n          isDataLoaded: true,\r\n          ...restParams,\r\n          todosData: elem.val(),\r\n        };\r\n      });\r\n    };\r\n    const todosRef = firebase.database().ref('users/' + currentUser.uid + '/todos');\r\n    todosRef.on('value', getTodos);\r\n\r\n    return () => {\r\n      todosRef.off('value', getTodos);\r\n    };\r\n  }, []);\r\n\r\n  if (state.isDataLoaded) {\r\n    let newItemId: Id = 100;\r\n\r\n    const createTodoItem = (fieldsContent: ITodoFieldsContent): ITodoItem => {\r\n      return {\r\n        fieldsContent,\r\n        id: newItemId,\r\n      };\r\n    };\r\n\r\n    const addItem = (fieldsContent: ITodoFieldsContent): void => {\r\n      const newItem: ITodoItem = createTodoItem({\r\n        ...fieldsContent,\r\n      });\r\n\r\n      const db = firebase.database();\r\n      db.ref('users/' + currentUser.uid + '/todos')\r\n        .push(newItem)\r\n        .catch((err) => {\r\n          showTooltip(TooltipTypes.Error, `Add item failed: ${err.message}`);\r\n        });\r\n    };\r\n\r\n    // evt: React.FormEvent<HTMLFormElement> | React.MouseEvent<HTMLButtonElement> | React.MouseEvent<HTMLTableRowElement>\r\n    // Сделать отдельную функцию на закрытие окна?\r\n    const toggleModal = (evt: any): void => {\r\n      if (evt.target.className == 'modal__close') {\r\n        setState((prevState) => {\r\n          return {\r\n            ...prevState,\r\n            selectedItemId: false,\r\n          };\r\n        });\r\n      }\r\n\r\n      setState(({ showModal, ...restParams }) => {\r\n        return {\r\n          ...restParams,\r\n          showModal: !showModal,\r\n        };\r\n      });\r\n    };\r\n\r\n    if (state.todosData) {\r\n      let lastItemId: Id = 100;\r\n\r\n      Object.values(state.todosData).forEach((item) => {\r\n        if (item.id > lastItemId) {\r\n          lastItemId = item.id;\r\n        }\r\n      });\r\n      newItemId = lastItemId + 1;\r\n\r\n      const deleteItem = (id: Id): void => {\r\n        const todosRef = firebase.database().ref('users/' + currentUser.uid + '/todos');\r\n        todosRef\r\n          .once('value')\r\n          .then((snapshot) => {\r\n            snapshot.forEach((childSnapshot) => {\r\n              const childData = childSnapshot.val();\r\n              if (childData.id === id) {\r\n                firebase\r\n                  .database()\r\n                  .ref('users/' + currentUser.uid + `/todos/${childSnapshot.key}`)\r\n                  .remove()\r\n                  .catch((err) => {\r\n                    showTooltip(TooltipTypes.Error, `Removing the task was failed: ${err.message}`);\r\n                  });\r\n                return true;\r\n              }\r\n            });\r\n          })\r\n          .catch((err) => {\r\n            showTooltip(TooltipTypes.Error, `Couldn't take the data from DB: ${err.message}`);\r\n          });\r\n      };\r\n\r\n      const editItem = (fieldsContent: ITodoFieldsContent): void => {\r\n        const todosRef = firebase.database().ref('users/' + currentUser.uid + '/todos');\r\n        todosRef\r\n          .once('value')\r\n          .then((snapshot) => {\r\n            snapshot.forEach((childSnapshot) => {\r\n              const childData = childSnapshot.val();\r\n              if (childData.id === state.selectedItemId) {\r\n                firebase\r\n                  .database()\r\n                  .ref('users/' + currentUser.uid + `/todos/${childSnapshot.key}/fieldsContent`)\r\n                  .set({ ...fieldsContent })\r\n                  .catch((err) => {\r\n                    showTooltip(TooltipTypes.Error, `Editing the task was failed: ${err.message}`);\r\n                  });\r\n                return true;\r\n              }\r\n            });\r\n          })\r\n          .catch((err) => {\r\n            showTooltip(TooltipTypes.Error, `Couldn't take the data from DB: ${err.message}`);\r\n          });\r\n\r\n        setState(({ selectedItemId, ...restParams }) => {\r\n          return {\r\n            selectedItemId: false,\r\n            ...restParams,\r\n          };\r\n        });\r\n      };\r\n\r\n      const search = (items: ITodoItem[], term: string): ITodoItem[] => {\r\n        if (term.length === 0) {\r\n          return items;\r\n        }\r\n        return items.filter((item) => {\r\n          return item.fieldsContent.description.toLowerCase().indexOf(term.toLowerCase()) > -1;\r\n        });\r\n      };\r\n\r\n      const onSearchChange = (term: string): void => {\r\n        //Для единообразия можно деструктуризировать стейт во всех подобных случаях. Это еще и безопасней\r\n        setState((prevState) => {\r\n          return {\r\n            ...prevState,\r\n            term,\r\n          };\r\n        });\r\n      };\r\n\r\n      const filterItem = (items: ITodoItem[], filter: string): ITodoItem[] => {\r\n        switch (filter) {\r\n          case 'all':\r\n            return items;\r\n          case 'new':\r\n            return items.filter((item) => item.fieldsContent.status == 'New');\r\n          case 'inProgress':\r\n            return items.filter((item) => item.fieldsContent.status == 'In progress');\r\n          case 'done':\r\n            return items.filter((item) => item.fieldsContent.status == 'Done');\r\n\r\n          default:\r\n            return items;\r\n        }\r\n      };\r\n\r\n      const onFilterChange = (filter: string): void => {\r\n        setState((prevState) => {\r\n          return {\r\n            ...prevState,\r\n            filter,\r\n          };\r\n        });\r\n      };\r\n\r\n      const selectItem = (evt: React.MouseEvent<HTMLTableRowElement>, id: Id): void => {\r\n        setState((prevState) => {\r\n          return {\r\n            ...prevState,\r\n            selectedItemId: id,\r\n          };\r\n        });\r\n        //В дальнейшем нужно избавиться от передачи события\r\n        toggleModal(evt);\r\n      };\r\n\r\n      const { todosData, term, filter, showModal, selectedItemId } = state;\r\n\r\n      const visibleItems: ITodoItem[] = filterItem(\r\n        search(Object.values(todosData), term),\r\n        filter\r\n      ).reverse();\r\n\r\n      const everyStatusCount: IEveryStatusCount = {\r\n        all: Object.values(todosData).length,\r\n        new: Object.values(todosData).filter((item) => item.fieldsContent.status == 'New').length,\r\n        inProgress: Object.values(todosData).filter(\r\n          (item) => item.fieldsContent.status == 'In progress'\r\n        ).length,\r\n        done: Object.values(todosData).filter((item) => item.fieldsContent.status == 'Done').length,\r\n      };\r\n\r\n      return (\r\n        <main className=\"todos-page\">\r\n          <div className=\"container\">\r\n            <PageTitle text=\"Todo List\" />\r\n            <div className=\"todos-page__control-panel\">\r\n              <button className=\"todos-page__add-task-btn\" onClick={toggleModal}>\r\n                Add task\r\n              </button>\r\n              <SearchPanel onSearchChange={onSearchChange} />\r\n              <StatusFilter\r\n                filter={filter}\r\n                onFilterChange={onFilterChange}\r\n                everyStatusCount={everyStatusCount}\r\n              />\r\n            </div>\r\n\r\n            <TodosTable todos={visibleItems} onDeleted={deleteItem} onSelected={selectItem} />\r\n\r\n            {showModal && (\r\n              <Portal>\r\n                <Modal\r\n                  classes=\"modal--todos\"\r\n                  title={selectedItemId ? 'Edit task' : 'Add task'}\r\n                  onCloseBtnClick={toggleModal}\r\n                >\r\n                  <TodosModalContent\r\n                    onAdded={addItem}\r\n                    onEdited={editItem}\r\n                    onToggleModal={toggleModal}\r\n                    selectedItemId={selectedItemId}\r\n                  />\r\n                </Modal>\r\n              </Portal>\r\n            )}\r\n          </div>\r\n        </main>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <main className=\"todos-page\">\r\n        <div className=\"container\">\r\n          <PageTitle text=\"Todo List\" />\r\n          <div className=\"flex-wrapper todos-page__control-panel\">\r\n            <button className=\"todos-page__add-task-btn\" onClick={toggleModal}>\r\n              Add task\r\n            </button>\r\n          </div>\r\n\r\n          <TodosTable overlayText=\"You can sleep soundly\" />\r\n\r\n          {state.showModal && (\r\n            <Portal>\r\n              <Modal classes=\"modal--todos\" title=\"Add task\" onCloseBtnClick={toggleModal}>\r\n                <TodosModalContent\r\n                  onAdded={addItem}\r\n                  selectedItemId={false}\r\n                  onToggleModal={toggleModal}\r\n                />\r\n              </Modal>\r\n            </Portal>\r\n          )}\r\n        </div>\r\n      </main>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <main className=\"todos-page\">\r\n      <div className=\"container\">\r\n        <PageTitle text=\"Todo List\" />\r\n        <span>Loading...</span>\r\n      </div>\r\n    </main>\r\n  );\r\n};\r\n\r\nexport default TodosPage;\r\n","import NoteItemContent from './note-item-content';\r\nexport default NoteItemContent;\r\n","import React from 'react';\r\nimport { getFormattedDate } from '../../../../helpers';\r\nimport { Id } from '../../../../types';\r\nimport './note-item-content.css';\r\n\r\ninterface NoteItemContentProps {\r\n  creationDate: string;\r\n  description: string;\r\n  onDeleted: () => any;\r\n  // onDeleted: () => (id: Id) => void\r\n}\r\n\r\nconst NoteItemContent: React.FC<NoteItemContentProps> = ({\r\n  creationDate,\r\n  description,\r\n  onDeleted,\r\n}) => (\r\n  <>\r\n    <div className=\"note__header\">\r\n      <span>{getFormattedDate(new Date(creationDate), 'note')}</span>\r\n      <button type=\"button\" className=\"btn note__btn note__btn--del\" onClick={onDeleted}>\r\n        <svg\r\n          xmlns=\"http://www.w3.org/2000/svg\"\r\n          height=\"24px\"\r\n          viewBox=\"0 0 24 24\"\r\n          width=\"24px\"\r\n          fill=\"#ff2a2a\"\r\n        >\r\n          <path d=\"M0 0h24v24H0V0z\" fill=\"none\" />\r\n          <path d=\"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V9c0-1.1-.9-2-2-2H8c-1.1 0-2 .9-2 2v10zM9 9h6c.55 0 1 .45 1 1v8c0 .55-.45 1-1 1H9c-.55 0-1-.45-1-1v-8c0-.55.45-1 1-1zm6.5-5l-.71-.71c-.18-.18-.44-.29-.7-.29H9.91c-.26 0-.52.11-.7.29L8.5 4H6c-.55 0-1 .45-1 1s.45 1 1 1h12c.55 0 1-.45 1-1s-.45-1-1-1h-2.5z\" />\r\n        </svg>\r\n      </button>\r\n    </div>\r\n    <p className=\"note__description\">{description}</p>\r\n  </>\r\n);\r\n\r\nexport default NoteItemContent;\r\n","import NotesList from './notes-list';\r\nexport default NotesList;\r\n","import React from 'react';\r\nimport { TransitionGroup, CSSTransition } from 'react-transition-group';\r\n\r\nimport NoteItemContent from '../note-item-content';\r\nimport { INoteItem } from '../../../../interfaces';\r\nimport { Id } from '../../../../types';\r\nimport './notes-list.css';\r\n\r\ninterface NotesListProps {\r\n  notes?: INoteItem[];\r\n  onDeleted?: (id: Id) => void;\r\n  onSelected?: (evt: React.MouseEvent<HTMLLIElement>, id: Id) => void;\r\n  overlayText?: string;\r\n}\r\n\r\nconst NotesList: React.FC<NotesListProps> = ({ notes, onDeleted, onSelected, overlayText }) => {\r\n  if (notes && onDeleted && onSelected) {\r\n    const itemsList: JSX.Element[] = notes.map((item: INoteItem): JSX.Element => {\r\n      const { id, ...itemProps } = item;\r\n\r\n      return (\r\n        <CSSTransition key={id} timeout={500} classNames=\"list__item\">\r\n          <li className=\"list__item\" onDoubleClick={(evt) => onSelected(evt, id)}>\r\n            <NoteItemContent {...itemProps} onDeleted={() => onDeleted(id)} />\r\n          </li>\r\n        </CSSTransition>\r\n      );\r\n    });\r\n\r\n    return (\r\n      <ul className=\"list list--notes\">\r\n        <TransitionGroup component={null}>{itemsList}</TransitionGroup>\r\n      </ul>\r\n    );\r\n  }\r\n  return (\r\n    <>\r\n      <ul className=\"list list--notes\"></ul>\r\n      <span>{overlayText}</span>\r\n    </>\r\n  );\r\n};\r\nexport default NotesList;\r\n","import NotesModalContent from './notes-modal-content';\r\nexport default NotesModalContent;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { useAppContext, useTooltipContext } from '../../../../context';\r\nimport { Id, TooltipTypes } from '../../../../types';\r\nimport firebase from 'firebase/app';\r\nimport './notes-modal-content.css';\r\n\r\ninterface NotesModalProps {\r\n  selectedItemId: Id | false;\r\n  onEdited?: (description: string) => void;\r\n  onAdded: (description: string) => void;\r\n  onToggleModal: (evt: any) => void;\r\n}\r\n\r\nconst NotesModalContent: React.FC<NotesModalProps> = ({\r\n  selectedItemId,\r\n  onEdited,\r\n  onAdded,\r\n  onToggleModal,\r\n}) => {\r\n  const { currentUser } = useAppContext();\r\n  const { showTooltip } = useTooltipContext();\r\n  const [description, setDescription] = useState('');\r\n\r\n  useEffect(() => {\r\n    if (selectedItemId) {\r\n      const notesRef = firebase.database().ref('users/' + currentUser.uid + '/notes');\r\n      notesRef\r\n        .once('value')\r\n        .then((snapshot) => {\r\n          snapshot.forEach((childSnapshot) => {\r\n            const childData = childSnapshot.val();\r\n            if (childData.id === selectedItemId) {\r\n              setDescription(childData.description);\r\n\r\n              return true;\r\n            }\r\n          });\r\n        })\r\n        .catch((error) => {\r\n          showTooltip(TooltipTypes.Error, `Couldn't take the data from DB: ${error.message}`);\r\n        });\r\n    }\r\n  }, []);\r\n\r\n  const onDescriptionChange = (evt: React.ChangeEvent<HTMLTextAreaElement>): void => {\r\n    setDescription(evt.target.value);\r\n  };\r\n\r\n  const onSubmit = (evt: React.FormEvent<HTMLFormElement>): void => {\r\n    evt.preventDefault();\r\n\r\n    if (selectedItemId) {\r\n      onEdited!(description);\r\n    } else {\r\n      onAdded(description);\r\n    }\r\n\r\n    onToggleModal(evt);\r\n  };\r\n\r\n  return (\r\n    <form className=\"notes-form\" onSubmit={onSubmit}>\r\n      <label className=\"notes-form__label\" htmlFor=\"description\">\r\n        Description<sup className=\"notes-form__label-required\">*</sup>:\r\n      </label>\r\n      <textarea\r\n        className=\"notes-form__field notes-form__field--description\"\r\n        id=\"description\"\r\n        name=\"description\"\r\n        onChange={onDescriptionChange}\r\n        placeholder=\"Type something:)\"\r\n        value={description}\r\n        required\r\n      />\r\n\r\n      <button className=\"notes-form__submit-btn\">Save</button>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default NotesModalContent;\r\n","import React, { useState, useEffect } from 'react';\r\nimport PageTitle from '../../components/page-title';\r\nimport NotesList from './components/notes-list';\r\nimport Portal from '../../components/portal';\r\nimport NotesModalContent from './components/notes-modal-content';\r\nimport Modal from '../../components/modal';\r\nimport { useAppContext, useTooltipContext } from '../../context';\r\nimport firebase from 'firebase/app';\r\nimport { INoteItem } from '../../interfaces';\r\nimport { Id, TooltipTypes } from '../../types';\r\n\r\nimport './index.css';\r\n\r\ninterface INotesData {\r\n  [key: string]: INoteItem;\r\n}\r\n\r\ninterface INotesPageState {\r\n  notesData?: INotesData;\r\n  showModal: boolean;\r\n  selectedItemId: Id | false;\r\n  isDataLoaded: boolean;\r\n}\r\n\r\nconst NotesPage: React.FC = () => {\r\n  const { currentUser } = useAppContext();\r\n  const { showTooltip } = useTooltipContext();\r\n  const [state, setState] = useState<INotesPageState>({\r\n    showModal: false,\r\n    selectedItemId: false,\r\n    isDataLoaded: false,\r\n  });\r\n\r\n  useEffect(() => {\r\n    // @todo Обернуть в try catch?\r\n    const getNotes = (elem: firebase.database.DataSnapshot) => {\r\n      setState(({ isDataLoaded, ...restParams }) => {\r\n        return {\r\n          isDataLoaded: true,\r\n          ...restParams,\r\n          notesData: elem.val(),\r\n        };\r\n      });\r\n    };\r\n    const notesRef = firebase.database().ref('users/' + currentUser.uid + '/notes');\r\n    notesRef.on('value', getNotes);\r\n\r\n    return () => {\r\n      notesRef.off('value', getNotes);\r\n    };\r\n  }, []);\r\n\r\n  if (state.isDataLoaded) {\r\n    let newItemId: Id = 100;\r\n\r\n    const createNoteItem = (description: string): INoteItem => {\r\n      return {\r\n        description,\r\n        // creationDate: getCurrentFormattedDate(),\r\n        creationDate: new Date().toISOString(),\r\n        id: newItemId,\r\n      };\r\n    };\r\n\r\n    const addItem = (description: string): void => {\r\n      const newItem: INoteItem = createNoteItem(description);\r\n\r\n      firebase\r\n        .database()\r\n        .ref('users/' + currentUser.uid + '/notes')\r\n        .push(newItem)\r\n        .catch((e) => {\r\n          showTooltip(TooltipTypes.Error, `Add item failed: ${e.message}`);\r\n        });\r\n    };\r\n\r\n    // const getCurrentFormattedDate = (): string => {\r\n    //   const currentDate: Date = new Date();\r\n    //   const currentMonth: number = currentDate.getMonth() + 1;\r\n    //   const currentDay: number = currentDate.getDate();\r\n\r\n    //   return `${String(currentDay).length == 2 ? currentDay : '0' + currentDay}.${\r\n    //     String(currentMonth).length == 2 ? currentMonth : '0' + currentMonth\r\n    //   }.${currentDate.getFullYear()}`;\r\n    // };\r\n\r\n    // @todo evt: React.FormEvent<HTMLFormElement> | React.MouseEvent<HTMLButtonElement>\r\n    // @todo Сделать отдельную функцию на закрытие окна?\r\n    const toggleModal = (evt: any): void => {\r\n      if (evt.target.className == 'modal__close') {\r\n        setState((prevState) => {\r\n          return {\r\n            ...prevState,\r\n            selectedItemId: false,\r\n          };\r\n        });\r\n      }\r\n\r\n      setState(({ showModal, ...restParams }) => {\r\n        return {\r\n          ...restParams,\r\n          showModal: !showModal,\r\n        };\r\n      });\r\n    };\r\n\r\n    if (state.notesData) {\r\n      let lastItemId: Id = 100;\r\n\r\n      Object.values(state.notesData).forEach((item) => {\r\n        if (item.id > lastItemId) {\r\n          lastItemId = item.id;\r\n        }\r\n      });\r\n      newItemId = lastItemId + 1;\r\n\r\n      const deleteItem = (id: Id): void => {\r\n        const notesRef = firebase.database().ref('users/' + currentUser.uid + '/notes');\r\n        notesRef\r\n          .once('value')\r\n          .then((snapshot) => {\r\n            snapshot.forEach((childSnapshot) => {\r\n              const childData = childSnapshot.val();\r\n              if (childData.id === id) {\r\n                firebase\r\n                  .database()\r\n                  .ref('users/' + currentUser.uid + `/notes/${childSnapshot.key}`)\r\n                  .remove()\r\n                  .catch((error) => {\r\n                    showTooltip(TooltipTypes.Error, `Remove failed: ${error.message}`);\r\n                  });\r\n                return true;\r\n              }\r\n            });\r\n          })\r\n          .catch((error) => {\r\n            showTooltip(TooltipTypes.Error, `Couldn't take the data from DB: ${error.message}`);\r\n          });\r\n      };\r\n\r\n      const editItem = (description: string): void => {\r\n        const notesRef = firebase.database().ref('users/' + currentUser.uid + '/notes');\r\n        notesRef\r\n          .once('value')\r\n          .then((snapshot) => {\r\n            snapshot.forEach((childSnapshot) => {\r\n              const childData = childSnapshot.val();\r\n              if (childData.id === state.selectedItemId) {\r\n                firebase\r\n                  .database()\r\n                  .ref('users/' + currentUser.uid + `/notes/${childSnapshot.key}/description`)\r\n                  .set(description)\r\n                  .catch((error) => {\r\n                    showTooltip(TooltipTypes.Error, `Edit item failed: ${error.message}`);\r\n                  });\r\n                return true;\r\n              }\r\n            });\r\n          })\r\n          .catch((error) => {\r\n            showTooltip(TooltipTypes.Error, `Couldn't take the data from DB: ${error.message}`);\r\n          });\r\n\r\n        setState(({ selectedItemId, ...restParams }) => {\r\n          return {\r\n            selectedItemId: false,\r\n            ...restParams,\r\n          };\r\n        });\r\n      };\r\n\r\n      const selectItem = (evt: React.MouseEvent<HTMLLIElement>, id: Id): void => {\r\n        setState((prevState) => {\r\n          return {\r\n            ...prevState,\r\n            selectedItemId: id,\r\n          };\r\n        });\r\n        // @todo В дальнейшем нужно избавиться от передачи события\r\n        toggleModal(evt);\r\n      };\r\n\r\n      const { notesData, showModal, selectedItemId } = state;\r\n\r\n      return (\r\n        <main className=\"notes-page\">\r\n          <div className=\"container\">\r\n            <PageTitle text=\"Notes\" />\r\n            <button className=\"notes-page__add-note-btn\" onClick={toggleModal}>\r\n              Add note\r\n            </button>\r\n            <NotesList\r\n              notes={Object.values(notesData).reverse()}\r\n              onDeleted={deleteItem}\r\n              onSelected={selectItem}\r\n            />\r\n            {showModal && (\r\n              <Portal>\r\n                <Modal\r\n                  classes=\"modal--notes\"\r\n                  title={selectedItemId ? 'Edit note' : 'Add note'}\r\n                  onCloseBtnClick={toggleModal}\r\n                >\r\n                  <NotesModalContent\r\n                    onAdded={addItem}\r\n                    onEdited={editItem}\r\n                    onToggleModal={toggleModal}\r\n                    selectedItemId={selectedItemId}\r\n                  />\r\n                </Modal>\r\n              </Portal>\r\n            )}\r\n          </div>\r\n        </main>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <main className=\"notes-page\">\r\n        <div className=\"container\">\r\n          <PageTitle text=\"Notes\" />\r\n          <button className=\"notes-page__add-note-btn\" onClick={toggleModal}>\r\n            Add note\r\n          </button>\r\n          <NotesList overlayText=\"You can sleep soundly\" />\r\n          {state.showModal && (\r\n            <Portal>\r\n              <Modal classes=\"modal--notes\" title=\"Add note\" onCloseBtnClick={toggleModal}>\r\n                <NotesModalContent\r\n                  onAdded={addItem}\r\n                  onToggleModal={toggleModal}\r\n                  selectedItemId={false}\r\n                />\r\n              </Modal>\r\n            </Portal>\r\n          )}\r\n        </div>\r\n      </main>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <main className=\"notes-page\">\r\n      <div className=\"container\">\r\n        <PageTitle text=\"Notes\" />\r\n        <span>Loading...</span>\r\n      </div>\r\n    </main>\r\n  );\r\n};\r\n\r\nexport default NotesPage;\r\n","import RequiredMark from './required-mark';\r\nexport default RequiredMark;\r\n","import React from 'react';\r\nimport './required-mark.css';\r\n\r\nconst RequiredMark = (): JSX.Element => <sup className=\"required-mark\">*</sup>;\r\nexport default RequiredMark;\r\n","import ChangeEmailModalContent from './change-email-modal-content';\r\nexport default ChangeEmailModalContent;\r\n","import React, { useState } from 'react';\r\nimport firebase from 'firebase/app';\r\n\r\nimport { useTooltipContext } from '../../../../context';\r\nimport RequiredMark from '../../../../components/required-mark';\r\nimport { TooltipTypes } from '../../../../types';\r\nimport './change-email-modal-content.css';\r\n\r\ninterface ChangeEmailModalProps {\r\n  onToggleModal: (evt: any) => void;\r\n  user: any;\r\n  actionCodeSettings: any;\r\n}\r\ninterface IConfirmCredentials {\r\n  oldEmail: string;\r\n  password: string;\r\n}\r\n\r\nconst ChangeEmailModalContent: React.FC<ChangeEmailModalProps> = ({\r\n  onToggleModal,\r\n  user,\r\n  actionCodeSettings,\r\n}) => {\r\n  const { showTooltip } = useTooltipContext();\r\n\r\n  const [credentials, setCredentials] = useState<IConfirmCredentials>({\r\n    oldEmail: user.email,\r\n    password: '',\r\n  });\r\n  const [email, setEmail] = useState('');\r\n  const [isFirstModal, setIsFirstModal] = useState(true);\r\n\r\n  const onCredentialsChange = (evt: React.ChangeEvent<HTMLInputElement>) => {\r\n    const id: string = evt.target.id;\r\n    const value: string = evt.target.value;\r\n\r\n    setCredentials((prevState) => {\r\n      return {\r\n        ...prevState,\r\n        [id]: value,\r\n      };\r\n    });\r\n  };\r\n\r\n  const onEmailChange = (evt: React.ChangeEvent<HTMLInputElement>) => {\r\n    setEmail(evt.target.value);\r\n  };\r\n\r\n  const onConfirmCredentials = (evt: React.FormEvent<HTMLFormElement>): void => {\r\n    evt.preventDefault();\r\n    const { oldEmail, password } = credentials;\r\n\r\n    const credential = firebase.auth.EmailAuthProvider.credential(oldEmail, password);\r\n\r\n    user\r\n      .reauthenticateWithCredential(credential)\r\n      .then(() => {\r\n        setIsFirstModal(false);\r\n      })\r\n      .catch((error: any) => {\r\n        showTooltip(TooltipTypes.Error, `Reauth didn't pass: ${error.message}`);\r\n      });\r\n  };\r\n  const onSetNewEmail = (evt: React.FormEvent<HTMLFormElement>): void => {\r\n    evt.preventDefault();\r\n\r\n    user\r\n      .verifyBeforeUpdateEmail(email, actionCodeSettings)\r\n      .then(() => {\r\n        showTooltip(\r\n          TooltipTypes.Info,\r\n          'Check your new email and confirm it to finish the change the email'\r\n        );\r\n        onToggleModal(evt);\r\n      })\r\n      .catch(function (err: any) {\r\n        showTooltip(TooltipTypes.Error, `Your email didn't update: ${err.message}`);\r\n      });\r\n  };\r\n\r\n  return (\r\n    <form\r\n      className=\"change-email-form\"\r\n      onSubmit={isFirstModal ? onConfirmCredentials : onSetNewEmail}\r\n    >\r\n      {isFirstModal ? (\r\n        <>\r\n          <div className=\"change-email-form__field-wrapper\">\r\n            <label className=\"change-email-form__label\" htmlFor=\"oldEmail\">\r\n              Old email\r\n              <RequiredMark />:\r\n            </label>\r\n            <input\r\n              className=\"change-email-form__field\"\r\n              id=\"oldEmail\"\r\n              type=\"email\"\r\n              placeholder=\"Enter you old email\"\r\n              onChange={onCredentialsChange}\r\n              value={credentials.oldEmail}\r\n              required\r\n            />\r\n          </div>\r\n          <div className=\"change-email-form__field-wrapper\">\r\n            <label className=\"change-email-form__label\" htmlFor=\"password\">\r\n              Password\r\n              <RequiredMark />:\r\n            </label>\r\n            <input\r\n              className=\"change-email-form__field\"\r\n              id=\"password\"\r\n              type=\"password\"\r\n              placeholder=\"Enter you password\"\r\n              onChange={onCredentialsChange}\r\n              value={credentials.password}\r\n              required\r\n            />\r\n          </div>\r\n        </>\r\n      ) : (\r\n        <div className=\"change-email-form__field-wrapper\">\r\n          <label className=\"change-email-form__label\" htmlFor=\"newEmail\">\r\n            New email\r\n            <RequiredMark />:\r\n          </label>\r\n          <input\r\n            className=\"change-email-form__field\"\r\n            id=\"newEmail\"\r\n            type=\"email\"\r\n            placeholder=\"Enter the new email\"\r\n            onChange={onEmailChange}\r\n            value={email}\r\n            required\r\n          />\r\n        </div>\r\n      )}\r\n\r\n      <button className=\"change-email-form__submit-btn\">\r\n        {isFirstModal ? 'Continue' : 'Save'}\r\n      </button>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default ChangeEmailModalContent;\r\n","import ChangePasswordModalContent from './change-password-modal-content';\r\nexport default ChangePasswordModalContent;\r\n","import React, { useState, useEffect } from 'react';\r\nimport firebase from 'firebase/app';\r\n\r\nimport { useTooltipContext } from '../../../../context';\r\nimport RequiredMark from '../../../../components/required-mark';\r\nimport { TooltipTypes } from '../../../../types';\r\nimport './change-password-modal-content.css';\r\n\r\ninterface ChangePasswordModalProps {\r\n  onToggleModal: (evt: any) => void;\r\n  user: any;\r\n}\r\ninterface IConfirmCredentials {\r\n  email: string;\r\n  oldPassword: string;\r\n}\r\n\r\nconst ChangePasswordModalContent: React.FC<ChangePasswordModalProps> = ({\r\n  onToggleModal,\r\n  user,\r\n}) => {\r\n  const { showTooltip } = useTooltipContext();\r\n\r\n  const [credentials, setCredentials] = useState<IConfirmCredentials>({\r\n    email: user.email,\r\n    oldPassword: '',\r\n  });\r\n  const [isFirstModal, setIsFirstModal] = useState(true);\r\n  const [password, setPassword] = useState('');\r\n\r\n  const onCredentialsChange = (evt: React.ChangeEvent<HTMLInputElement>) => {\r\n    const id: string = evt.target.id;\r\n    const value: string = evt.target.value;\r\n\r\n    setCredentials((prevState) => {\r\n      return {\r\n        ...prevState,\r\n        [id]: value,\r\n      };\r\n    });\r\n  };\r\n\r\n  const onPasswordChange = (evt: React.ChangeEvent<HTMLInputElement>) => {\r\n    setPassword(evt.target.value);\r\n  };\r\n\r\n  const onConfirmCredentials = (evt: React.FormEvent<HTMLFormElement>): void => {\r\n    evt.preventDefault();\r\n    const { email, oldPassword } = credentials;\r\n\r\n    const credential = firebase.auth.EmailAuthProvider.credential(email, oldPassword);\r\n\r\n    user\r\n      .reauthenticateWithCredential(credential)\r\n      .then(() => {\r\n        setIsFirstModal(false);\r\n      })\r\n      .catch((error: any) => {\r\n        showTooltip(TooltipTypes.Error, `Reauth didn't pass: ${error.message}`);\r\n      });\r\n  };\r\n\r\n  const onSetNewPassword = (evt: React.FormEvent<HTMLFormElement>): void => {\r\n    evt.preventDefault();\r\n    // @todo Вылозит предупреждение от гугл, что в результате утечки даннных, пароль оказался раскрыт. Скорее всего связано с отсутствием шифрования с моей стороны\r\n    user\r\n      .updatePassword(password)\r\n      .then(() => {\r\n        showTooltip(TooltipTypes.Success, 'Your password was successfully updated!');\r\n        onToggleModal(evt);\r\n      })\r\n      .catch((err: any) => {\r\n        showTooltip(TooltipTypes.Error, `Your password didn't be update: ${err.message}`);\r\n      });\r\n  };\r\n\r\n  return (\r\n    <form\r\n      className=\"change-password-form\"\r\n      onSubmit={isFirstModal ? onConfirmCredentials : onSetNewPassword}\r\n    >\r\n      {isFirstModal ? (\r\n        <>\r\n          <div className=\"change-password-form__field-wrapper\">\r\n            <label className=\"change-password-form__label\" htmlFor=\"email\">\r\n              Email\r\n              <RequiredMark />:\r\n            </label>\r\n            <input\r\n              className=\"change-password-form__field change-password-form__email-field\"\r\n              id=\"email\"\r\n              type=\"email\"\r\n              placeholder=\"Enter you email\"\r\n              onChange={onCredentialsChange}\r\n              value={credentials.email}\r\n              required\r\n            />\r\n          </div>\r\n\r\n          <div className=\"change-password-form__field-wrapper\">\r\n            <label className=\"change-password-form__label\" htmlFor=\"oldPassword\">\r\n              Old password\r\n              <RequiredMark />:\r\n            </label>\r\n            <input\r\n              className=\"change-password-form__field change-password-form__old-password-field\"\r\n              id=\"oldPassword\"\r\n              type=\"password\"\r\n              placeholder=\"Enter you old password\"\r\n              onChange={onCredentialsChange}\r\n              value={credentials.oldPassword}\r\n              required\r\n            />\r\n          </div>\r\n        </>\r\n      ) : (\r\n        <>\r\n          <div className=\"change-password-form__field-wrapper\">\r\n            <label className=\"change-password-form__label\" htmlFor=\"newPassword\">\r\n              New password\r\n              <RequiredMark />:\r\n            </label>\r\n            <input\r\n              className=\"change-password-form__field change-password-form__new-password-field\"\r\n              id=\"newPassword\"\r\n              type=\"password\"\r\n              placeholder=\"Enter a new password\"\r\n              onChange={onPasswordChange}\r\n              value={password}\r\n              required\r\n            />\r\n          </div>\r\n\r\n          {/* @todo можно реализовать генерацию рандомного пароля\r\n          <button className=\"change-password-form__generate-password\" onClick={onGeneratePassword}>\r\n            Generate password\r\n          </button> */}\r\n        </>\r\n      )}\r\n\r\n      <button className=\"change-password-form__submit-btn\">\r\n        {isFirstModal ? 'Continue' : 'Save'}\r\n      </button>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default ChangePasswordModalContent;\r\n","import DeleteAccountModalContent from './delete-account-modal-content';\r\nexport default DeleteAccountModalContent;\r\n","import React, { useState } from 'react';\r\nimport firebase from 'firebase/app';\r\n\r\nimport { useTooltipContext } from '../../../../context';\r\nimport RequiredMark from '../../../../components/required-mark';\r\nimport { TooltipTypes } from '../../../../types';\r\nimport './delete-account-modal-content.css';\r\n\r\ninterface ChangeAccountDeleteModalProps {\r\n  onToggleModal: (evt: any) => void;\r\n  user: any;\r\n}\r\ninterface IConfirmCredentials {\r\n  email: string;\r\n  password: string;\r\n}\r\n\r\nconst ChangeAccountDeleteModalContent: React.FC<ChangeAccountDeleteModalProps> = ({\r\n  onToggleModal,\r\n  user,\r\n}) => {\r\n  const { showTooltip } = useTooltipContext();\r\n  const [credentials, setCredentials] = useState<IConfirmCredentials>({\r\n    email: user.email,\r\n    password: '',\r\n  });\r\n  const [isFirstModal, setIsFirstModal] = useState(true);\r\n\r\n  const onCredentialsChange = (evt: React.ChangeEvent<HTMLInputElement>) => {\r\n    const id: string = evt.target.id;\r\n    const value: string = evt.target.value;\r\n\r\n    setCredentials((prevState) => {\r\n      return {\r\n        ...prevState,\r\n        [id]: value,\r\n      };\r\n    });\r\n  };\r\n\r\n  const onConfirmCredentials = (evt: React.FormEvent<HTMLFormElement>): void => {\r\n    evt.preventDefault();\r\n    const { email, password } = credentials;\r\n\r\n    const credential = firebase.auth.EmailAuthProvider.credential(email, password);\r\n\r\n    user\r\n      .reauthenticateWithCredential(credential)\r\n      .then(() => {\r\n        setIsFirstModal(false);\r\n      })\r\n      .catch((error: any) => {\r\n        showTooltip(TooltipTypes.Error, `Reauth didn't pass: ${error.message}`);\r\n      });\r\n  };\r\n\r\n  const onDeleteAccount = (evt: React.FormEvent<HTMLFormElement>): void => {\r\n    evt.preventDefault();\r\n    user.delete().catch((err: any) => {\r\n      showTooltip(TooltipTypes.Error, `Your account didn't be deleted: ${err.message}`);\r\n    });\r\n  };\r\n\r\n  const onCancelDeleteAccount = (evt: React.MouseEvent<HTMLButtonElement>): void => {\r\n    onToggleModal(evt);\r\n  };\r\n\r\n  return (\r\n    <form\r\n      className=\"delete-account-form\"\r\n      onSubmit={isFirstModal ? onConfirmCredentials : onDeleteAccount}\r\n    >\r\n      {isFirstModal ? (\r\n        <>\r\n          <div className=\"delete-account-form__field-wrapper\">\r\n            <label className=\"delete-account-form__label\" htmlFor=\"email\">\r\n              Email\r\n              <RequiredMark />:\r\n            </label>\r\n            <input\r\n              className=\"delete-account-form__field delete-account-form__email-field\"\r\n              id=\"email\"\r\n              type=\"email\"\r\n              placeholder=\"Enter you email\"\r\n              onChange={onCredentialsChange}\r\n              value={credentials.email}\r\n              required\r\n            />\r\n          </div>\r\n          <div className=\"delete-account-form__field-wrapper\">\r\n            <label className=\"delete-account-form__label\" htmlFor=\"password\">\r\n              Password\r\n              <RequiredMark />:\r\n            </label>\r\n            <input\r\n              className=\"delete-account-form__field delete-account-form__password-field\"\r\n              id=\"password\"\r\n              type=\"password\"\r\n              placeholder=\"Enter you password\"\r\n              onChange={onCredentialsChange}\r\n              value={credentials.password}\r\n              required\r\n            />\r\n          </div>\r\n          <button className=\"delete-account-form__btn delete-account-form__submit-btn\">\r\n            Continue\r\n          </button>\r\n        </>\r\n      ) : (\r\n        <>\r\n          <span className=\"delete-account-form__warning-text\">\r\n            Do you want <b>to delete</b> your account <b>forever</b>? This action is irreversibly...\r\n          </span>\r\n          <div className=\"delete-account-form__btn-wrapper\">\r\n            <button\r\n              className=\"delete-account-form__btn delete-account-form__agree-btn\"\r\n              type=\"submit\"\r\n            >\r\n              Yes\r\n            </button>\r\n            <button\r\n              className=\"delete-account-form__btn delete-account-form__disagree-btn\"\r\n              type=\"button\"\r\n              onClick={onCancelDeleteAccount}\r\n            >\r\n              No\r\n            </button>\r\n          </div>\r\n        </>\r\n      )}\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default ChangeAccountDeleteModalContent;\r\n","export default __webpack_public_path__ + \"static/media/anonymous.a4137231.jpg\";","import React, { useState, useEffect } from 'react';\r\nimport PageTitle from '../../components/page-title';\r\nimport Portal from '../../components/portal';\r\nimport Modal from '../../components/modal';\r\nimport { useAppContext, useTooltipContext } from '../../context';\r\nimport firebase from 'firebase/app';\r\nimport ChangeEmailModalContent from './components/change-email-modal-content';\r\nimport ChangePasswordModalContent from './components/change-password-modal-content';\r\nimport DeleteAccountModalContent from './components/delete-account-modal-content';\r\nimport { TooltipTypes } from '../../types';\r\nimport './index.css';\r\nimport anonymousImg from '../../assets/img/anonymous.jpg';\r\n\r\n// @todo Рефакторинг компонента + привести к единому виду названия функций, переменных из useState\r\nconst SettingsPage: React.FC = () => {\r\n  const { currentUser, actionCodeSettings } = useAppContext();\r\n  const { showTooltip } = useTooltipContext();\r\n\r\n  const [name, setName] = useState(currentUser.displayName);\r\n  const [photoUrl, setPhotoUrl] = useState(currentUser.photoURL);\r\n  const [isNameClicked, setIsNameClicked] = useState(false);\r\n  const [isAvatarClicked, setIsAvatarClicked] = useState(false);\r\n  const [showModalEmailChange, setShowModalEmailChange] = useState(false);\r\n  const [showModalPasswordChange, setShowModalPasswordChange] = useState(false);\r\n  const [showModalAccountDelete, setShowModalAccountDelete] = useState(false);\r\n\r\n  const isGoogleUser = currentUser.providerData[0].providerId == 'google.com' ? true : false;\r\n  const email = currentUser.email;\r\n\r\n  //Смена имени\r\n  const onNameClick = (): void => {\r\n    setIsNameClicked(true);\r\n  };\r\n\r\n  const onNameSave = (): void => {\r\n    currentUser\r\n      .updateProfile({\r\n        displayName: name,\r\n      })\r\n      .then(() => setIsNameClicked(false))\r\n      .catch((err: any) => {\r\n        showTooltip(TooltipTypes.Error, `User name didn't update: ${err.message}`);\r\n      });\r\n  };\r\n  const onNameCancel = (): void => {\r\n    setName(currentUser.displayName);\r\n    setIsNameClicked(false);\r\n  };\r\n\r\n  //Смена фото\r\n  const onAvatarClick = (): void => {\r\n    setIsAvatarClicked(true);\r\n  };\r\n  const onPhotoUrlSave = (): void => {\r\n    currentUser\r\n      .updateProfile({\r\n        photoURL: photoUrl,\r\n      })\r\n      .then(() => setIsAvatarClicked(false))\r\n      .catch((err: any) => {\r\n        showTooltip(TooltipTypes.Error, `User avatar didn't update: ${err.message}`);\r\n      });\r\n  };\r\n  const onPhotoUrlCancel = (): void => {\r\n    setPhotoUrl(currentUser.photoURL);\r\n    setIsAvatarClicked(false);\r\n  };\r\n\r\n  // Сброс пароля\r\n  const onEmailForResetPasswordSend = (): void => {\r\n    firebase\r\n      .auth()\r\n      .sendPasswordResetEmail(email, actionCodeSettings)\r\n      .then(() => {\r\n        showTooltip(TooltipTypes.Info, 'The email to reset your password was send');\r\n      })\r\n      .catch((err) => {\r\n        showTooltip(TooltipTypes.Error, `Email for reset password didn't send ${err.message}`);\r\n      });\r\n  };\r\n\r\n  // @todo Сделать один хендлер с swith case?\r\n  const onNameChange = (evt: React.ChangeEvent<HTMLInputElement>): void => {\r\n    setName(evt.target.value);\r\n  };\r\n  const onPhotoUrlChange = (evt: React.ChangeEvent<HTMLInputElement>): void => {\r\n    setPhotoUrl(evt.target.value);\r\n  };\r\n\r\n  // Тоггл модалок\r\n  const toggleEmailChangeModal = (\r\n    evt:\r\n      | React.FormEvent<HTMLFormElement>\r\n      | React.MouseEvent<HTMLButtonElement>\r\n      | React.FormEvent<HTMLSpanElement>\r\n  ): void => {\r\n    setShowModalEmailChange((prev) => !prev);\r\n  };\r\n\r\n  const togglePasswordChangeModal = (\r\n    evt: React.FormEvent<HTMLFormElement> | React.MouseEvent<HTMLButtonElement>\r\n  ): void => {\r\n    setShowModalPasswordChange((prev) => !prev);\r\n  };\r\n\r\n  const toggleAccountDeleteModal = (\r\n    evt: React.FormEvent<HTMLFormElement> | React.MouseEvent<HTMLButtonElement>\r\n  ): void => {\r\n    setShowModalAccountDelete((prev) => !prev);\r\n  };\r\n\r\n  return (\r\n    <main className=\"settings-page\">\r\n      <div className=\"container\">\r\n        <PageTitle text=\"Settings\" />\r\n        <h2 className=\"settings-page__subtitle\">Account</h2>\r\n\r\n        <div className=\"settings-wrapper\">\r\n          <div className=\"settings-item settings-item__avatar-wrapper\">\r\n            <img\r\n              className=\"settings-item__avatar\"\r\n              src={photoUrl ? photoUrl : anonymousImg}\r\n              width=\"100\"\r\n              height=\"100\"\r\n              alt=\"User's avatar\"\r\n            />\r\n\r\n            {isAvatarClicked ? (\r\n              <>\r\n                {/* @todo Стоит сделать ref на инпут, чтобы бахать фокус сразу после его появления? */}\r\n                <input\r\n                  className=\"settings-item__field settings-item__field--avatar\"\r\n                  type=\"text\"\r\n                  name=\"avatar\"\r\n                  onChange={onPhotoUrlChange}\r\n                  placeholder=\"Type the link on your avatar\"\r\n                  value={photoUrl ? photoUrl : ''}\r\n                />\r\n                <button className=\"settings-item__btn\" onClick={onPhotoUrlSave}>\r\n                  Save\r\n                </button>\r\n                <button\r\n                  className=\"settings-item__btn settings-item__btn--cancel\"\r\n                  onClick={onPhotoUrlCancel}\r\n                >\r\n                  Cancel\r\n                </button>\r\n              </>\r\n            ) : (\r\n              <button\r\n                className=\"settings-item__edit-btn settings-item__edit-btn--avatar\"\r\n                onClick={onAvatarClick}\r\n              >\r\n                <svg\r\n                  xmlns=\"http://www.w3.org/2000/svg\"\r\n                  height=\"24px\"\r\n                  viewBox=\"0 0 24 24\"\r\n                  width=\"24px\"\r\n                  fill=\"#000000\"\r\n                >\r\n                  <path d=\"M0 0h24v24H0z\" fill=\"none\" />\r\n                  <path d=\"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z\" />\r\n                </svg>\r\n              </button>\r\n            )}\r\n          </div>\r\n\r\n          <div className=\"settings-item\">\r\n            {isNameClicked ? (\r\n              <>\r\n                <input\r\n                  className=\"settings-item__field settings-item__field--name\"\r\n                  type=\"text\"\r\n                  name=\"name\"\r\n                  onChange={onNameChange}\r\n                  placeholder=\"What is your name?\"\r\n                  value={name ? name : ''}\r\n                />\r\n                <button className=\"settings-item__btn\" onClick={onNameSave}>\r\n                  Save\r\n                </button>\r\n                <button\r\n                  className=\"settings-item__btn settings-item__btn--cancel\"\r\n                  onClick={onNameCancel}\r\n                >\r\n                  Cancel\r\n                </button>\r\n              </>\r\n            ) : (\r\n              <>\r\n                <span className=\"settings-item__text\">\r\n                  <b>Your name: </b>\r\n                  {name ? name : 'Anonymous'}\r\n                </span>\r\n                <button\r\n                  className=\"settings-item__edit-btn settings-item__edit-btn--name\"\r\n                  onClick={onNameClick}\r\n                >\r\n                  <svg\r\n                    xmlns=\"http://www.w3.org/2000/svg\"\r\n                    height=\"18px\"\r\n                    viewBox=\"0 0 24 24\"\r\n                    width=\"18px\"\r\n                    fill=\"#000000\"\r\n                  >\r\n                    <path d=\"M0 0h24v24H0z\" fill=\"none\" />\r\n                    <path d=\"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z\" />\r\n                  </svg>\r\n                </button>\r\n              </>\r\n            )}\r\n          </div>\r\n\r\n          <div className=\"settings-item settings-item--email\">\r\n            <span className=\"settings-item__text\">\r\n              <b>Your email: </b>\r\n              {email}\r\n            </span>\r\n\r\n            {isGoogleUser ? undefined : (\r\n              <button\r\n                className=\"settings-item__edit-btn settings-item__edit-btn--email\"\r\n                onClick={toggleEmailChangeModal}\r\n              >\r\n                <svg\r\n                  xmlns=\"http://www.w3.org/2000/svg\"\r\n                  height=\"18px\"\r\n                  viewBox=\"0 0 24 24\"\r\n                  width=\"18px\"\r\n                  fill=\"#000000\"\r\n                >\r\n                  <path d=\"M0 0h24v24H0z\" fill=\"none\" />\r\n                  <path d=\"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z\" />\r\n                </svg>\r\n              </button>\r\n            )}\r\n          </div>\r\n\r\n          {!isGoogleUser && (\r\n            <>\r\n              <div className=\"settings-item\">\r\n                <span>If you remember your password, you can</span>\r\n                <button className=\"settings-item__btn\" onClick={togglePasswordChangeModal}>\r\n                  Change it\r\n                </button>\r\n              </div>\r\n              <div className=\"settings-item\">\r\n                <span>\r\n                  But if you forgot it, we can send the email to you to reset the password\r\n                </span>\r\n                <button className=\"settings-item__btn\" onClick={onEmailForResetPasswordSend}>\r\n                  Send the email\r\n                </button>\r\n              </div>\r\n            </>\r\n          )}\r\n\r\n          <div className=\"settings-item\">\r\n            <button\r\n              className=\"settings-item__btn settings-item__btn--cancel settings-item__btn--delete-account\"\r\n              onClick={toggleAccountDeleteModal}\r\n            >\r\n              Delete account\r\n            </button>\r\n          </div>\r\n        </div>\r\n        <h2 className=\"settings-page__subtitle\">App</h2>\r\n        {/* @todo Здесь будет тогглер цветовой схемы сайта */}\r\n\r\n        {showModalEmailChange && (\r\n          <Portal>\r\n            <Modal\r\n              classes=\"modal--change-email\"\r\n              title=\"Changing the email\"\r\n              onCloseBtnClick={toggleEmailChangeModal}\r\n            >\r\n              <ChangeEmailModalContent\r\n                onToggleModal={toggleEmailChangeModal}\r\n                user={currentUser}\r\n                actionCodeSettings={actionCodeSettings}\r\n              />\r\n            </Modal>\r\n          </Portal>\r\n        )}\r\n        {showModalPasswordChange && (\r\n          <Portal>\r\n            <Modal\r\n              classes=\"modal--change-password\"\r\n              title=\"Changing the password\"\r\n              onCloseBtnClick={togglePasswordChangeModal}\r\n            >\r\n              <ChangePasswordModalContent\r\n                onToggleModal={togglePasswordChangeModal}\r\n                user={currentUser}\r\n              />\r\n            </Modal>\r\n          </Portal>\r\n        )}\r\n        {showModalAccountDelete && (\r\n          <Portal>\r\n            <Modal\r\n              classes=\"modal--delete-account\"\r\n              title=\"Deleting the account\"\r\n              onCloseBtnClick={toggleAccountDeleteModal}\r\n            >\r\n              <DeleteAccountModalContent\r\n                user={currentUser}\r\n                onToggleModal={toggleAccountDeleteModal}\r\n              />\r\n            </Modal>\r\n          </Portal>\r\n        )}\r\n      </div>\r\n    </main>\r\n  );\r\n};\r\n\r\nexport default SettingsPage;\r\n","import * as Yup from 'yup';\r\n\r\nexport const signUpValidationSchema = Yup.object({\r\n  email: Yup.string().email('Invalid email address').required('Required'),\r\n  password: Yup.string().min(6, 'Must be 6 characters or more').required('Required'),\r\n  repeatPassword: Yup.string()\r\n    .oneOf([Yup.ref('password')], `Passwords don't match`)\r\n    .required('Required'),\r\n});\r\n\r\nexport const signInValidationSchema = signUpValidationSchema.omit(['repeatPassword']).shape({\r\n  rememberMe: Yup.boolean(),\r\n});\r\n\r\nexport const resetPasswordValidationSchema = signUpValidationSchema.pick(['email']);\r\n","import React from 'react';\r\nimport { Field, ErrorMessage } from 'formik';\r\n\r\nimport { ICustomInput } from '../../interfaces';\r\nimport './customInput.css';\r\n\r\nconst CustomInput: React.FC<ICustomInput> = ({\r\n  label,\r\n  labelClass,\r\n  isRequired,\r\n  fieldClass,\r\n  type,\r\n  fieldName,\r\n  placeholder,\r\n  isError,\r\n  isTouched,\r\n}) => (\r\n  <>\r\n    <label className={`label ${labelClass ? labelClass : ''}`} htmlFor={fieldName}>\r\n      {label}\r\n      {isRequired && <sup className=\"label-required\">*</sup>}:\r\n    </label>\r\n    <div className=\"field-with-error-wrapper\">\r\n      <Field\r\n        className={`field ${fieldClass ? fieldClass : ''} ${\r\n          isError && isTouched ? `field--error` : ''\r\n        }`}\r\n        id={fieldName}\r\n        type={type}\r\n        name={fieldName}\r\n        placeholder={placeholder}\r\n      />\r\n\r\n      <ErrorMessage name={fieldName} component=\"span\" className=\"error-message\" />\r\n    </div>\r\n  </>\r\n);\r\n\r\nexport default CustomInput;\r\n","import { ICustomInput } from '../../../../interfaces';\r\n\r\nconst inputsConfig: Omit<ICustomInput, 'isError' | 'isTouched'>[] = [\r\n  {\r\n    label: 'Email',\r\n    isRequired: true,\r\n    type: 'email',\r\n    fieldName: 'email',\r\n    placeholder: 'Enter your email',\r\n  },\r\n  {\r\n    label: 'Password',\r\n    isRequired: true,\r\n    type: 'password',\r\n    fieldName: 'password',\r\n    placeholder: 'Create a password',\r\n  },\r\n  {\r\n    label: 'Repeat password',\r\n    isRequired: true,\r\n    type: 'password',\r\n    fieldName: 'repeatPassword',\r\n    placeholder: 'Repeat your password',\r\n  },\r\n];\r\n\r\nexport default inputsConfig;\r\n","import SignUpModalContent from './sign-up-modal-content';\r\nexport default SignUpModalContent;\r\n","import React, { useMemo } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { Formik, Form } from 'formik';\r\n\r\nimport { useTooltipContext } from '../../../../context';\r\nimport { signUpValidationSchema } from '../../../../validationSchemas';\r\nimport {\r\n  firebaseCreateUser,\r\n  firebaseCreateUserWithGoogle,\r\n} from '../../../../services/firebase-service';\r\nimport CustomInput from '../../../../components/customInput';\r\nimport inputsConfig from './inputs-config';\r\n\r\nimport './sign-up-modal-content.css';\r\n\r\nconst SignUpModalContent: React.FC = () => {\r\n  const { showTooltip } = useTooltipContext();\r\n\r\n  return (\r\n    <>\r\n      <Formik\r\n        initialValues={{ email: '', password: '', repeatPassword: '' }}\r\n        validationSchema={signUpValidationSchema}\r\n        onSubmit={(values, { setSubmitting }) =>\r\n          firebaseCreateUser(values, showTooltip, setSubmitting)\r\n        }\r\n      >\r\n        {({ isSubmitting, errors, touched }) => (\r\n          <Form className=\"sign-up-form\">\r\n            {useMemo(\r\n              () =>\r\n                inputsConfig.map((item) => (\r\n                  <div className=\"sign-up-form__field-wrapper\" key={item.fieldName}>\r\n                    <CustomInput\r\n                      label={item.label}\r\n                      labelClass=\"sign-up-form__label\"\r\n                      isRequired={item.isRequired}\r\n                      fieldClass=\"sign-up-form__field\"\r\n                      type={item.type}\r\n                      fieldName={item.fieldName}\r\n                      placeholder={item.placeholder}\r\n                      isError={item.fieldName in errors}\r\n                      isTouched={item.fieldName in touched}\r\n                    />\r\n                  </div>\r\n                )),\r\n              [errors, touched]\r\n            )}\r\n\r\n            <button className=\"sign-up-form__submit-btn\" type=\"submit\" disabled={isSubmitting}>\r\n              Sign up\r\n            </button>\r\n          </Form>\r\n        )}\r\n      </Formik>\r\n\r\n      <div className=\"modal--sign-up__sign-up-with-google\">\r\n        <span className=\"sign-up-with-google__text\">Also you can</span>\r\n        <button\r\n          className=\"sign-up-with-google__btn\"\r\n          onClick={() => firebaseCreateUserWithGoogle(showTooltip)}\r\n        >\r\n          Sign up with\r\n        </button>\r\n      </div>\r\n\r\n      <span className=\"modal--sign-up__go-to-sign-in\">\r\n        Already have an account?{' '}\r\n        <Link className=\"modal--sign-up__sign-in-link\" to=\"/sign-in\">\r\n          Sign in\r\n        </Link>\r\n      </span>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default SignUpModalContent;\r\n","import React from 'react';\r\nimport Modal from '../../components/modal';\r\nimport SignUpModalContent from './components/sign-up-modal-content';\r\n\r\nconst SignUpPage: React.FC = () => (\r\n  <main className=\"sign-up-page\">\r\n    <Modal classes=\"modal--sign-up\" title=\"Sign up\">\r\n      <SignUpModalContent />\r\n    </Modal>\r\n  </main>\r\n);\r\n\r\nexport default SignUpPage;\r\n","import { ICustomInput } from '../../../../interfaces';\r\n\r\nconst inputsConfig: Omit<ICustomInput, 'isError' | 'isTouched'>[] = [\r\n  {\r\n    label: 'Email',\r\n    isRequired: true,\r\n    type: 'email',\r\n    fieldName: 'email',\r\n    placeholder: 'Enter your email',\r\n  },\r\n  {\r\n    label: 'Password',\r\n    isRequired: true,\r\n    type: 'password',\r\n    fieldName: 'password',\r\n    placeholder: 'Enter your password',\r\n  },\r\n  {\r\n    label: 'Remember me',\r\n    isRequired: false,\r\n    type: 'checkbox',\r\n    fieldName: 'rememberMe',\r\n  },\r\n];\r\n\r\nexport default inputsConfig;\r\n","import SignInModalContent from './sign-in-modal-content';\r\nexport default SignInModalContent;\r\n","import React, { useMemo } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { Formik, Form } from 'formik';\r\n\r\nimport { useTooltipContext } from '../../../../context';\r\nimport { signInValidationSchema } from '../../../../validationSchemas';\r\nimport { firebaseSignIn, firebaseGoogleSignIn } from '../../../../services/firebase-service';\r\nimport inputsConfig from './inputs-config';\r\nimport CustomInput from '../../../../components/customInput';\r\n\r\nimport './sign-in-modal-content.css';\r\n\r\nconst SignInModalContent: React.FC = () => {\r\n  const { showTooltip } = useTooltipContext();\r\n\r\n  return (\r\n    <>\r\n      <Formik\r\n        initialValues={{\r\n          email: '',\r\n          password: '',\r\n          rememberMe: Boolean(localStorage.getItem('rememberMe')),\r\n        }}\r\n        validationSchema={signInValidationSchema}\r\n        onSubmit={(values, { setSubmitting }) => firebaseSignIn(values, showTooltip, setSubmitting)}\r\n      >\r\n        {({ isSubmitting, errors, touched }) => (\r\n          <Form className=\"sign-in-form\">\r\n            {useMemo(\r\n              () =>\r\n                inputsConfig.map((item) => (\r\n                  <div\r\n                    className={`sign-in-form__field-wrapper ${\r\n                      item.fieldName === `rememberMe` ? `sign-in-form__field-wrapper--checkbox` : ''\r\n                    }`}\r\n                    key={item.fieldName}\r\n                  >\r\n                    <CustomInput\r\n                      label={item.label}\r\n                      labelClass=\"sign-in-form__label\"\r\n                      isRequired={item.isRequired}\r\n                      fieldClass={`sign-up-form__field ${\r\n                        item.fieldName === `rememberMe` ? `sign-in-form__field--checkbox` : ``\r\n                      }`}\r\n                      type={item.type}\r\n                      fieldName={item.fieldName}\r\n                      placeholder={item.placeholder}\r\n                      isError={item.fieldName in errors}\r\n                      isTouched={item.fieldName in touched}\r\n                    />\r\n                  </div>\r\n                )),\r\n              [errors, touched]\r\n            )}\r\n\r\n            <button className=\"sign-in-form__submit-btn\" type=\"submit\" disabled={isSubmitting}>\r\n              Sign in\r\n            </button>\r\n          </Form>\r\n        )}\r\n      </Formik>\r\n\r\n      <button\r\n        className=\"modal--sign-in__google-btn\"\r\n        onClick={() => firebaseGoogleSignIn(showTooltip)}\r\n      >\r\n        Sign in with\r\n      </button>\r\n\r\n      <span className=\"modal--sign-in__go-to-reset\">\r\n        Forgot password?{' '}\r\n        <Link className=\"modal--sign-in__link\" to=\"/reset-password\">\r\n          Reset\r\n        </Link>\r\n      </span>\r\n      <span className=\"modal--sign-in__go-to-sign-up\">\r\n        Back to{' '}\r\n        <Link className=\"modal--sign-in__link\" to=\"/sign-up\">\r\n          Sign up\r\n        </Link>\r\n      </span>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default SignInModalContent;\r\n","import React from 'react';\r\nimport Modal from '../../components/modal';\r\nimport SignInModalContent from './components/sign-in-modal-content';\r\n\r\nconst SignInPage: React.FC = () => (\r\n  <main className=\"sign-in-page\">\r\n    <Modal classes=\"modal--sign-in\" title=\"Sign in\">\r\n      <SignInModalContent />\r\n    </Modal>\r\n  </main>\r\n);\r\n\r\nexport default SignInPage;\r\n","import React, { useMemo } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { Formik, Form } from 'formik';\r\n\r\nimport { useAppContext, useTooltipContext } from '../../../context/';\r\nimport { resetPasswordValidationSchema } from '../../../validationSchemas';\r\nimport { firebaseSendPasswordResetEmail } from '../../../services/firebase-service';\r\nimport CustomInput from '../../../components/customInput';\r\n\r\nimport './reset-password-modal-content.css';\r\n\r\nconst ResetPasswordModalContent: React.FC = () => {\r\n  const { actionCodeSettings } = useAppContext();\r\n  const { showTooltip } = useTooltipContext();\r\n\r\n  return (\r\n    <>\r\n      <Formik\r\n        initialValues={{\r\n          email: '',\r\n        }}\r\n        validationSchema={resetPasswordValidationSchema}\r\n        onSubmit={(values, { setSubmitting }) =>\r\n          firebaseSendPasswordResetEmail(values, actionCodeSettings, showTooltip, setSubmitting)\r\n        }\r\n      >\r\n        {({ isSubmitting, errors, touched }) => (\r\n          <Form className=\"reset-password-form\">\r\n            {useMemo(\r\n              () => (\r\n                <div className=\"reset-password-form__field-wrapper\">\r\n                  <CustomInput\r\n                    label=\"Email\"\r\n                    labelClass=\"reset-password-form__label\"\r\n                    isRequired={true}\r\n                    fieldClass=\"reset-password-form__field\"\r\n                    type=\"email\"\r\n                    fieldName=\"email\"\r\n                    placeholder=\"Enter your email\"\r\n                    isError={'email' in errors}\r\n                    isTouched={'email' in touched}\r\n                  />\r\n                </div>\r\n              ),\r\n              [errors, touched]\r\n            )}\r\n\r\n            <button\r\n              className=\"reset-password-form__submit-btn\"\r\n              type=\"submit\"\r\n              disabled={isSubmitting}\r\n            >\r\n              Reset password\r\n            </button>\r\n          </Form>\r\n        )}\r\n      </Formik>\r\n\r\n      <Link className=\"modal--reset-password__sign-in-link\" to=\"/sign-in\">\r\n        I've just remembered :)\r\n      </Link>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ResetPasswordModalContent;\r\n","import React from 'react';\r\nimport { Redirect } from 'react-router-dom';\r\nimport Modal from '../../components/modal';\r\nimport ResetPasswordModalContent from './components/reset-password-modal-content';\r\n\r\nconst ResetPasswordPage: React.FC = () => (\r\n  <main className=\"reset-password-page\">\r\n    <Modal classes=\"modal--reset-password\" title=\"Reset password\">\r\n      <ResetPasswordModalContent />\r\n    </Modal>\r\n  </main>\r\n);\r\n\r\nexport default ResetPasswordPage;\r\n","import Header from \"./header\";\r\nexport default Header;\r\n","import React from 'react';\r\nimport { NavLink } from 'react-router-dom';\r\nimport { useTooltipContext } from '../../context';\r\nimport { firebaseSignOut } from '../../services/firebase-service';\r\n\r\nimport './header.css';\r\n\r\nconst Header: React.FC = () => {\r\n  const { showTooltip } = useTooltipContext();\r\n\r\n  return (\r\n    <header className=\"page-header\">\r\n      <div className=\"container flex-wrapper\">\r\n        <nav className=\"main-nav\">\r\n          <NavLink exact to=\"/\" className=\"main-nav__link\" activeClassName=\"main-nav__active-link\">\r\n            Doit!\r\n          </NavLink>\r\n          <ul className=\"main-nav__list\">\r\n            <li className=\"main-nav__item\">\r\n              <NavLink\r\n                to=\"/todo\"\r\n                className=\"main-nav__link\"\r\n                activeClassName=\"main-nav__active-link\"\r\n              >\r\n                Todo\r\n              </NavLink>\r\n            </li>\r\n            <li className=\"main-nav__item\">\r\n              <NavLink\r\n                to=\"/notes\"\r\n                className=\"main-nav__link\"\r\n                activeClassName=\"main-nav__active-link\"\r\n              >\r\n                Notes\r\n              </NavLink>\r\n            </li>\r\n            <li className=\"main-nav__item\">\r\n              <NavLink\r\n                to=\"/settings\"\r\n                className=\"main-nav__link\"\r\n                activeClassName=\"main-nav__active-link\"\r\n              >\r\n                Settings\r\n              </NavLink>\r\n            </li>\r\n          </ul>\r\n        </nav>\r\n\r\n        <button className=\"page-header__sign-out-btn\" onClick={() => firebaseSignOut(showTooltip)}>\r\n          Sign out\r\n        </button>\r\n      </div>\r\n    </header>\r\n  );\r\n};\r\n\r\nexport default Header;\r\n","import React from 'react';\r\nimport { useTooltipContext } from '../../context';\r\nimport { firebaseSignOut } from '../../services/firebase-service';\r\n\r\nimport './emailUnverifiedOverlay.css';\r\n\r\nconst EmailUnverifiedOverlay = () => {\r\n  const { showTooltip } = useTooltipContext();\r\n\r\n  return (\r\n    <div className=\"app-overlay\">\r\n      <div className=\"app-overlay__content\">\r\n        Please confirm your email to use the app or{' '}\r\n        <button className=\"app-overlay__sign-out-btn\" onClick={() => firebaseSignOut(showTooltip)}>\r\n          Sign out\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default EmailUnverifiedOverlay;\r\n","import Tooltip from './tooltip';\r\nexport default Tooltip;\r\n","import React, { useEffect } from 'react';\r\nimport { Transition } from 'react-transition-group';\r\nimport { useTooltipContext } from '../../context';\r\nimport './tooltip.css';\r\n\r\nconst Tooltip: React.FC = () => {\r\n  const { message, type, isOpen, hideTooltip } = useTooltipContext();\r\n\r\n  useEffect(() => {\r\n    if (isOpen) {\r\n      let timerId = setTimeout(hideTooltip, 10000);\r\n      return () => {\r\n        clearTimeout(timerId);\r\n      };\r\n    }\r\n  }, [isOpen]);\r\n\r\n  return (\r\n    <Transition in={isOpen} timeout={300} unmountOnExit>\r\n      {(transitionState: string) => (\r\n        <div className={`tooltip ${transitionState} tooltip--${type}`}>\r\n          <span className=\"tooltip__message\">{message}</span>\r\n          <button className=\"tooltip__close\" onClick={() => hideTooltip()}></button>\r\n        </div>\r\n      )}\r\n    </Transition>\r\n  );\r\n};\r\nexport default Tooltip;\r\n","import App from \"./app\";\r\nexport default App;\r\n","import React from 'react';\r\nimport { HashRouter as Router, Redirect, Route } from 'react-router-dom';\r\nimport {\r\n  MainPage,\r\n  TodosPage,\r\n  NotesPage,\r\n  SettingsPage,\r\n  SignUpPage,\r\n  SignInPage,\r\n  ResetPasswordPage,\r\n} from '../pages';\r\nimport { useAppContext } from '../context';\r\nimport Header from '../components/header';\r\nimport EmailUnverifiedOverlay from '../components/emailUnverifiedOverlay';\r\nimport Tooltip from '../components/tooltip';\r\n\r\nimport '../assets/css/normalize.css';\r\nimport './scaffolding.css';\r\n\r\nconst App: React.FC = () => {\r\n  const { isLoggedIn, currentUser } = useAppContext();\r\n\r\n  return (\r\n    <Router>\r\n      {isLoggedIn ? (\r\n        <>\r\n          {currentUser.emailVerified ? (\r\n            <>\r\n              <Route path=\"/sign-in\" render={() => <Redirect to=\"/\" />} />\r\n              <Route path=\"/sign-up\" render={() => <Redirect to=\"/\" />} />\r\n              <Header />\r\n              <Tooltip />\r\n              <Route path=\"/\" component={MainPage} exact />\r\n              <Route path=\"/todo\" component={TodosPage} />\r\n              <Route path=\"/notes\" component={NotesPage} />\r\n              <Route path=\"/settings\" component={SettingsPage} />\r\n            </>\r\n          ) : (\r\n            <>\r\n              <Route path=\"/sign-in\" render={() => <Redirect to=\"/\" />} />\r\n              <Route path=\"/sign-up\" render={() => <Redirect to=\"/\" />} />\r\n              <Header />\r\n              <Tooltip />\r\n              <EmailUnverifiedOverlay />\r\n            </>\r\n          )}\r\n        </>\r\n      ) : (\r\n        <>\r\n          <Tooltip />\r\n          <Route path=\"/sign-up\" component={SignUpPage} />\r\n          <Route path=\"/sign-in\" component={SignInPage} />\r\n          <Route path=\"/reset-password\" component={ResetPasswordPage} />\r\n          {/* @todo Использовать switch из react-router-dom*/}\r\n          {/* <Route path=\"*\" render={() => <Redirect to=\"/sign-up\" />} /> */}\r\n          <Redirect to=\"/sign-up\" />\r\n        </>\r\n      )}\r\n    </Router>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\nimport App from './app';\r\nimport { AppProvider, TooltipProvider } from './context';\r\nimport firebase from 'firebase/app';\r\nimport 'firebase/auth';\r\nimport 'firebase/database';\r\n\r\ninterface IFirebaseConfig {\r\n  apiKey: string;\r\n  authDomain: string;\r\n  databaseURL: string;\r\n  projectId: string;\r\n  storageBucket: string;\r\n  messagingSenderId: string;\r\n  appId: string;\r\n}\r\n\r\nconst firebaseConfig: IFirebaseConfig = {\r\n  apiKey: 'AIzaSyD4KDh3FaOBTHDF_oleVT06eUTvbDCStNY',\r\n  authDomain: 'todo-1c323.firebaseapp.com',\r\n  databaseURL: 'https://todo-1c323-default-rtdb.firebaseio.com',\r\n  projectId: 'todo-1c323',\r\n  storageBucket: 'todo-1c323.appspot.com',\r\n  messagingSenderId: '372839437605',\r\n  appId: '1:372839437605:web:31ef34b6e882e585f576cc',\r\n};\r\n\r\nfirebase.initializeApp(firebaseConfig);\r\n\r\nReactDOM.render(\r\n  <TooltipProvider>\r\n    <AppProvider>\r\n      <App />\r\n    </AppProvider>\r\n  </TooltipProvider>,\r\n  document.querySelector('#root')\r\n);\r\n"],"sourceRoot":""}