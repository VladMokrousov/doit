{"version":3,"sources":["types.ts","components/page-title/index.tsx","components/page-title/page-title.tsx","pages/main-page.tsx","validationSchemas.ts","helpers.ts","services/firebase-service.ts","context/AppContext.tsx","context/TooltipContext.tsx","assets/img/delete-icon.svg","pages/todos-page/components/todo-item-content/index.tsx","pages/todos-page/components/todo-item-content/todo-item-content.tsx","pages/todos-page/components/todos-table/tableHeaderConfig.ts","pages/todos-page/components/todos-table/index.tsx","pages/todos-page/components/todos-table/todos-table.tsx","components/portal/index.tsx","components/portal/portal.tsx","components/customInput/customInput.tsx","pages/todos-page/components/todos-modal-content/index.tsx","pages/todos-page/components/todos-modal-content/todos-modal-content.tsx","pages/todos-page/components/search-panel/index.tsx","pages/todos-page/components/search-panel/search-panel.tsx","pages/todos-page/components/status-filter/index.tsx","pages/todos-page/components/status-filter/status-filter.tsx","pages/todos-page/components/todos-control-panel/todos-control-panel.tsx","components/modal/index.tsx","components/modal/modal.tsx","pages/todos-page/index.tsx","pages/notes-page/components/note-item-content/index.tsx","pages/notes-page/components/note-item-content/note-item-content.tsx","pages/notes-page/components/notes-list/index.tsx","pages/notes-page/components/notes-list/notes-list.tsx","pages/notes-page/components/notes-modal-content/index.tsx","pages/notes-page/components/notes-modal-content/notes-modal-content.tsx","pages/notes-page/index.tsx","components/required-mark/index.tsx","components/required-mark/required-mark.tsx","pages/settings-page/components/change-email-modal-content/index.tsx","pages/settings-page/components/change-email-modal-content/change-email-modal-content.tsx","pages/settings-page/components/change-password-modal-content/index.tsx","pages/settings-page/components/change-password-modal-content/change-password-modal-content.tsx","pages/settings-page/components/delete-account-modal-content/index.tsx","pages/settings-page/components/delete-account-modal-content/delete-account-modal-content.tsx","assets/img/change-icon.svg","assets/img/anonymous.jpg","pages/settings-page/index.tsx","pages/sign-up-page/components/sign-up-modal-content/inputs-config.ts","pages/sign-up-page/components/sign-up-modal-content/index.tsx","pages/sign-up-page/components/sign-up-modal-content/sign-up-modal-content.tsx","pages/sign-up-page/index.tsx","pages/sign-in-page/components/sign-in-modal-content/inputs-config.ts","pages/sign-in-page/components/sign-in-modal-content/index.tsx","pages/sign-in-page/components/sign-in-modal-content/sign-in-modal-content.tsx","pages/sign-in-page/index.tsx","pages/reset-password-page/components/reset-password-modal-content.tsx","pages/reset-password-page/index.tsx","components/header/index.tsx","components/header/header.tsx","components/emailUnverifiedOverlay/emailUnverifiedOverlay.tsx","components/tooltip/index.tsx","components/tooltip/tooltip.tsx","app/index.tsx","app/app.tsx","index.tsx"],"names":["TooltipTypes","ToggleModalTypes","PageTitle","text","className","MainPage","signUpValidationSchema","Yup","email","required","password","min","repeatPassword","oneOf","signInValidationSchema","omit","shape","rememberMe","resetPasswordValidationSchema","pick","todoFormValidationSchema","description","max","priority","status","endDatePlan","noteFormValidationSchema","getFormattedDate","date","type","currentMonth","getMonth","currentDay","getDate","getFullYear","String","length","clsx","classNames","filter","v","join","trim","firebaseSignOut","showTooltip","firebase","auth","signOut","catch","error","Error","message","firebaseConnectDisconnectTodoList","currentUser","setTodoPageState","getTodos","elem","isDataLoaded","restParams","todosList","child","val","lastTodoId","todosRef","database","ref","uid","on","off","firebaseConnectDisconnectNoteList","setNotesPageState","getNotes","noteList","lastNoteId","notesRef","AppContext","React","createContext","useAppContext","useContext","AppProvider","children","useState","isLoggedIn","setIsLoggedIn","setCurrentUser","isUserGet","setUserGet","actionCodeSettings","url","useTooltipContext","useEffect","onAuthStateChanged","user","emailVerified","sendEmailVerification","err","localStorage","getItem","onLogIn","lastSignInTime","Date","metadata","Math","round","getTime","onLogOut","Provider","value","TooltipContext","TooltipProvider","isOpen","setIsOpen","setType","setMessage","hideTooltip","TodoItemContent","fieldsContent","id","endDateActual","onClick","once","then","snapshot","forEach","childSnapshot","todoRef","Object","keys","update","key","remove","firebaseDeleteTodo","src","deleteIcon","width","height","alt","classTemplate","tableHeadersConfig","class","TodosTable","visibleTodos","tableRows","todosPageState","toggleModal","todosPageSetState","tableHeaders","map","item","scope","term","useMemo","items","filterTodos","toLowerCase","indexOf","searchTodos","values","reverse","importantClass","doneClass","expiredClass","toISOString","onDoubleClick","prevState","selectedItemId","selectItem","Portal","el","document","createElement","classList","add","body","style","overflow","modalHtml","querySelector","append","createPortal","CustomInput","label","labelClass","isRequired","fieldClass","fieldName","placeholder","isError","isTouched","as","htmlFor","name","component","TodosModalContent","newItemId","onToggleModal","setState","initialState","setInitialState","childData","firebaseGetTodoValue","createCustomInput","errors","touched","addTodo","newItem","newTodoKey","push","firebaseAddTodo","editTodo","todosListRef","set","firebaseEditTodo","initialValues","enableReinitialize","validationSchema","onSubmit","setSubmitting","formattedTimeOffset","getTimezoneOffset","includes","replace","getFormattedTimeOffset","todo","isSubmitting","undefined","disabled","SearchPanel","setTerm","onChange","evt","changedTerm","target","StatusFilter","todos","getTodosLengthWithStatusFilter","btnProps","todosCount","buttons","clazz","onFilterChange","TodosControlPanel","Modal","classes","title","onCloseBtnClick","TodosPage","showModal","state","Default","WithSelectedItemClearing","NoteItemContent","note","creationDate","noteRef","firebaseDeleteNote","NotesList","visibleNotes","notes","notesPageSetState","CSSTransition","timeout","TransitionGroup","NotesModalContent","initialDescription","setInitialDescription","firebaseGetNoteValue","addNote","newNote","newNoteKey","firebaseAddNote","editNote","noteListRef","firebaseEditNote","NotesPage","RequiredMark","ChangeEmailModalContent","oldEmail","credentials","setCredentials","setEmail","isFirstModal","setIsFirstModal","onCredentialsChange","preventDefault","credential","EmailAuthProvider","reauthenticateWithCredential","verifyBeforeUpdateEmail","Info","ChangePasswordModalContent","oldPassword","setPassword","updatePassword","Success","DeleteAccountModalContent","delete","_extends","assign","i","arguments","source","prototype","hasOwnProperty","call","apply","this","d","fill","props","xmlns","viewBox","SettingsPage","displayName","setName","photoURL","photoUrl","setPhotoUrl","isNameClicked","setIsNameClicked","isAvatarClicked","setIsAvatarClicked","showModalEmailChange","setShowModalEmailChange","showModalPasswordChange","setShowModalPasswordChange","showModalAccountDelete","setShowModalAccountDelete","isGoogleUser","providerData","providerId","toggleEmailChangeModal","prev","togglePasswordChangeModal","toggleAccountDeleteModal","anonymousImg","updateProfile","sendPasswordResetEmail","inputsConfig","SignUpModalContent","createUserWithEmailAndPassword","setItem","finally","firebaseCreateUser","provider","GoogleAuthProvider","signInWithPopup","firebaseCreateUserWithGoogle","to","SignUpPage","SignInModalContent","Boolean","removeItem","signInWithEmailAndPassword","firebaseSignIn","firebaseGoogleSignIn","SignInPage","ResetPasswordModalContent","firebaseSendPasswordResetEmail","ResetPasswordPage","Header","exact","activeClassName","EmailUnverifiedOverlay","Tooltip","timerId","setTimeout","clearTimeout","Transition","in","unmountOnExit","transitionState","App","path","render","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","ReactDOM"],"mappings":"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","file":"static/js/main.4639a504.chunk.js","sourcesContent":["export type Id = number;\r\n\r\nexport enum TooltipTypes {\r\n  Info = 'info',\r\n  Error = 'error',\r\n  Success = 'success',\r\n}\r\n\r\nexport enum ToggleModalTypes {\r\n  Default = 'default',\r\n  WithSelectedItemClearing = 'withSelectedItemClearing',\r\n}\r\n","import PageTitle from \"./page-title\";\r\nexport default PageTitle;\r\n","import React from 'react';\r\nimport './page-title.css';\r\n\r\ninterface PageTitleProps {\r\n  text: string;\r\n}\r\n\r\nconst PageTitle: React.FC<PageTitleProps> = ({ text }) => {\r\n  return <h1 className=\"page-title\">{text}</h1>;\r\n};\r\n\r\nexport default PageTitle;\r\n","import React from 'react';\r\nimport PageTitle from '../components/page-title/';\r\n\r\nconst MainPage: React.FC = () => (\r\n  <main className=\"main-page\">\r\n    <div className=\"container\">\r\n      <PageTitle text=\"Welcome to the greatest todo app ever!!!\" />\r\n    </div>\r\n  </main>\r\n);\r\n\r\nexport default MainPage;\r\n","import * as Yup from 'yup';\r\n\r\nexport const signUpValidationSchema = Yup.object({\r\n  email: Yup.string().email('Invalid email address').required('Required'),\r\n  password: Yup.string().min(6, 'Must be 6 characters or more').required('Required'),\r\n  repeatPassword: Yup.string()\r\n    .oneOf([Yup.ref('password')], `Passwords don't match`)\r\n    .required('Required'),\r\n});\r\n\r\nexport const signInValidationSchema = signUpValidationSchema.omit(['repeatPassword']).shape({\r\n  rememberMe: Yup.boolean(),\r\n});\r\n\r\nexport const resetPasswordValidationSchema = signUpValidationSchema.pick(['email']);\r\n\r\n// @todo Вынести эти значения в constants.ts\r\nexport const MINUTES_COUNT_IN_HOUR = 60;\r\n\r\n// Корректная длина даты для value календаря в форме todo-шек\r\nexport const CORRECT_DATE_LENGTH = 10;\r\n\r\n// Максимальная длина заголовка, при которой todo-шка смотрится норм\r\nexport const MAX_TITLE_LENGTH = 40;\r\n\r\nexport const todoFormValidationSchema = Yup.object({\r\n  description: Yup.string()\r\n    .max(MAX_TITLE_LENGTH, `Must be ${MAX_TITLE_LENGTH} characters or less`)\r\n    .required('Required'),\r\n  priority: Yup.string().oneOf([`Low`, `Medium`, `High`], `Unexpected value`).required('Required'),\r\n  status: Yup.string()\r\n    .oneOf([`New`, `In progress`, `Done`], `Unexpected value`)\r\n    .required('Required'),\r\n  endDatePlan: Yup.string().max(CORRECT_DATE_LENGTH, 'Incorrect date').required('Required'),\r\n});\r\n\r\nexport const noteFormValidationSchema = Yup.object({\r\n  description: Yup.string().required('Required'),\r\n});\r\n","import { MINUTES_COUNT_IN_HOUR } from './validationSchemas';\r\n\r\nexport const getFormattedDate = (date: Date, type: string): string => {\r\n  const currentMonth: number = date.getMonth() + 1;\r\n  const currentDay: number = date.getDate();\r\n  if (type === 'calendar') {\r\n    return `${date.getFullYear()}-${\r\n      String(currentMonth).length == 2 ? currentMonth : '0' + currentMonth\r\n    }-${String(currentDay).length == 2 ? currentDay : '0' + currentDay}`;\r\n  }\r\n  return `${String(currentDay).length == 2 ? currentDay : '0' + currentDay}.${\r\n    String(currentMonth).length == 2 ? currentMonth : '0' + currentMonth\r\n  }.${date.getFullYear()}`;\r\n};\r\n\r\nexport const getFormattedTimeOffset = (): string => {\r\n  // Смещение UTC относительно нашего часового пояса. Например, в Иркутске -8\r\n  let formattedTimeOffset = String(new Date().getTimezoneOffset() / MINUTES_COUNT_IN_HOUR);\r\n\r\n  if (formattedTimeOffset.includes('-')) {\r\n    // Присваеваем formattedTimeOffset смещение относительно UTC, а не нашего часового пояса, меняя знак\r\n    formattedTimeOffset.length == 2\r\n      ? (formattedTimeOffset = formattedTimeOffset.replace('-', '+0'))\r\n      : (formattedTimeOffset = formattedTimeOffset.replace('-', '+'));\r\n  } else {\r\n    formattedTimeOffset.length == 1\r\n      ? (formattedTimeOffset = `-0${formattedTimeOffset}`)\r\n      : (formattedTimeOffset = `-${formattedTimeOffset}`);\r\n  }\r\n  return formattedTimeOffset;\r\n};\r\n\r\nexport const clsx = (classNames: any[]): string =>\r\n  classNames\r\n    .filter((v) => !!v)\r\n    .join(` `)\r\n    .trim();\r\n","import firebase from 'firebase/app';\r\n\r\nimport {\r\n  INoteItem,\r\n  INotesPageState,\r\n  ITodoFieldsContent,\r\n  ITodoItem,\r\n  ITodosPageState,\r\n} from '../interfaces';\r\nimport { TooltipTypes, Id } from '../types';\r\n\r\nexport const firebaseCreateUser = (values: any, showTooltip: any, setSubmitting: any) =>\r\n  firebase\r\n    .auth()\r\n    .createUserWithEmailAndPassword(values.email, values.password)\r\n    .then(() => localStorage.setItem('rememberMe', 'true'))\r\n    .catch((err) =>\r\n      showTooltip(TooltipTypes.Error, `Your account didn't be created: ${err.message}`)\r\n    )\r\n    .finally(() => setSubmitting(false));\r\n\r\nexport const firebaseSignIn = (values: any, showTooltip: any, setSubmitting: any) => {\r\n  if (values.rememberMe) {\r\n    localStorage.setItem('rememberMe', 'true');\r\n  } else {\r\n    localStorage.removeItem('rememberMe');\r\n  }\r\n\r\n  firebase\r\n    .auth()\r\n    .signInWithEmailAndPassword(values.email, values.password)\r\n    .catch((err) => showTooltip(TooltipTypes.Error, err.message))\r\n    .finally(() => setSubmitting(false));\r\n};\r\n\r\n// @todo Do i need in almost the same Google signIn/Up?\r\n// @todo  setSubmitting(false)\r\nexport const firebaseCreateUserWithGoogle = (showTooltip: any): void => {\r\n  const provider = new firebase.auth.GoogleAuthProvider();\r\n\r\n  firebase\r\n    .auth()\r\n    .signInWithPopup(provider)\r\n    .then(() => localStorage.setItem('rememberMe', 'true'))\r\n    .catch((error) => {\r\n      showTooltip(TooltipTypes.Error, error.message);\r\n    });\r\n};\r\n\r\n// @todo  setSubmitting(false)\r\nexport const firebaseGoogleSignIn = (showTooltip: any): void => {\r\n  const provider = new firebase.auth.GoogleAuthProvider();\r\n  firebase\r\n    .auth()\r\n    .signInWithPopup(provider)\r\n    .catch((error) => {\r\n      showTooltip(TooltipTypes.Error, error.message);\r\n    });\r\n};\r\n\r\n// @todo  setSubmitting(false)\r\nexport const firebaseSignOut = (\r\n  showTooltip: (type: TooltipTypes, message: string) => void\r\n): Promise<void> =>\r\n  firebase\r\n    .auth()\r\n    .signOut()\r\n    .catch((error) => {\r\n      showTooltip(TooltipTypes.Error, error.message);\r\n    });\r\n\r\nexport const firebaseSendPasswordResetEmail = (\r\n  values: any,\r\n  actionCodeSettings: any,\r\n  showTooltip: any,\r\n  setSubmitting: any\r\n) =>\r\n  firebase\r\n    .auth()\r\n    .sendPasswordResetEmail(values.email, actionCodeSettings)\r\n    .then(() => {\r\n      showTooltip(TooltipTypes.Info, 'The email to reset your password was send');\r\n    })\r\n    .catch((err) => {\r\n      showTooltip(TooltipTypes.Error, err.message);\r\n    })\r\n    .finally(() => setSubmitting(false));\r\n\r\n// Todos page --------------------------------------------\r\nexport const firebaseConnectDisconnectTodoList = (\r\n  type: 'connect' | 'disconnect',\r\n  currentUser: any,\r\n  showTooltip: any,\r\n  setTodoPageState: React.Dispatch<React.SetStateAction<ITodosPageState>>\r\n) => {\r\n  const getTodos = (elem: firebase.database.DataSnapshot) => {\r\n    setTodoPageState(({ isDataLoaded, ...restParams }) => ({\r\n      isDataLoaded: true,\r\n      ...restParams,\r\n      todosList: elem.child('list').val(),\r\n      lastTodoId: elem.child('lastTodoId').val(),\r\n    }));\r\n  };\r\n\r\n  const todosRef = firebase.database().ref('users/' + currentUser.uid + '/todos');\r\n  if (type === 'connect') {\r\n    try {\r\n      todosRef.on('value', getTodos);\r\n    } catch (error: any) {\r\n      showTooltip(TooltipTypes.Error, `Couldn't fetch the todo list: ${error.message}`);\r\n    }\r\n  } else {\r\n    todosRef.off('value', getTodos);\r\n  }\r\n};\r\n\r\nexport const firebaseDeleteTodo = (id: Id, currentUser: any, showTooltip: any): void => {\r\n  const todosRef = firebase.database().ref('users/' + currentUser.uid + '/todos/list');\r\n  todosRef\r\n    .once('value')\r\n    .then((snapshot) => {\r\n      snapshot.forEach((childSnapshot) => {\r\n        const childData = childSnapshot.val();\r\n        if (childData.id === id) {\r\n          const todoRef = firebase.database().ref('users/' + currentUser.uid + `/todos`);\r\n\r\n          // Если от=стался последний элемент, который мы сейчас удалим\r\n          if (Object.keys(snapshot.val()).length - 1 === 0) {\r\n            todoRef.update({\r\n              [`/list/${childSnapshot.key}`]: null,\r\n              '/lastTodoId': null,\r\n            });\r\n          } else {\r\n            firebase\r\n              .database()\r\n              .ref('users/' + currentUser.uid + `/todos/list/${childSnapshot.key}`)\r\n              .remove();\r\n          }\r\n\r\n          return true;\r\n        }\r\n      });\r\n    })\r\n    .catch((err) => {\r\n      showTooltip(TooltipTypes.Error, `Removing the todo was failed: ${err.message}`);\r\n    });\r\n};\r\n\r\nexport const firebaseAddTodo = (currentUser: any, newItem: ITodoItem, showTooltip: any): void => {\r\n  const todosRef = firebase.database().ref(`users/${currentUser.uid}/todos`);\r\n  const newTodoKey = todosRef.child(`list`).push().key;\r\n\r\n  todosRef\r\n    .update({\r\n      [`list/${newTodoKey}`]: newItem,\r\n      lastTodoId: newItem.id,\r\n    })\r\n    .catch((err) => {\r\n      showTooltip(TooltipTypes.Error, `Todo wasn't added: ${err.message}`);\r\n    });\r\n};\r\n\r\nexport const firebaseEditTodo = (\r\n  currentUser: any,\r\n  selectedItemId: Id | null,\r\n  fieldsContent: ITodoFieldsContent,\r\n  showTooltip: any\r\n) => {\r\n  const todosListRef = firebase.database().ref('users/' + currentUser.uid + '/todos/list');\r\n  todosListRef\r\n    .once('value')\r\n    .then((snapshot) => {\r\n      snapshot.forEach((childSnapshot) => {\r\n        const childData = childSnapshot.val();\r\n        if (childData.id === selectedItemId) {\r\n          todosListRef.child(`${childSnapshot.key}/fieldsContent`).set({ ...fieldsContent });\r\n\r\n          return true;\r\n        }\r\n      });\r\n    })\r\n    .catch((err) => {\r\n      showTooltip(TooltipTypes.Error, `Editing the task was failed: ${err.message}`);\r\n    });\r\n};\r\n\r\nexport const firebaseGetTodoValue = (\r\n  currentUser: any,\r\n  selectedItemId: Id,\r\n  setInitialState: React.Dispatch<React.SetStateAction<ITodoFieldsContent>>,\r\n  showTooltip: any\r\n) => {\r\n  const todosRef = firebase.database().ref('users/' + currentUser.uid + '/todos/list');\r\n  todosRef\r\n    .once('value')\r\n    .then((snapshot) => {\r\n      snapshot.forEach((childSnapshot) => {\r\n        const childData = childSnapshot.val();\r\n        if (childData.id === selectedItemId) {\r\n          setInitialState({\r\n            ...childData.fieldsContent,\r\n          });\r\n\r\n          return true;\r\n        }\r\n      });\r\n    })\r\n    .catch((err) => {\r\n      showTooltip(TooltipTypes.Error, `Couldn't take the data about this todo: ${err.message}`);\r\n    });\r\n};\r\n\r\n// Notes page --------------------------------------------\r\nexport const firebaseConnectDisconnectNoteList = (\r\n  type: 'connect' | 'disconnect',\r\n  currentUser: any,\r\n  showTooltip: any,\r\n  setNotesPageState: React.Dispatch<React.SetStateAction<INotesPageState>>\r\n) => {\r\n  const getNotes = (elem: firebase.database.DataSnapshot) => {\r\n    setNotesPageState(({ isDataLoaded, ...restParams }) => ({\r\n      isDataLoaded: true,\r\n      ...restParams,\r\n      noteList: elem.child('list').val(),\r\n      lastNoteId: elem.child('lastNoteId').val(),\r\n    }));\r\n  };\r\n\r\n  const notesRef = firebase.database().ref('users/' + currentUser.uid + '/notes');\r\n  if (type === 'connect') {\r\n    try {\r\n      notesRef.on('value', getNotes);\r\n    } catch (error: any) {\r\n      showTooltip(TooltipTypes.Error, `Couldn't fetch the note list: ${error.message}`);\r\n    }\r\n  } else {\r\n    notesRef.off('value', getNotes);\r\n  }\r\n};\r\n\r\n// @todo Стоит объединить с такой же функцией для удаления todo\r\nexport const firebaseDeleteNote = (id: Id, currentUser: any, showTooltip: any): void => {\r\n  const notesRef = firebase.database().ref('users/' + currentUser.uid + '/notes/list');\r\n  notesRef\r\n    .once('value')\r\n    .then((snapshot) => {\r\n      snapshot.forEach((childSnapshot) => {\r\n        const childData = childSnapshot.val();\r\n        if (childData.id === id) {\r\n          const noteRef = firebase.database().ref('users/' + currentUser.uid + `/notes`);\r\n\r\n          // Если остался последний элемент, который мы сейчас удалим\r\n          if (Object.keys(snapshot.val()).length - 1 === 0) {\r\n            noteRef.update({\r\n              [`/list/${childSnapshot.key}`]: null,\r\n              '/lastNoteId': null,\r\n            });\r\n          } else {\r\n            firebase\r\n              .database()\r\n              .ref('users/' + currentUser.uid + `/notes/list/${childSnapshot.key}`)\r\n              .remove();\r\n          }\r\n\r\n          return true;\r\n        }\r\n      });\r\n    })\r\n    .catch((error) => {\r\n      showTooltip(TooltipTypes.Error, `Removing the note failed: ${error.message}`);\r\n    });\r\n};\r\n\r\nexport const firebaseGetNoteValue = (\r\n  currentUser: any,\r\n  selectedItemId: Id,\r\n  setInitialDescription: React.Dispatch<React.SetStateAction<string>>,\r\n  showTooltip: any\r\n) => {\r\n  const notesRef = firebase.database().ref('users/' + currentUser.uid + '/notes/list');\r\n  notesRef\r\n    .once('value')\r\n    .then((snapshot) => {\r\n      snapshot.forEach((childSnapshot) => {\r\n        const childData = childSnapshot.val();\r\n        if (childData.id === selectedItemId) {\r\n          setInitialDescription(childData.description);\r\n\r\n          return true;\r\n        }\r\n      });\r\n    })\r\n    .catch((error) => {\r\n      showTooltip(TooltipTypes.Error, `Couldn't take the data about this note: ${error.message}`);\r\n    });\r\n};\r\n// @todo Стоит объединить с такой же функцией для добавления todo\r\nexport const firebaseAddNote = (currentUser: any, newNote: INoteItem, showTooltip: any): void => {\r\n  const notesRef = firebase.database().ref(`users/${currentUser.uid}/notes`);\r\n  const newNoteKey = notesRef.child(`list`).push().key;\r\n\r\n  notesRef\r\n    .update({\r\n      [`list/${newNoteKey}`]: newNote,\r\n      lastNoteId: newNote.id,\r\n    })\r\n    .catch((err) => {\r\n      showTooltip(TooltipTypes.Error, `Note wasn't added: ${err.message}`);\r\n    });\r\n};\r\n\r\n// @todo Стоит объединить с такой же функцией для добавления todo\r\nexport const firebaseEditNote = (\r\n  currentUser: any,\r\n  selectedItemId: Id | null,\r\n  description: string,\r\n  showTooltip: any\r\n) => {\r\n  const noteListRef = firebase.database().ref('users/' + currentUser.uid + '/notes/list');\r\n  noteListRef\r\n    .once('value')\r\n    .then((snapshot) => {\r\n      snapshot.forEach((childSnapshot) => {\r\n        const childData = childSnapshot.val();\r\n        if (childData.id === selectedItemId) {\r\n          noteListRef.child(`${childSnapshot.key}/description`).set(description);\r\n          return true;\r\n        }\r\n      });\r\n    })\r\n    .catch((error) => {\r\n      showTooltip(TooltipTypes.Error, `Editing the note was failed: ${error.message}`);\r\n    });\r\n};\r\n","import React, { useState, useEffect, useContext } from 'react';\r\nimport firebase from 'firebase/app';\r\n\r\nimport { useTooltipContext } from './index';\r\nimport { TooltipTypes } from '../types';\r\nimport { firebaseSignOut } from '../services/firebase-service';\r\n\r\ninterface AppContextProps {\r\n  children: React.ReactNode;\r\n}\r\n\r\n// @todo По идее мне не нужно указывать тип и аргумент. Нужно посмотреть, как сделать нормально\r\nconst AppContext = React.createContext<any>({});\r\n\r\nexport const useAppContext = () => {\r\n  return useContext(AppContext);\r\n};\r\n\r\n// @todo Не уверен, что корректно давать контексту тип React.FC\r\nexport const AppProvider: React.FC<AppContextProps> = ({ children }) => {\r\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\r\n  const [currentUser, setCurrentUser] = useState(false);\r\n  const [isUserGet, setUserGet] = useState(false);\r\n\r\n  const actionCodeSettings = {\r\n    url: 'https://vladmokrousov.github.io/doit/build/#/sign-in',\r\n    // url: 'http://localhost:3000/sign-in',\r\n  };\r\n\r\n  const { showTooltip } = useTooltipContext();\r\n\r\n  useEffect(() => {\r\n    firebase.auth().onAuthStateChanged((user) => {\r\n      if (user) {\r\n        if (!user.emailVerified) {\r\n          user.sendEmailVerification(actionCodeSettings).catch((err) => {\r\n            showTooltip(TooltipTypes.Error, `The email didn't send. ${err.message}`);\r\n          });\r\n        }\r\n        if (!localStorage.getItem('rememberMe')) {\r\n          const lastSignInTime = new Date(user.metadata.lastSignInTime!);\r\n          const lastSignInTimeTimeStamp = Math.round(lastSignInTime.getTime() / 1000);\r\n          const yesterdayTimeStamp = Math.round(new Date().getTime() / 1000) - 24 * 3600;\r\n\r\n          if (lastSignInTimeTimeStamp < yesterdayTimeStamp) {\r\n            firebaseSignOut(showTooltip);\r\n          } else {\r\n            onLogIn(user);\r\n          }\r\n        } else {\r\n          onLogIn(user);\r\n        }\r\n      } else {\r\n        onLogOut();\r\n      }\r\n      setUserGet(true);\r\n    });\r\n  }, []);\r\n\r\n  const onLogIn = (user: any): void => {\r\n    setIsLoggedIn(true);\r\n    setCurrentUser(user);\r\n  };\r\n  const onLogOut = (): void => {\r\n    setIsLoggedIn(false);\r\n    setCurrentUser(false);\r\n  };\r\n\r\n  return isUserGet ? (\r\n    <AppContext.Provider value={{ isLoggedIn, currentUser, actionCodeSettings }}>\r\n      {children}\r\n    </AppContext.Provider>\r\n  ) : null;\r\n};\r\n","import React, { useState, useContext } from 'react';\r\nimport { TooltipTypes } from '../types';\r\n\r\ninterface TooltipContextProps {\r\n  children: React.ReactNode;\r\n}\r\n\r\n//По идее мне не нужно указывать тип и аргумент. Нужно посмотреть, как сделать нормально\r\nconst TooltipContext = React.createContext<any>({});\r\n\r\nexport const useTooltipContext = () => {\r\n  return useContext(TooltipContext);\r\n};\r\n\r\n//Не уверен, что корректно давать контексту тип React.FC\r\nexport const TooltipProvider: React.FC<TooltipContextProps> = ({ children }) => {\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const [type, setType] = useState('');\r\n  const [message, setMessage] = useState('');\r\n\r\n  const showTooltip = (type: TooltipTypes, message: string): void => {\r\n    setType(type);\r\n    setMessage(message);\r\n    setIsOpen(true);\r\n  };\r\n  const hideTooltip = (): void => {\r\n    setIsOpen(false);\r\n  };\r\n\r\n  return (\r\n    <TooltipContext.Provider value={{ isOpen, type, message, showTooltip, hideTooltip }}>\r\n      {children}\r\n    </TooltipContext.Provider>\r\n  );\r\n};\r\n","export default __webpack_public_path__ + \"static/media/delete-icon.13e1f8ab.svg\";","import TodoItemContent from \"./todo-item-content\";\r\nexport default TodoItemContent;\r\n","import React from 'react';\r\n\r\nimport { ITodoFieldsContent } from 'interfaces';\r\nimport { Id } from 'types';\r\nimport { getFormattedDate } from 'helpers';\r\nimport { useAppContext, useTooltipContext } from 'context';\r\nimport { firebaseDeleteTodo } from 'services/firebase-service';\r\nimport deleteIcon from 'assets/img/delete-icon.svg';\r\n\r\nimport './todo-item-content.css';\r\n\r\ninterface TodoItemContentProps {\r\n  fieldsContent: ITodoFieldsContent;\r\n  id: Id;\r\n}\r\n\r\nconst TodoItemContent: React.FC<TodoItemContentProps> = ({ fieldsContent, id }) => {\r\n  const { description, status, priority, endDatePlan, endDateActual } = fieldsContent;\r\n\r\n  const { currentUser } = useAppContext();\r\n  const { showTooltip } = useTooltipContext();\r\n\r\n  const classNames = 'table__item-cell';\r\n\r\n  return (\r\n    <>\r\n      <td className={classNames}>\r\n        <span className={`${classNames}--description`}>{description}</span>\r\n      </td>\r\n      <td className={classNames}>\r\n        <span className={`${classNames}--status`}>{status}</span>\r\n      </td>\r\n      <td className={classNames}>\r\n        <span className={`${classNames}--priority`}>{priority}</span>\r\n      </td>\r\n      <td className={classNames}>\r\n        <span className={`${classNames}--datePlan`}>\r\n          {getFormattedDate(new Date(endDatePlan), 'task')}\r\n        </span>\r\n      </td>\r\n      <td className={classNames}>\r\n        <span className={`${classNames}--actualDate`}>\r\n          {endDateActual == '-' ? endDateActual : getFormattedDate(new Date(endDateActual), 'task')}\r\n        </span>\r\n      </td>\r\n      <td className={classNames}>\r\n        <button\r\n          type=\"button\"\r\n          className=\"btn table__btn table__btn--del\"\r\n          onClick={() => firebaseDeleteTodo(id, currentUser, showTooltip)}\r\n        >\r\n          <img src={deleteIcon} className=\"delete-icon\" width=\"24\" height=\"24\" alt=\"Delete todo\" />\r\n        </button>\r\n      </td>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default TodoItemContent;\r\n","interface ITableHeaderConfig {\r\n  text: string;\r\n  class: string;\r\n}\r\n\r\nconst classTemplate = 'table__header--';\r\nconst tableHeadersConfig: ITableHeaderConfig[] = [\r\n  {\r\n    text: 'Description',\r\n    class: `${classTemplate}description`,\r\n  },\r\n  {\r\n    text: 'Status',\r\n    class: `${classTemplate}status`,\r\n  },\r\n  {\r\n    text: 'Priority',\r\n    class: `${classTemplate}priority`,\r\n  },\r\n  {\r\n    text: 'End date plan',\r\n    class: `${classTemplate}planDate`,\r\n  },\r\n  {\r\n    text: 'End date actual',\r\n    class: `${classTemplate}actualDate`,\r\n  },\r\n  {\r\n    text: 'Action',\r\n    class: `${classTemplate}action`,\r\n  },\r\n];\r\n\r\nexport default tableHeadersConfig;\r\n","import TodosTable from './todos-table';\r\nexport default TodosTable;\r\n","import React, { useMemo } from 'react';\r\n\r\nimport TodoItemContent from '../todo-item-content';\r\nimport tableHeadersConfig from './tableHeaderConfig';\r\nimport { ITodoItem, ITodosPageState } from 'interfaces';\r\nimport { Id, ToggleModalTypes } from 'types';\r\n\r\nimport './todos-table.css';\r\n\r\ninterface TodosTableProps {\r\n  todosPageState: ITodosPageState;\r\n  toggleModal: (type?: ToggleModalTypes) => void;\r\n  todosPageSetState: React.Dispatch<React.SetStateAction<ITodosPageState>>;\r\n}\r\n\r\nconst TodosTable: React.FC<TodosTableProps> = ({\r\n  todosPageState,\r\n  toggleModal,\r\n  todosPageSetState,\r\n}) => {\r\n  const tableHeaders: JSX.Element[] = tableHeadersConfig.map((item) => (\r\n    <th key={item.text} className={`table__header ${item.class}`} scope=\"col\">\r\n      {item.text}\r\n    </th>\r\n  ));\r\n\r\n  let visibleTodos: ITodoItem[] | undefined;\r\n  let tableRows: JSX.Element[] | undefined;\r\n\r\n  const { todosList, term, filter } = todosPageState;\r\n\r\n  if (todosList) {\r\n    const searchTodos = (items: ITodoItem[], term: string): ITodoItem[] =>\r\n      term.length === 0\r\n        ? items\r\n        : items.filter(\r\n            (item) => item.fieldsContent.description.toLowerCase().indexOf(term.toLowerCase()) > -1\r\n          );\r\n\r\n    const filterTodos = (items: ITodoItem[], filter: string): ITodoItem[] => {\r\n      switch (filter) {\r\n        case 'all':\r\n          return items;\r\n        case 'new':\r\n          return items.filter((item) => item.fieldsContent.status == 'New');\r\n        case 'inProgress':\r\n          return items.filter((item) => item.fieldsContent.status == 'In progress');\r\n        case 'done':\r\n          return items.filter((item) => item.fieldsContent.status == 'Done');\r\n\r\n        default:\r\n          return items;\r\n      }\r\n    };\r\n\r\n    // @todo Опять не учтена работа с большим количеством элементов. Reverse - не выход\r\n    visibleTodos = useMemo(\r\n      () => filterTodos(searchTodos(Object.values(todosList), term), filter).reverse(),\r\n      [todosList, term, filter]\r\n    );\r\n\r\n    const selectItem = (id: Id): void => {\r\n      todosPageSetState((prevState) => {\r\n        return {\r\n          ...prevState,\r\n          selectedItemId: id,\r\n        };\r\n      });\r\n\r\n      toggleModal();\r\n    };\r\n\r\n    tableRows = visibleTodos.map((item: ITodoItem): JSX.Element => {\r\n      const { id, fieldsContent } = item;\r\n\r\n      const importantClass = fieldsContent.priority == 'High' ? 'table__item--important' : '';\r\n      const doneClass = fieldsContent.status == 'Done' ? 'table__item--done' : '';\r\n      const expiredClass =\r\n        fieldsContent.endDateActual != '-'\r\n          ? fieldsContent.endDateActual < fieldsContent.endDatePlan\r\n            ? ''\r\n            : 'table__item--expired'\r\n          : new Date().toISOString() > fieldsContent.endDatePlan\r\n          ? 'table__item--expired'\r\n          : '';\r\n\r\n      return (\r\n        <tr\r\n          className={`table__item ${doneClass} ${importantClass} ${expiredClass}`}\r\n          key={id}\r\n          onDoubleClick={() => selectItem(id)}\r\n        >\r\n          <TodoItemContent fieldsContent={fieldsContent} id={id} />\r\n        </tr>\r\n      );\r\n    });\r\n  }\r\n  return (\r\n    <>\r\n      <table className=\"table table--todo\">\r\n        <thead>\r\n          <tr className=\"table__headers table--todo__headers\">{tableHeaders}</tr>\r\n        </thead>\r\n        <tbody>{visibleTodos && tableRows}</tbody>\r\n      </table>\r\n      {!visibleTodos && <span>You can sleep soundly</span>}\r\n    </>\r\n  );\r\n};\r\nexport default TodosTable;\r\n","import Portal from \"./portal\";\r\nexport default Portal;\r\n","import React, { ReactNode, useEffect } from 'react';\r\nimport { createPortal } from 'react-dom';\r\n\r\nimport './portal.css';\r\n\r\ninterface PortalProps {\r\n  children: ReactNode;\r\n}\r\n\r\nconst Portal: React.FC<PortalProps> = ({ children }) => {\r\n  const el: HTMLDivElement = document.createElement('div');\r\n  el.classList.add('overlay');\r\n\r\n  useEffect(() => {\r\n    document.body.style.overflow = 'hidden';\r\n    // document.querySelector(\"#modal\").append(el);\r\n\r\n    const modalHtml: HTMLDivElement | null = document.querySelector('#modal');\r\n    if (modalHtml) {\r\n      modalHtml.append(el);\r\n    }\r\n\r\n    return () => {\r\n      el.remove();\r\n      document.body.style.overflow = 'visible';\r\n    };\r\n  }, [children]);\r\n\r\n  return createPortal(children, el);\r\n};\r\n\r\nexport default Portal;\r\n","import React from 'react';\r\nimport { Field, ErrorMessage } from 'formik';\r\n\r\nimport { ICustomInput } from '../../interfaces';\r\nimport { clsx } from 'helpers';\r\n\r\nimport './customInput.css';\r\n\r\nconst CustomInput: React.FC<ICustomInput> = ({\r\n  label,\r\n  labelClass,\r\n  isRequired,\r\n  fieldClass,\r\n  type,\r\n  fieldName,\r\n  placeholder,\r\n  isError,\r\n  isTouched,\r\n  as,\r\n  children,\r\n}) => (\r\n  <>\r\n    <label className={clsx([`label`, labelClass])} htmlFor={fieldName}>\r\n      {label}\r\n      {isRequired && <sup className=\"label-required\">*</sup>}:\r\n    </label>\r\n    <div className=\"field-with-error-wrapper\">\r\n      <Field\r\n        className={clsx([`field`, fieldClass, isError && isTouched && `field--error`])}\r\n        id={fieldName}\r\n        type={type}\r\n        name={fieldName}\r\n        placeholder={placeholder}\r\n        as={as}\r\n      >\r\n        {children}\r\n      </Field>\r\n\r\n      <ErrorMessage name={fieldName} component=\"span\" className=\"error-message\" />\r\n    </div>\r\n  </>\r\n);\r\n\r\nexport default CustomInput;\r\n","import TodosModalContent from './todos-modal-content';\r\nexport default TodosModalContent;\r\n","import React, { useState, useEffect, useMemo } from 'react';\r\nimport { Formik, Form } from 'formik';\r\n\r\nimport { useAppContext, useTooltipContext } from 'context';\r\nimport { ITodoFieldsContent, ITodoItem, ITodosPageState } from 'interfaces';\r\nimport { Id, ToggleModalTypes } from 'types';\r\nimport { getFormattedDate, getFormattedTimeOffset } from 'helpers';\r\nimport { todoFormValidationSchema } from 'validationSchemas';\r\nimport CustomInput from 'components/customInput';\r\nimport { firebaseAddTodo, firebaseEditTodo, firebaseGetTodoValue } from 'services/firebase-service';\r\n\r\nimport './todos-modal-content.css';\r\n\r\ninterface IPartOfFormikBag {\r\n  setSubmitting: (isSubmitting: boolean) => void;\r\n}\r\n\r\ninterface ITodosModalProps {\r\n  selectedItemId: Id | null;\r\n  newItemId: Id;\r\n  onToggleModal: (type?: ToggleModalTypes) => void;\r\n  setState: React.Dispatch<React.SetStateAction<ITodosPageState>>;\r\n}\r\n\r\nconst TodosModalContent: React.FC<ITodosModalProps> = ({\r\n  selectedItemId,\r\n  newItemId,\r\n  onToggleModal,\r\n  setState,\r\n}) => {\r\n  const { currentUser } = useAppContext();\r\n  const { showTooltip } = useTooltipContext();\r\n\r\n  const [initialState, setInitialState] = useState<ITodoFieldsContent>({\r\n    description: '',\r\n    priority: 'Low',\r\n    status: 'New',\r\n    endDatePlan: '',\r\n    endDateActual: '-',\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (selectedItemId) {\r\n      firebaseGetTodoValue(currentUser, selectedItemId, setInitialState, showTooltip);\r\n    }\r\n  }, []);\r\n\r\n  const createCustomInput = (\r\n    label: string,\r\n    isRequired: boolean,\r\n    type: string | undefined,\r\n    fieldName: string,\r\n    placeholder: string | undefined,\r\n    errors: any,\r\n    touched: any,\r\n    as: any,\r\n    children?: React.ReactNode\r\n  ) => (\r\n    <div className=\"todos-form__field-wrapper\">\r\n      <CustomInput\r\n        label={label}\r\n        labelClass=\"todos-form__label\"\r\n        isRequired={isRequired}\r\n        fieldClass=\"todos-form__field\"\r\n        type={type}\r\n        fieldName={fieldName}\r\n        placeholder={placeholder}\r\n        isError={fieldName in errors}\r\n        isTouched={fieldName in touched}\r\n        as={as}\r\n        children={children}\r\n      />\r\n    </div>\r\n  );\r\n\r\n  const addTodo = (fieldsContent: ITodoFieldsContent): void => {\r\n    const newItem: ITodoItem = {\r\n      fieldsContent,\r\n      id: newItemId,\r\n    };\r\n\r\n    firebaseAddTodo(currentUser, newItem, showTooltip);\r\n  };\r\n\r\n  const editTodo = (fieldsContent: ITodoFieldsContent): void => {\r\n    firebaseEditTodo(currentUser, selectedItemId, fieldsContent, showTooltip);\r\n    // @todo Сетать нужно когда взаимодействие с firebase успешно завершится\r\n    setState(({ selectedItemId, ...restParams }) => ({\r\n      selectedItemId: null,\r\n      ...restParams,\r\n    }));\r\n  };\r\n\r\n  const handleSubmit = (\r\n    values: Omit<ITodoFieldsContent, 'endDateActual'>,\r\n    { setSubmitting }: IPartOfFormikBag\r\n  ) => {\r\n    // Пример даты, которая хранится в values.endDatePlan 2021-09-10\r\n    // Формат ниже нужен, чтобы задача считалась просроченной только тогда, когда у нас наступит 00:00 дня, следующего за тем, который мы обозначили в endDatePlan\r\n    const endDatePlan = new Date(\r\n      `${values.endDatePlan}T23:59:59.000${getFormattedTimeOffset()}:00`\r\n    ).toISOString();\r\n\r\n    const endDateActual =\r\n      values.status == 'Done' && initialState.endDateActual === '-'\r\n        ? new Date().toISOString()\r\n        : initialState.endDateActual;\r\n\r\n    const todo = {\r\n      ...values,\r\n      endDatePlan,\r\n      endDateActual,\r\n    };\r\n    if (selectedItemId) {\r\n      editTodo(todo);\r\n    } else {\r\n      addTodo(todo);\r\n    }\r\n\r\n    // @todo По идее, нужно выполнять действия снизу только когда взаимодействие с firebase из addTodo и editTodo успешно завершится\r\n    // Пока не сделаю todo выше, setSubmitting не нужен\r\n    // setSubmitting(false);\r\n\r\n    onToggleModal();\r\n  };\r\n\r\n  return (\r\n    <Formik\r\n      initialValues={{\r\n        description: initialState.description,\r\n        priority: initialState.priority,\r\n        status: initialState.status,\r\n        endDatePlan: initialState.endDatePlan\r\n          ? getFormattedDate(new Date(initialState.endDatePlan), 'calendar')\r\n          : initialState.endDatePlan,\r\n      }}\r\n      enableReinitialize={true}\r\n      validationSchema={todoFormValidationSchema}\r\n      onSubmit={handleSubmit}\r\n    >\r\n      {({ isSubmitting, errors, touched }) => (\r\n        <Form className=\"todos-form\">\r\n          {useMemo(\r\n            () =>\r\n              createCustomInput(\r\n                `Description`,\r\n                true,\r\n                `text`,\r\n                `description`,\r\n                `What must be to do?`,\r\n                errors,\r\n                touched,\r\n                undefined\r\n              ),\r\n            [errors, touched]\r\n          )}\r\n          <div className=\"todos-form__fields-group-wrapper\">\r\n            {useMemo(\r\n              () =>\r\n                createCustomInput(\r\n                  `Priority`,\r\n                  true,\r\n                  undefined,\r\n                  `priority`,\r\n                  undefined,\r\n                  errors,\r\n                  touched,\r\n                  `select`,\r\n                  [\r\n                    <option key=\"Low\" value=\"Low\">\r\n                      Low\r\n                    </option>,\r\n                    <option key=\"Medium\" value=\"Medium\">\r\n                      Medium\r\n                    </option>,\r\n                    <option key=\"High\" value=\"High\">\r\n                      High\r\n                    </option>,\r\n                  ]\r\n                ),\r\n              [errors, touched]\r\n            )}\r\n            {useMemo(\r\n              () =>\r\n                createCustomInput(\r\n                  `Status`,\r\n                  true,\r\n                  undefined,\r\n                  `status`,\r\n                  undefined,\r\n                  errors,\r\n                  touched,\r\n                  `select`,\r\n                  [\r\n                    <option key=\"New\" value=\"New\">\r\n                      New\r\n                    </option>,\r\n                    <option key=\"In progress\" value=\"In progress\">\r\n                      In progress\r\n                    </option>,\r\n                    <option key=\"Done\" value=\"Done\">\r\n                      Done\r\n                    </option>,\r\n                  ]\r\n                ),\r\n              [errors, touched]\r\n            )}\r\n          </div>\r\n\r\n          {/* @todo Эта проверка была раньше на календаре. Нужно перенести ее на кастомный календарь\r\n          min={getFormattedDate(new Date(), 'calendar')}\r\n           */}\r\n          {useMemo(\r\n            () =>\r\n              createCustomInput(\r\n                `End Date`,\r\n                true,\r\n                `date`,\r\n                `endDatePlan`,\r\n                undefined,\r\n                errors,\r\n                touched,\r\n                undefined\r\n              ),\r\n            [errors, touched]\r\n          )}\r\n\r\n          <button className=\"todos-form__submit-btn\" type=\"submit\" disabled={isSubmitting}>\r\n            Save\r\n          </button>\r\n        </Form>\r\n      )}\r\n    </Formik>\r\n  );\r\n};\r\n\r\nexport default TodosModalContent;\r\n","import SearchPanel from \"./search-panel\";\r\nexport default SearchPanel;\r\n","import React, { useState } from 'react';\r\n\r\nimport { ITodosPageState } from '../../../../interfaces';\r\n\r\nimport './search-panel.css';\r\n\r\ninterface SearchPanelProps {\r\n  setState: React.Dispatch<React.SetStateAction<ITodosPageState>>;\r\n}\r\n\r\nconst SearchPanel: React.FC<SearchPanelProps> = ({ setState }) => {\r\n  const [term, setTerm] = useState('');\r\n\r\n  const onSearchReplace = (evt: React.ChangeEvent<HTMLInputElement>) => {\r\n    const changedTerm = evt.target.value;\r\n    setTerm(changedTerm);\r\n\r\n    setState((prevState) => ({ ...prevState, term: changedTerm }));\r\n  };\r\n\r\n  return (\r\n    <input\r\n      type=\"text\"\r\n      placeholder=\"Search by description\"\r\n      className=\"search-input\"\r\n      value={term}\r\n      onChange={onSearchReplace}\r\n    />\r\n  );\r\n};\r\nexport default SearchPanel;\r\n","import StatusFilter from \"./status-filter\";\r\nexport default StatusFilter;\r\n","import React from 'react';\r\n\r\nimport { ITodosList, ITodosPageState } from '../../../../interfaces';\r\n\r\nimport './status-filter.css';\r\n\r\ninterface IBtnProps {\r\n  name: string;\r\n  label: string;\r\n  todosCount?: number;\r\n}\r\n\r\ninterface StatusFilterProps {\r\n  todosList: ITodosList;\r\n  filter: string;\r\n  setState: React.Dispatch<React.SetStateAction<ITodosPageState>>;\r\n}\r\n\r\nconst StatusFilter: React.FC<StatusFilterProps> = ({ todosList, filter, setState }) => {\r\n  // @todo пагинация и большое количество items не предусмотрены\r\n  const todos = Object.values(todosList);\r\n  const getTodosLengthWithStatusFilter = (status: 'New' | 'In progress' | 'Done') =>\r\n    todos.filter((item) => item.fieldsContent.status == status).length;\r\n\r\n  const btnProps: IBtnProps[] = [\r\n    {\r\n      name: 'inProgress',\r\n      label: 'In progress',\r\n      todosCount: getTodosLengthWithStatusFilter('In progress'),\r\n    },\r\n    { name: 'new', label: 'New', todosCount: getTodosLengthWithStatusFilter('New') },\r\n    { name: 'done', label: 'Done', todosCount: getTodosLengthWithStatusFilter('Done') },\r\n    { name: 'all', label: 'All', todosCount: todos.length },\r\n  ];\r\n\r\n  const onFilterChange = (filter: string): void =>\r\n    setState((prevState) => ({\r\n      ...prevState,\r\n      filter,\r\n    }));\r\n\r\n  const buttons: JSX.Element[] = btnProps.map(({ name, label, todosCount }) => {\r\n    const isActive = filter === name;\r\n    const clazz = isActive ? 'status-filter__btn--active' : '';\r\n    return (\r\n      <button\r\n        type=\"button\"\r\n        className={`status-filter__btn btn ${clazz}`}\r\n        key={name}\r\n        onClick={() => onFilterChange(name)}\r\n      >\r\n        {`${label} - ${todosCount}`}\r\n      </button>\r\n    );\r\n  });\r\n\r\n  return <div className=\"status-filter\">{buttons}</div>;\r\n};\r\n\r\nexport default StatusFilter;\r\n","import React from 'react';\r\n\r\nimport { ITodosList, ITodosPageState } from 'interfaces';\r\nimport SearchPanel from '../search-panel';\r\nimport StatusFilter from '../status-filter';\r\n\r\nimport './todos-control-panel.css';\r\n\r\ninterface TodosControlPanelProps {\r\n  todosList: ITodosList | null;\r\n  filter: string;\r\n  onToggleModal: (evt?: any) => void;\r\n  setState: React.Dispatch<React.SetStateAction<ITodosPageState>>;\r\n}\r\n\r\nconst TodosControlPanel: React.FC<TodosControlPanelProps> = ({\r\n  todosList,\r\n  filter,\r\n  onToggleModal,\r\n  setState,\r\n}) => (\r\n  <div className={`todos-page__control-panel ${!todosList ? 'flex-wrapper' : ``}`}>\r\n    <button className=\"todos-page__add-task-btn\" onClick={onToggleModal}>\r\n      Add task\r\n    </button>\r\n    {todosList && (\r\n      <>\r\n        <SearchPanel setState={setState} />\r\n        <StatusFilter todosList={todosList} filter={filter} setState={setState} />\r\n      </>\r\n    )}\r\n  </div>\r\n);\r\nexport default TodosControlPanel;\r\n","import Modal from './modal';\r\nexport default Modal;\r\n","import React, { ReactNode } from 'react';\r\nimport './modal.css';\r\n\r\ninterface IModal {\r\n  classes: string;\r\n  title: string;\r\n  onCloseBtnClick?: (evt: any) => void;\r\n  children: ReactNode;\r\n}\r\n\r\nconst Modal: React.FC<IModal> = ({ classes, title, onCloseBtnClick, children }) => (\r\n  <section className={`modal ${classes}`}>\r\n    <h2 className=\"modal__title\">{title}</h2>\r\n    {onCloseBtnClick && (\r\n      <button className=\"modal__close\" onClick={onCloseBtnClick}>\r\n        <span className=\"visually-hidden\">Закрыть</span>\r\n      </button>\r\n    )}\r\n    {children}\r\n  </section>\r\n);\r\n\r\nexport default Modal;\r\n","import React, { useState, useEffect } from 'react';\r\n\r\nimport PageTitle from 'components/page-title';\r\nimport TodosTable from './components/todos-table';\r\nimport Portal from 'components/portal';\r\nimport TodosModalContent from './components/todos-modal-content';\r\nimport TodosControlPanel from './components/todos-control-panel';\r\nimport Modal from 'components/modal';\r\nimport { useAppContext, useTooltipContext } from 'context';\r\nimport { ITodosPageState } from 'interfaces';\r\nimport { Id, ToggleModalTypes } from 'types';\r\nimport { firebaseConnectDisconnectTodoList } from 'services/firebase-service';\r\n\r\nconst TodosPage: React.FC = () => {\r\n  const { currentUser } = useAppContext();\r\n  const { showTooltip } = useTooltipContext();\r\n\r\n  const [state, setState] = useState<ITodosPageState>({\r\n    term: '',\r\n    filter: 'inProgress',\r\n    showModal: false,\r\n    selectedItemId: null,\r\n    isDataLoaded: false,\r\n    todosList: null,\r\n    lastTodoId: null,\r\n  });\r\n\r\n  useEffect(() => {\r\n    firebaseConnectDisconnectTodoList('connect', currentUser, showTooltip, setState);\r\n\r\n    return () => {\r\n      firebaseConnectDisconnectTodoList('disconnect', currentUser, showTooltip, setState);\r\n    };\r\n  }, []);\r\n\r\n  let newItemId: Id = state.lastTodoId ? state.lastTodoId + 1 : 100;\r\n\r\n  const toggleModal = (type: ToggleModalTypes = ToggleModalTypes.Default): void => {\r\n    setState(({ showModal, selectedItemId, ...restParams }) => ({\r\n      ...restParams,\r\n      showModal: !showModal,\r\n      selectedItemId: type === ToggleModalTypes.WithSelectedItemClearing ? null : selectedItemId,\r\n    }));\r\n  };\r\n\r\n  const { todosList, filter, showModal, selectedItemId } = state;\r\n\r\n  return (\r\n    <main className=\"todos-page\">\r\n      <div className=\"container\">\r\n        <PageTitle text=\"Todo List\" />\r\n        {state.isDataLoaded ? (\r\n          <>\r\n            <TodosControlPanel\r\n              todosList={todosList}\r\n              filter={filter}\r\n              onToggleModal={() => toggleModal()}\r\n              setState={setState}\r\n            />\r\n\r\n            <TodosTable\r\n              todosPageState={state}\r\n              toggleModal={toggleModal}\r\n              todosPageSetState={setState}\r\n            />\r\n\r\n            {showModal && (\r\n              <Portal>\r\n                <Modal\r\n                  classes=\"modal--todos\"\r\n                  title={selectedItemId ? 'Edit task' : 'Add task'}\r\n                  onCloseBtnClick={() => toggleModal(ToggleModalTypes.WithSelectedItemClearing)}\r\n                >\r\n                  <TodosModalContent\r\n                    newItemId={newItemId}\r\n                    onToggleModal={toggleModal}\r\n                    selectedItemId={selectedItemId}\r\n                    setState={setState}\r\n                  />\r\n                </Modal>\r\n              </Portal>\r\n            )}\r\n          </>\r\n        ) : (\r\n          <span>Loading...</span>\r\n        )}\r\n      </div>\r\n    </main>\r\n  );\r\n};\r\n\r\nexport default TodosPage;\r\n","import NoteItemContent from './note-item-content';\r\nexport default NoteItemContent;\r\n","import React from 'react';\r\n\r\nimport { firebaseDeleteNote } from 'services/firebase-service';\r\nimport { getFormattedDate } from 'helpers';\r\nimport { useAppContext, useTooltipContext } from 'context';\r\nimport deleteIcon from 'assets/img/delete-icon.svg';\r\nimport { INoteItem } from 'interfaces';\r\n\r\nimport './note-item-content.css';\r\n\r\ninterface NoteItemContentProps {\r\n  note: INoteItem;\r\n}\r\n\r\nconst NoteItemContent: React.FC<NoteItemContentProps> = ({ note }) => {\r\n  const { currentUser } = useAppContext();\r\n  const { showTooltip } = useTooltipContext();\r\n\r\n  return (\r\n    <>\r\n      <div className=\"note__header\">\r\n        <span>{getFormattedDate(new Date(note.creationDate), 'note')}</span>\r\n        <button\r\n          type=\"button\"\r\n          className=\"btn note__btn note__btn--del\"\r\n          onClick={() => firebaseDeleteNote(note.id, currentUser, showTooltip)}\r\n        >\r\n          <img src={deleteIcon} className=\"delete-icon\" width=\"24\" height=\"24\" alt=\"Delete note\" />\r\n        </button>\r\n      </div>\r\n      <p className=\"note__description\">{note.description}</p>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default NoteItemContent;\r\n","import NotesList from './notes-list';\r\nexport default NotesList;\r\n","import React, { useMemo } from 'react';\r\nimport { TransitionGroup, CSSTransition } from 'react-transition-group';\r\n\r\nimport NoteItemContent from '../note-item-content';\r\nimport { INoteItem, INoteList, INotesPageState } from 'interfaces';\r\nimport { Id, ToggleModalTypes } from 'types';\r\nimport './notes-list.css';\r\n\r\ninterface NotesListProps {\r\n  notes: INoteList | null;\r\n  notesPageSetState: React.Dispatch<React.SetStateAction<INotesPageState>>;\r\n  toggleModal: (type?: ToggleModalTypes) => void;\r\n}\r\n\r\nconst NotesList: React.FC<NotesListProps> = ({ notes, notesPageSetState, toggleModal }) => {\r\n  let visibleNotes: INoteItem[] | undefined;\r\n  let noteList: JSX.Element[] | undefined;\r\n\r\n  if (notes) {\r\n    // @todo Опять не учтена работа с большим количеством элементов. Reverse - не выход\r\n    visibleNotes = useMemo(() => Object.values(notes).reverse().reverse(), [notes]);\r\n\r\n    const selectItem = (id: Id): void => {\r\n      notesPageSetState((prevState) => ({\r\n        ...prevState,\r\n        selectedItemId: id,\r\n      }));\r\n\r\n      toggleModal();\r\n    };\r\n\r\n    noteList = visibleNotes.map((item): JSX.Element => {\r\n      const { id } = item;\r\n\r\n      return (\r\n        <CSSTransition key={id} timeout={500} classNames=\"list__item\">\r\n          <li className=\"list__item\" onDoubleClick={() => selectItem(id)}>\r\n            <NoteItemContent note={item} />\r\n          </li>\r\n        </CSSTransition>\r\n      );\r\n    });\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <ul className=\"list list--notes\">\r\n        <TransitionGroup component={null}>{noteList}</TransitionGroup>\r\n      </ul>\r\n      {!visibleNotes && <span>You can sleep soundly</span>}\r\n    </>\r\n  );\r\n};\r\nexport default NotesList;\r\n","import NotesModalContent from './notes-modal-content';\r\nexport default NotesModalContent;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { Form, Formik } from 'formik';\r\n\r\nimport CustomInput from 'components/customInput';\r\nimport { useAppContext, useTooltipContext } from 'context';\r\nimport { firebaseAddNote, firebaseEditNote, firebaseGetNoteValue } from 'services/firebase-service';\r\nimport { INoteItem, INotesPageState } from 'interfaces';\r\nimport { Id, ToggleModalTypes } from 'types';\r\nimport { noteFormValidationSchema } from 'validationSchemas';\r\n\r\nimport './notes-modal-content.css';\r\n\r\ninterface IPartOfFormikBag {\r\n  setSubmitting: (isSubmitting: boolean) => void;\r\n}\r\n\r\ninterface NotesModalProps {\r\n  selectedItemId: Id | null;\r\n  newItemId: Id;\r\n  onToggleModal: (type?: ToggleModalTypes) => void;\r\n  setNotesPageState: React.Dispatch<React.SetStateAction<INotesPageState>>;\r\n}\r\n\r\nconst NotesModalContent: React.FC<NotesModalProps> = ({\r\n  selectedItemId,\r\n  newItemId,\r\n  onToggleModal,\r\n  setNotesPageState,\r\n}) => {\r\n  const { currentUser } = useAppContext();\r\n  const { showTooltip } = useTooltipContext();\r\n  const [initialDescription, setInitialDescription] = useState('');\r\n\r\n  useEffect(() => {\r\n    if (selectedItemId) {\r\n      firebaseGetNoteValue(currentUser, selectedItemId, setInitialDescription, showTooltip);\r\n    }\r\n  }, []);\r\n\r\n  const addNote = (description: string): void => {\r\n    const newNote: INoteItem = {\r\n      description,\r\n      creationDate: new Date().toISOString(),\r\n      id: newItemId,\r\n    };\r\n\r\n    firebaseAddNote(currentUser, newNote, showTooltip);\r\n  };\r\n\r\n  const editNote = (description: string): void => {\r\n    firebaseEditNote(currentUser, selectedItemId, description, showTooltip);\r\n    // @todo Сетать нужно когда взаимодействие с firebase успешно завершится\r\n    setNotesPageState(({ selectedItemId, ...restParams }) => ({\r\n      selectedItemId: null,\r\n      ...restParams,\r\n    }));\r\n  };\r\n\r\n  const handleSubmit = (values: { description: string }, { setSubmitting }: IPartOfFormikBag) => {\r\n    if (selectedItemId) {\r\n      editNote(values.description);\r\n    } else {\r\n      addNote(values.description);\r\n    }\r\n\r\n    // @todo По идее, нужно выполнять действия снизу только когда взаимодействие с firebase из addNote и editNote успешно завершится\r\n    // Пока не сделаю todo выше, setSubmitting не нужен\r\n    // setSubmitting(false);\r\n\r\n    onToggleModal();\r\n  };\r\n\r\n  return (\r\n    <Formik\r\n      initialValues={{\r\n        description: initialDescription,\r\n      }}\r\n      enableReinitialize={true}\r\n      validationSchema={noteFormValidationSchema}\r\n      onSubmit={handleSubmit}\r\n    >\r\n      {({ isSubmitting, errors, touched }) => (\r\n        <Form className=\"notes-form\">\r\n          <CustomInput\r\n            label={'Description'}\r\n            labelClass=\"notes-form__label\"\r\n            isRequired={true}\r\n            fieldClass=\"notes-form__field notes-form__field--description\"\r\n            type={undefined}\r\n            fieldName={'description'}\r\n            placeholder={'Type something :)'}\r\n            isError={'description' in errors}\r\n            isTouched={'description' in touched}\r\n            as={'textarea'}\r\n            children={undefined}\r\n          />\r\n\r\n          <button className=\"notes-form__submit-btn\" type=\"submit\" disabled={isSubmitting}>\r\n            Save\r\n          </button>\r\n        </Form>\r\n      )}\r\n    </Formik>\r\n  );\r\n};\r\n\r\nexport default NotesModalContent;\r\n","import React, { useState, useEffect } from 'react';\r\n\r\nimport PageTitle from 'components/page-title';\r\nimport NotesList from './components/notes-list';\r\nimport Portal from 'components/portal';\r\nimport NotesModalContent from './components/notes-modal-content';\r\nimport Modal from 'components/modal';\r\nimport { useAppContext, useTooltipContext } from 'context';\r\nimport { INotesPageState } from 'interfaces';\r\nimport { Id, ToggleModalTypes } from 'types';\r\nimport { firebaseConnectDisconnectNoteList } from 'services/firebase-service';\r\n\r\nimport './index.css';\r\n\r\nconst NotesPage: React.FC = () => {\r\n  const { currentUser } = useAppContext();\r\n  const { showTooltip } = useTooltipContext();\r\n  const [state, setState] = useState<INotesPageState>({\r\n    showModal: false,\r\n    selectedItemId: null,\r\n    isDataLoaded: false,\r\n    noteList: null,\r\n    lastNoteId: null,\r\n  });\r\n\r\n  useEffect(() => {\r\n    firebaseConnectDisconnectNoteList('connect', currentUser, showTooltip, setState);\r\n\r\n    return () => {\r\n      firebaseConnectDisconnectNoteList('disconnect', currentUser, showTooltip, setState);\r\n    };\r\n  }, []);\r\n\r\n  // Заменить потом на uuid\r\n  let newItemId: Id = state.lastNoteId ? state.lastNoteId + 1 : 100;\r\n  const toggleModal = (type: ToggleModalTypes = ToggleModalTypes.Default): void => {\r\n    setState(({ showModal, selectedItemId, ...restParams }) => ({\r\n      ...restParams,\r\n      showModal: !showModal,\r\n      selectedItemId: type === ToggleModalTypes.WithSelectedItemClearing ? null : selectedItemId,\r\n    }));\r\n  };\r\n\r\n  const { noteList, showModal, selectedItemId } = state;\r\n\r\n  return (\r\n    <main className=\"notes-page\">\r\n      <div className=\"container\">\r\n        <PageTitle text=\"Notes\" />\r\n        {state.isDataLoaded ? (\r\n          <>\r\n            <button className=\"notes-page__add-note-btn\" onClick={() => toggleModal()}>\r\n              Add note\r\n            </button>\r\n            <NotesList notes={noteList} notesPageSetState={setState} toggleModal={toggleModal} />\r\n            {showModal && (\r\n              <Portal>\r\n                <Modal\r\n                  classes=\"modal--notes\"\r\n                  title={selectedItemId ? 'Edit note' : 'Add note'}\r\n                  onCloseBtnClick={() => toggleModal(ToggleModalTypes.WithSelectedItemClearing)}\r\n                >\r\n                  <NotesModalContent\r\n                    newItemId={newItemId}\r\n                    onToggleModal={toggleModal}\r\n                    selectedItemId={selectedItemId}\r\n                    setNotesPageState={setState}\r\n                  />\r\n                </Modal>\r\n              </Portal>\r\n            )}\r\n          </>\r\n        ) : (\r\n          <span>Loading...</span>\r\n        )}\r\n      </div>\r\n    </main>\r\n  );\r\n};\r\n\r\nexport default NotesPage;\r\n","import RequiredMark from './required-mark';\r\nexport default RequiredMark;\r\n","import React from 'react';\r\nimport './required-mark.css';\r\n\r\nconst RequiredMark = (): JSX.Element => <sup className=\"required-mark\">*</sup>;\r\nexport default RequiredMark;\r\n","import ChangeEmailModalContent from './change-email-modal-content';\r\nexport default ChangeEmailModalContent;\r\n","import React, { useState } from 'react';\r\nimport firebase from 'firebase/app';\r\n\r\nimport { useTooltipContext } from '../../../../context';\r\nimport RequiredMark from '../../../../components/required-mark';\r\nimport { TooltipTypes } from '../../../../types';\r\nimport './change-email-modal-content.css';\r\n\r\ninterface ChangeEmailModalProps {\r\n  onToggleModal: (evt: any) => void;\r\n  user: any;\r\n  actionCodeSettings: any;\r\n}\r\ninterface IConfirmCredentials {\r\n  oldEmail: string;\r\n  password: string;\r\n}\r\n\r\nconst ChangeEmailModalContent: React.FC<ChangeEmailModalProps> = ({\r\n  onToggleModal,\r\n  user,\r\n  actionCodeSettings,\r\n}) => {\r\n  const { showTooltip } = useTooltipContext();\r\n\r\n  const [credentials, setCredentials] = useState<IConfirmCredentials>({\r\n    oldEmail: user.email,\r\n    password: '',\r\n  });\r\n  const [email, setEmail] = useState('');\r\n  const [isFirstModal, setIsFirstModal] = useState(true);\r\n\r\n  const onCredentialsChange = (evt: React.ChangeEvent<HTMLInputElement>) => {\r\n    const id: string = evt.target.id;\r\n    const value: string = evt.target.value;\r\n\r\n    setCredentials((prevState) => {\r\n      return {\r\n        ...prevState,\r\n        [id]: value,\r\n      };\r\n    });\r\n  };\r\n\r\n  const onEmailChange = (evt: React.ChangeEvent<HTMLInputElement>) => {\r\n    setEmail(evt.target.value);\r\n  };\r\n\r\n  const onConfirmCredentials = (evt: React.FormEvent<HTMLFormElement>): void => {\r\n    evt.preventDefault();\r\n    const { oldEmail, password } = credentials;\r\n\r\n    const credential = firebase.auth.EmailAuthProvider.credential(oldEmail, password);\r\n\r\n    user\r\n      .reauthenticateWithCredential(credential)\r\n      .then(() => {\r\n        setIsFirstModal(false);\r\n      })\r\n      .catch((error: any) => {\r\n        showTooltip(TooltipTypes.Error, `Reauth didn't pass: ${error.message}`);\r\n      });\r\n  };\r\n  const onSetNewEmail = (evt: React.FormEvent<HTMLFormElement>): void => {\r\n    evt.preventDefault();\r\n\r\n    user\r\n      .verifyBeforeUpdateEmail(email, actionCodeSettings)\r\n      .then(() => {\r\n        showTooltip(\r\n          TooltipTypes.Info,\r\n          'Check your new email and confirm it to finish the change the email'\r\n        );\r\n        onToggleModal(evt);\r\n      })\r\n      .catch(function (err: any) {\r\n        showTooltip(TooltipTypes.Error, `Your email didn't update: ${err.message}`);\r\n      });\r\n  };\r\n\r\n  return (\r\n    <form\r\n      className=\"change-email-form\"\r\n      onSubmit={isFirstModal ? onConfirmCredentials : onSetNewEmail}\r\n    >\r\n      {isFirstModal ? (\r\n        <>\r\n          <div className=\"change-email-form__field-wrapper\">\r\n            <label className=\"change-email-form__label\" htmlFor=\"oldEmail\">\r\n              Old email\r\n              <RequiredMark />:\r\n            </label>\r\n            <input\r\n              className=\"change-email-form__field\"\r\n              id=\"oldEmail\"\r\n              type=\"email\"\r\n              placeholder=\"Enter you old email\"\r\n              onChange={onCredentialsChange}\r\n              value={credentials.oldEmail}\r\n              required\r\n            />\r\n          </div>\r\n          <div className=\"change-email-form__field-wrapper\">\r\n            <label className=\"change-email-form__label\" htmlFor=\"password\">\r\n              Password\r\n              <RequiredMark />:\r\n            </label>\r\n            <input\r\n              className=\"change-email-form__field\"\r\n              id=\"password\"\r\n              type=\"password\"\r\n              placeholder=\"Enter you password\"\r\n              onChange={onCredentialsChange}\r\n              value={credentials.password}\r\n              required\r\n            />\r\n          </div>\r\n        </>\r\n      ) : (\r\n        <div className=\"change-email-form__field-wrapper\">\r\n          <label className=\"change-email-form__label\" htmlFor=\"newEmail\">\r\n            New email\r\n            <RequiredMark />:\r\n          </label>\r\n          <input\r\n            className=\"change-email-form__field\"\r\n            id=\"newEmail\"\r\n            type=\"email\"\r\n            placeholder=\"Enter the new email\"\r\n            onChange={onEmailChange}\r\n            value={email}\r\n            required\r\n          />\r\n        </div>\r\n      )}\r\n\r\n      <button className=\"change-email-form__submit-btn\">\r\n        {isFirstModal ? 'Continue' : 'Save'}\r\n      </button>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default ChangeEmailModalContent;\r\n","import ChangePasswordModalContent from './change-password-modal-content';\r\nexport default ChangePasswordModalContent;\r\n","import React, { useState, useEffect } from 'react';\r\nimport firebase from 'firebase/app';\r\n\r\nimport { useTooltipContext } from '../../../../context';\r\nimport RequiredMark from '../../../../components/required-mark';\r\nimport { TooltipTypes } from '../../../../types';\r\nimport './change-password-modal-content.css';\r\n\r\ninterface ChangePasswordModalProps {\r\n  onToggleModal: (evt: any) => void;\r\n  user: any;\r\n}\r\ninterface IConfirmCredentials {\r\n  email: string;\r\n  oldPassword: string;\r\n}\r\n\r\nconst ChangePasswordModalContent: React.FC<ChangePasswordModalProps> = ({\r\n  onToggleModal,\r\n  user,\r\n}) => {\r\n  const { showTooltip } = useTooltipContext();\r\n\r\n  const [credentials, setCredentials] = useState<IConfirmCredentials>({\r\n    email: user.email,\r\n    oldPassword: '',\r\n  });\r\n  const [isFirstModal, setIsFirstModal] = useState(true);\r\n  const [password, setPassword] = useState('');\r\n\r\n  const onCredentialsChange = (evt: React.ChangeEvent<HTMLInputElement>) => {\r\n    const id: string = evt.target.id;\r\n    const value: string = evt.target.value;\r\n\r\n    setCredentials((prevState) => {\r\n      return {\r\n        ...prevState,\r\n        [id]: value,\r\n      };\r\n    });\r\n  };\r\n\r\n  const onPasswordChange = (evt: React.ChangeEvent<HTMLInputElement>) => {\r\n    setPassword(evt.target.value);\r\n  };\r\n\r\n  const onConfirmCredentials = (evt: React.FormEvent<HTMLFormElement>): void => {\r\n    evt.preventDefault();\r\n    const { email, oldPassword } = credentials;\r\n\r\n    const credential = firebase.auth.EmailAuthProvider.credential(email, oldPassword);\r\n\r\n    user\r\n      .reauthenticateWithCredential(credential)\r\n      .then(() => {\r\n        setIsFirstModal(false);\r\n      })\r\n      .catch((error: any) => {\r\n        showTooltip(TooltipTypes.Error, `Reauth didn't pass: ${error.message}`);\r\n      });\r\n  };\r\n\r\n  const onSetNewPassword = (evt: React.FormEvent<HTMLFormElement>): void => {\r\n    evt.preventDefault();\r\n    // @todo Вылозит предупреждение от гугл, что в результате утечки даннных, пароль оказался раскрыт. Скорее всего связано с отсутствием шифрования с моей стороны\r\n    user\r\n      .updatePassword(password)\r\n      .then(() => {\r\n        showTooltip(TooltipTypes.Success, 'Your password was successfully updated!');\r\n        onToggleModal(evt);\r\n      })\r\n      .catch((err: any) => {\r\n        showTooltip(TooltipTypes.Error, `Your password didn't be update: ${err.message}`);\r\n      });\r\n  };\r\n\r\n  return (\r\n    <form\r\n      className=\"change-password-form\"\r\n      onSubmit={isFirstModal ? onConfirmCredentials : onSetNewPassword}\r\n    >\r\n      {isFirstModal ? (\r\n        <>\r\n          <div className=\"change-password-form__field-wrapper\">\r\n            <label className=\"change-password-form__label\" htmlFor=\"email\">\r\n              Email\r\n              <RequiredMark />:\r\n            </label>\r\n            <input\r\n              className=\"change-password-form__field change-password-form__email-field\"\r\n              id=\"email\"\r\n              type=\"email\"\r\n              placeholder=\"Enter you email\"\r\n              onChange={onCredentialsChange}\r\n              value={credentials.email}\r\n              required\r\n            />\r\n          </div>\r\n\r\n          <div className=\"change-password-form__field-wrapper\">\r\n            <label className=\"change-password-form__label\" htmlFor=\"oldPassword\">\r\n              Old password\r\n              <RequiredMark />:\r\n            </label>\r\n            <input\r\n              className=\"change-password-form__field change-password-form__old-password-field\"\r\n              id=\"oldPassword\"\r\n              type=\"password\"\r\n              placeholder=\"Enter you old password\"\r\n              onChange={onCredentialsChange}\r\n              value={credentials.oldPassword}\r\n              required\r\n            />\r\n          </div>\r\n        </>\r\n      ) : (\r\n        <>\r\n          <div className=\"change-password-form__field-wrapper\">\r\n            <label className=\"change-password-form__label\" htmlFor=\"newPassword\">\r\n              New password\r\n              <RequiredMark />:\r\n            </label>\r\n            <input\r\n              className=\"change-password-form__field change-password-form__new-password-field\"\r\n              id=\"newPassword\"\r\n              type=\"password\"\r\n              placeholder=\"Enter a new password\"\r\n              onChange={onPasswordChange}\r\n              value={password}\r\n              required\r\n            />\r\n          </div>\r\n\r\n          {/* @todo можно реализовать генерацию рандомного пароля\r\n          <button className=\"change-password-form__generate-password\" onClick={onGeneratePassword}>\r\n            Generate password\r\n          </button> */}\r\n        </>\r\n      )}\r\n\r\n      <button className=\"change-password-form__submit-btn\">\r\n        {isFirstModal ? 'Continue' : 'Save'}\r\n      </button>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default ChangePasswordModalContent;\r\n","import DeleteAccountModalContent from './delete-account-modal-content';\r\nexport default DeleteAccountModalContent;\r\n","import React, { useState } from 'react';\r\nimport firebase from 'firebase/app';\r\n\r\nimport { useTooltipContext } from '../../../../context';\r\nimport RequiredMark from '../../../../components/required-mark';\r\nimport { TooltipTypes } from '../../../../types';\r\nimport './delete-account-modal-content.css';\r\n\r\ninterface ChangeAccountDeleteModalProps {\r\n  onToggleModal: (evt: any) => void;\r\n  user: any;\r\n}\r\ninterface IConfirmCredentials {\r\n  email: string;\r\n  password: string;\r\n}\r\n\r\nconst ChangeAccountDeleteModalContent: React.FC<ChangeAccountDeleteModalProps> = ({\r\n  onToggleModal,\r\n  user,\r\n}) => {\r\n  const { showTooltip } = useTooltipContext();\r\n  const [credentials, setCredentials] = useState<IConfirmCredentials>({\r\n    email: user.email,\r\n    password: '',\r\n  });\r\n  const [isFirstModal, setIsFirstModal] = useState(true);\r\n\r\n  const onCredentialsChange = (evt: React.ChangeEvent<HTMLInputElement>) => {\r\n    const id: string = evt.target.id;\r\n    const value: string = evt.target.value;\r\n\r\n    setCredentials((prevState) => {\r\n      return {\r\n        ...prevState,\r\n        [id]: value,\r\n      };\r\n    });\r\n  };\r\n\r\n  const onConfirmCredentials = (evt: React.FormEvent<HTMLFormElement>): void => {\r\n    evt.preventDefault();\r\n    const { email, password } = credentials;\r\n\r\n    const credential = firebase.auth.EmailAuthProvider.credential(email, password);\r\n\r\n    user\r\n      .reauthenticateWithCredential(credential)\r\n      .then(() => {\r\n        setIsFirstModal(false);\r\n      })\r\n      .catch((error: any) => {\r\n        showTooltip(TooltipTypes.Error, `Reauth didn't pass: ${error.message}`);\r\n      });\r\n  };\r\n\r\n  const onDeleteAccount = (evt: React.FormEvent<HTMLFormElement>): void => {\r\n    evt.preventDefault();\r\n    user.delete().catch((err: any) => {\r\n      showTooltip(TooltipTypes.Error, `Your account didn't be deleted: ${err.message}`);\r\n    });\r\n  };\r\n\r\n  const onCancelDeleteAccount = (evt: React.MouseEvent<HTMLButtonElement>): void => {\r\n    onToggleModal(evt);\r\n  };\r\n\r\n  return (\r\n    <form\r\n      className=\"delete-account-form\"\r\n      onSubmit={isFirstModal ? onConfirmCredentials : onDeleteAccount}\r\n    >\r\n      {isFirstModal ? (\r\n        <>\r\n          <div className=\"delete-account-form__field-wrapper\">\r\n            <label className=\"delete-account-form__label\" htmlFor=\"email\">\r\n              Email\r\n              <RequiredMark />:\r\n            </label>\r\n            <input\r\n              className=\"delete-account-form__field delete-account-form__email-field\"\r\n              id=\"email\"\r\n              type=\"email\"\r\n              placeholder=\"Enter you email\"\r\n              onChange={onCredentialsChange}\r\n              value={credentials.email}\r\n              required\r\n            />\r\n          </div>\r\n          <div className=\"delete-account-form__field-wrapper\">\r\n            <label className=\"delete-account-form__label\" htmlFor=\"password\">\r\n              Password\r\n              <RequiredMark />:\r\n            </label>\r\n            <input\r\n              className=\"delete-account-form__field delete-account-form__password-field\"\r\n              id=\"password\"\r\n              type=\"password\"\r\n              placeholder=\"Enter you password\"\r\n              onChange={onCredentialsChange}\r\n              value={credentials.password}\r\n              required\r\n            />\r\n          </div>\r\n          <button className=\"delete-account-form__btn delete-account-form__submit-btn\">\r\n            Continue\r\n          </button>\r\n        </>\r\n      ) : (\r\n        <>\r\n          <span className=\"delete-account-form__warning-text\">\r\n            Do you want <b>to delete</b> your account <b>forever</b>? This action is irreversibly...\r\n          </span>\r\n          <div className=\"delete-account-form__btn-wrapper\">\r\n            <button\r\n              className=\"delete-account-form__btn delete-account-form__agree-btn\"\r\n              type=\"submit\"\r\n            >\r\n              Yes\r\n            </button>\r\n            <button\r\n              className=\"delete-account-form__btn delete-account-form__disagree-btn\"\r\n              type=\"button\"\r\n              onClick={onCancelDeleteAccount}\r\n            >\r\n              No\r\n            </button>\r\n          </div>\r\n        </>\r\n      )}\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default ChangeAccountDeleteModalContent;\r\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport * as React from \"react\";\n\nvar _ref = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M0 0h24v24H0z\",\n  fill: \"none\"\n});\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04a.996.996 0 000-1.41l-2.34-2.34a.996.996 0 00-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z\"\n});\n\nfunction SvgChangeIcon(props) {\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 24 24\"\n  }, props), _ref, _ref2);\n}\n\nexport default SvgChangeIcon;","export default __webpack_public_path__ + \"static/media/anonymous.a4137231.jpg\";","import React, { useState, useEffect } from 'react';\r\nimport PageTitle from 'components/page-title';\r\nimport Portal from 'components/portal';\r\nimport Modal from 'components/modal';\r\nimport { useAppContext, useTooltipContext } from 'context';\r\nimport firebase from 'firebase/app';\r\nimport ChangeEmailModalContent from './components/change-email-modal-content';\r\nimport ChangePasswordModalContent from './components/change-password-modal-content';\r\nimport DeleteAccountModalContent from './components/delete-account-modal-content';\r\nimport { TooltipTypes } from '../../types';\r\nimport ChangeIcon from '!@svgr/webpack!../../assets/img/change-icon.svg';\r\nimport anonymousImg from '../../assets/img/anonymous.jpg';\r\n\r\nimport './index.css';\r\n\r\n// @todo Рефакторинг компонента + привести к единому виду названия функций, переменных из useState\r\nconst SettingsPage: React.FC = () => {\r\n  const { currentUser, actionCodeSettings } = useAppContext();\r\n  const { showTooltip } = useTooltipContext();\r\n\r\n  const [name, setName] = useState(currentUser.displayName);\r\n  const [photoUrl, setPhotoUrl] = useState(currentUser.photoURL);\r\n  const [isNameClicked, setIsNameClicked] = useState(false);\r\n  const [isAvatarClicked, setIsAvatarClicked] = useState(false);\r\n  const [showModalEmailChange, setShowModalEmailChange] = useState(false);\r\n  const [showModalPasswordChange, setShowModalPasswordChange] = useState(false);\r\n  const [showModalAccountDelete, setShowModalAccountDelete] = useState(false);\r\n\r\n  const isGoogleUser = currentUser.providerData[0].providerId == 'google.com' ? true : false;\r\n  const email = currentUser.email;\r\n\r\n  //Смена имени\r\n  const onNameClick = (): void => {\r\n    setIsNameClicked(true);\r\n  };\r\n\r\n  const onNameSave = (): void => {\r\n    currentUser\r\n      .updateProfile({\r\n        displayName: name,\r\n      })\r\n      .then(() => setIsNameClicked(false))\r\n      .catch((err: any) => {\r\n        showTooltip(TooltipTypes.Error, `User name didn't update: ${err.message}`);\r\n      });\r\n  };\r\n  const onNameCancel = (): void => {\r\n    setName(currentUser.displayName);\r\n    setIsNameClicked(false);\r\n  };\r\n\r\n  //Смена фото\r\n  const onAvatarClick = (): void => {\r\n    setIsAvatarClicked(true);\r\n  };\r\n  const onPhotoUrlSave = (): void => {\r\n    currentUser\r\n      .updateProfile({\r\n        photoURL: photoUrl,\r\n      })\r\n      .then(() => setIsAvatarClicked(false))\r\n      .catch((err: any) => {\r\n        showTooltip(TooltipTypes.Error, `User avatar didn't update: ${err.message}`);\r\n      });\r\n  };\r\n  const onPhotoUrlCancel = (): void => {\r\n    setPhotoUrl(currentUser.photoURL);\r\n    setIsAvatarClicked(false);\r\n  };\r\n\r\n  // Сброс пароля\r\n  const onEmailForResetPasswordSend = (): void => {\r\n    firebase\r\n      .auth()\r\n      .sendPasswordResetEmail(email, actionCodeSettings)\r\n      .then(() => {\r\n        showTooltip(TooltipTypes.Info, 'The email to reset your password was send');\r\n      })\r\n      .catch((err) => {\r\n        showTooltip(TooltipTypes.Error, `Email for reset password didn't send ${err.message}`);\r\n      });\r\n  };\r\n\r\n  // @todo Сделать один хендлер с swith case?\r\n  const onNameChange = (evt: React.ChangeEvent<HTMLInputElement>): void => {\r\n    setName(evt.target.value);\r\n  };\r\n  const onPhotoUrlChange = (evt: React.ChangeEvent<HTMLInputElement>): void => {\r\n    setPhotoUrl(evt.target.value);\r\n  };\r\n\r\n  // Тоггл модалок\r\n  const toggleEmailChangeModal = (\r\n    evt:\r\n      | React.FormEvent<HTMLFormElement>\r\n      | React.MouseEvent<HTMLButtonElement>\r\n      | React.FormEvent<HTMLSpanElement>\r\n  ): void => {\r\n    setShowModalEmailChange((prev) => !prev);\r\n  };\r\n\r\n  const togglePasswordChangeModal = (\r\n    evt: React.FormEvent<HTMLFormElement> | React.MouseEvent<HTMLButtonElement>\r\n  ): void => {\r\n    setShowModalPasswordChange((prev) => !prev);\r\n  };\r\n\r\n  const toggleAccountDeleteModal = (\r\n    evt: React.FormEvent<HTMLFormElement> | React.MouseEvent<HTMLButtonElement>\r\n  ): void => {\r\n    setShowModalAccountDelete((prev) => !prev);\r\n  };\r\n\r\n  return (\r\n    <main className=\"settings-page\">\r\n      <div className=\"container\">\r\n        <PageTitle text=\"Settings\" />\r\n        <h2 className=\"settings-page__subtitle\">Account</h2>\r\n\r\n        <div className=\"settings-wrapper\">\r\n          <div className=\"settings-item settings-item__avatar-wrapper\">\r\n            <img\r\n              className=\"settings-item__avatar\"\r\n              src={photoUrl ? photoUrl : anonymousImg}\r\n              width=\"100\"\r\n              height=\"100\"\r\n              alt=\"User's avatar\"\r\n            />\r\n\r\n            {isAvatarClicked ? (\r\n              <>\r\n                {/* @todo Стоит сделать ref на инпут, чтобы бахать фокус сразу после его появления? */}\r\n                <input\r\n                  className=\"settings-item__field settings-item__field--avatar\"\r\n                  type=\"text\"\r\n                  name=\"avatar\"\r\n                  onChange={onPhotoUrlChange}\r\n                  placeholder=\"Type the link on your avatar\"\r\n                  value={photoUrl ? photoUrl : ''}\r\n                />\r\n                <button className=\"settings-item__btn\" onClick={onPhotoUrlSave}>\r\n                  Save\r\n                </button>\r\n                <button\r\n                  className=\"settings-item__btn settings-item__btn--cancel\"\r\n                  onClick={onPhotoUrlCancel}\r\n                >\r\n                  Cancel\r\n                </button>\r\n              </>\r\n            ) : (\r\n              <button\r\n                className=\"settings-item__edit-btn settings-item__edit-btn--avatar\"\r\n                onClick={onAvatarClick}\r\n              >\r\n                <ChangeIcon width=\"24px\" height=\"24px\" />\r\n              </button>\r\n            )}\r\n          </div>\r\n\r\n          <div className=\"settings-item\">\r\n            {isNameClicked ? (\r\n              <>\r\n                <input\r\n                  className=\"settings-item__field settings-item__field--name\"\r\n                  type=\"text\"\r\n                  name=\"name\"\r\n                  onChange={onNameChange}\r\n                  placeholder=\"What is your name?\"\r\n                  value={name ? name : ''}\r\n                />\r\n                <button className=\"settings-item__btn\" onClick={onNameSave}>\r\n                  Save\r\n                </button>\r\n                <button\r\n                  className=\"settings-item__btn settings-item__btn--cancel\"\r\n                  onClick={onNameCancel}\r\n                >\r\n                  Cancel\r\n                </button>\r\n              </>\r\n            ) : (\r\n              <>\r\n                <span className=\"settings-item__text\">\r\n                  <b>Your name: </b>\r\n                  {name ? name : 'Anonymous'}\r\n                </span>\r\n                <button\r\n                  className=\"settings-item__edit-btn settings-item__edit-btn--name\"\r\n                  onClick={onNameClick}\r\n                >\r\n                  <ChangeIcon width=\"18px\" height=\"18px\" />\r\n                </button>\r\n              </>\r\n            )}\r\n          </div>\r\n\r\n          <div className=\"settings-item settings-item--email\">\r\n            <span className=\"settings-item__text\">\r\n              <b>Your email: </b>\r\n              {email}\r\n            </span>\r\n\r\n            {isGoogleUser ? undefined : (\r\n              <button\r\n                className=\"settings-item__edit-btn settings-item__edit-btn--email\"\r\n                onClick={toggleEmailChangeModal}\r\n              >\r\n                <ChangeIcon width=\"18px\" height=\"18px\" />\r\n              </button>\r\n            )}\r\n          </div>\r\n\r\n          {!isGoogleUser && (\r\n            <>\r\n              <div className=\"settings-item\">\r\n                <span>If you remember your password, you can</span>\r\n                <button className=\"settings-item__btn\" onClick={togglePasswordChangeModal}>\r\n                  Change it\r\n                </button>\r\n              </div>\r\n              <div className=\"settings-item\">\r\n                <span>\r\n                  But if you forgot it, we can send the email to you to reset the password\r\n                </span>\r\n                <button className=\"settings-item__btn\" onClick={onEmailForResetPasswordSend}>\r\n                  Send the email\r\n                </button>\r\n              </div>\r\n            </>\r\n          )}\r\n\r\n          <div className=\"settings-item\">\r\n            <button\r\n              className=\"settings-item__btn settings-item__btn--cancel settings-item__btn--delete-account\"\r\n              onClick={toggleAccountDeleteModal}\r\n            >\r\n              Delete account\r\n            </button>\r\n          </div>\r\n        </div>\r\n        <h2 className=\"settings-page__subtitle\">App</h2>\r\n        {/* @todo Здесь будет тогглер цветовой схемы сайта */}\r\n\r\n        {showModalEmailChange && (\r\n          <Portal>\r\n            <Modal\r\n              classes=\"modal--change-email\"\r\n              title=\"Changing the email\"\r\n              onCloseBtnClick={toggleEmailChangeModal}\r\n            >\r\n              <ChangeEmailModalContent\r\n                onToggleModal={toggleEmailChangeModal}\r\n                user={currentUser}\r\n                actionCodeSettings={actionCodeSettings}\r\n              />\r\n            </Modal>\r\n          </Portal>\r\n        )}\r\n        {showModalPasswordChange && (\r\n          <Portal>\r\n            <Modal\r\n              classes=\"modal--change-password\"\r\n              title=\"Changing the password\"\r\n              onCloseBtnClick={togglePasswordChangeModal}\r\n            >\r\n              <ChangePasswordModalContent\r\n                onToggleModal={togglePasswordChangeModal}\r\n                user={currentUser}\r\n              />\r\n            </Modal>\r\n          </Portal>\r\n        )}\r\n        {showModalAccountDelete && (\r\n          <Portal>\r\n            <Modal\r\n              classes=\"modal--delete-account\"\r\n              title=\"Deleting the account\"\r\n              onCloseBtnClick={toggleAccountDeleteModal}\r\n            >\r\n              <DeleteAccountModalContent\r\n                user={currentUser}\r\n                onToggleModal={toggleAccountDeleteModal}\r\n              />\r\n            </Modal>\r\n          </Portal>\r\n        )}\r\n      </div>\r\n    </main>\r\n  );\r\n};\r\n\r\nexport default SettingsPage;\r\n","import { ICustomInput } from '../../../../interfaces';\r\n\r\nconst inputsConfig: Omit<ICustomInput, 'isError' | 'isTouched'>[] = [\r\n  {\r\n    label: 'Email',\r\n    isRequired: true,\r\n    type: 'email',\r\n    fieldName: 'email',\r\n    placeholder: 'Enter your email',\r\n  },\r\n  {\r\n    label: 'Password',\r\n    isRequired: true,\r\n    type: 'password',\r\n    fieldName: 'password',\r\n    placeholder: 'Create a password',\r\n  },\r\n  {\r\n    label: 'Repeat password',\r\n    isRequired: true,\r\n    type: 'password',\r\n    fieldName: 'repeatPassword',\r\n    placeholder: 'Repeat your password',\r\n  },\r\n];\r\n\r\nexport default inputsConfig;\r\n","import SignUpModalContent from './sign-up-modal-content';\r\nexport default SignUpModalContent;\r\n","import React, { useMemo } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { Formik, Form } from 'formik';\r\n\r\nimport { useTooltipContext } from '../../../../context';\r\nimport { signUpValidationSchema } from '../../../../validationSchemas';\r\nimport {\r\n  firebaseCreateUser,\r\n  firebaseCreateUserWithGoogle,\r\n} from '../../../../services/firebase-service';\r\nimport CustomInput from '../../../../components/customInput';\r\nimport inputsConfig from './inputs-config';\r\n\r\nimport './sign-up-modal-content.css';\r\n\r\nconst SignUpModalContent: React.FC = () => {\r\n  const { showTooltip } = useTooltipContext();\r\n\r\n  return (\r\n    <>\r\n      <Formik\r\n        initialValues={{ email: '', password: '', repeatPassword: '' }}\r\n        validationSchema={signUpValidationSchema}\r\n        onSubmit={(values, { setSubmitting }) =>\r\n          firebaseCreateUser(values, showTooltip, setSubmitting)\r\n        }\r\n      >\r\n        {({ isSubmitting, errors, touched }) => (\r\n          <Form className=\"sign-up-form\">\r\n            {useMemo(\r\n              () =>\r\n                inputsConfig.map((item) => (\r\n                  <div className=\"sign-up-form__field-wrapper\" key={item.fieldName}>\r\n                    <CustomInput\r\n                      label={item.label}\r\n                      labelClass=\"sign-up-form__label\"\r\n                      isRequired={item.isRequired}\r\n                      fieldClass=\"sign-up-form__field\"\r\n                      type={item.type}\r\n                      fieldName={item.fieldName}\r\n                      placeholder={item.placeholder}\r\n                      isError={item.fieldName in errors}\r\n                      isTouched={item.fieldName in touched}\r\n                    />\r\n                  </div>\r\n                )),\r\n              [errors, touched]\r\n            )}\r\n\r\n            <button className=\"sign-up-form__submit-btn\" type=\"submit\" disabled={isSubmitting}>\r\n              Sign up\r\n            </button>\r\n          </Form>\r\n        )}\r\n      </Formik>\r\n\r\n      <div className=\"modal--sign-up__sign-up-with-google\">\r\n        <span className=\"sign-up-with-google__text\">Also you can</span>\r\n        <button\r\n          className=\"sign-up-with-google__btn\"\r\n          onClick={() => firebaseCreateUserWithGoogle(showTooltip)}\r\n        >\r\n          Sign up with\r\n        </button>\r\n      </div>\r\n\r\n      <span className=\"modal--sign-up__go-to-sign-in\">\r\n        Already have an account?{' '}\r\n        <Link className=\"modal--sign-up__sign-in-link\" to=\"/sign-in\">\r\n          Sign in\r\n        </Link>\r\n      </span>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default SignUpModalContent;\r\n","import React from 'react';\r\nimport Modal from '../../components/modal';\r\nimport SignUpModalContent from './components/sign-up-modal-content';\r\n\r\nconst SignUpPage: React.FC = () => (\r\n  <main className=\"sign-up-page\">\r\n    <Modal classes=\"modal--sign-up\" title=\"Sign up\">\r\n      <SignUpModalContent />\r\n    </Modal>\r\n  </main>\r\n);\r\n\r\nexport default SignUpPage;\r\n","import { ICustomInput } from '../../../../interfaces';\r\n\r\nconst inputsConfig: Omit<ICustomInput, 'isError' | 'isTouched'>[] = [\r\n  {\r\n    label: 'Email',\r\n    isRequired: true,\r\n    type: 'email',\r\n    fieldName: 'email',\r\n    placeholder: 'Enter your email',\r\n  },\r\n  {\r\n    label: 'Password',\r\n    isRequired: true,\r\n    type: 'password',\r\n    fieldName: 'password',\r\n    placeholder: 'Enter your password',\r\n  },\r\n  {\r\n    label: 'Remember me',\r\n    isRequired: false,\r\n    type: 'checkbox',\r\n    fieldName: 'rememberMe',\r\n  },\r\n];\r\n\r\nexport default inputsConfig;\r\n","import SignInModalContent from './sign-in-modal-content';\r\nexport default SignInModalContent;\r\n","import React, { useMemo } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { Formik, Form } from 'formik';\r\n\r\nimport { useTooltipContext } from '../../../../context';\r\nimport { signInValidationSchema } from '../../../../validationSchemas';\r\nimport { firebaseSignIn, firebaseGoogleSignIn } from '../../../../services/firebase-service';\r\nimport inputsConfig from './inputs-config';\r\nimport CustomInput from '../../../../components/customInput';\r\n\r\nimport './sign-in-modal-content.css';\r\n\r\nconst SignInModalContent: React.FC = () => {\r\n  const { showTooltip } = useTooltipContext();\r\n\r\n  return (\r\n    <>\r\n      <Formik\r\n        initialValues={{\r\n          email: '',\r\n          password: '',\r\n          rememberMe: Boolean(localStorage.getItem('rememberMe')),\r\n        }}\r\n        validationSchema={signInValidationSchema}\r\n        onSubmit={(values, { setSubmitting }) => firebaseSignIn(values, showTooltip, setSubmitting)}\r\n      >\r\n        {({ isSubmitting, errors, touched }) => (\r\n          <Form className=\"sign-in-form\">\r\n            {useMemo(\r\n              () =>\r\n                inputsConfig.map((item) => (\r\n                  <div\r\n                    className={`sign-in-form__field-wrapper ${\r\n                      item.fieldName === `rememberMe` ? `sign-in-form__field-wrapper--checkbox` : ''\r\n                    }`}\r\n                    key={item.fieldName}\r\n                  >\r\n                    <CustomInput\r\n                      label={item.label}\r\n                      labelClass=\"sign-in-form__label\"\r\n                      isRequired={item.isRequired}\r\n                      fieldClass={`sign-up-form__field ${\r\n                        item.fieldName === `rememberMe` ? `sign-in-form__field--checkbox` : ``\r\n                      }`}\r\n                      type={item.type}\r\n                      fieldName={item.fieldName}\r\n                      placeholder={item.placeholder}\r\n                      isError={item.fieldName in errors}\r\n                      isTouched={item.fieldName in touched}\r\n                    />\r\n                  </div>\r\n                )),\r\n              [errors, touched]\r\n            )}\r\n\r\n            <button className=\"sign-in-form__submit-btn\" type=\"submit\" disabled={isSubmitting}>\r\n              Sign in\r\n            </button>\r\n          </Form>\r\n        )}\r\n      </Formik>\r\n\r\n      <button\r\n        className=\"modal--sign-in__google-btn\"\r\n        onClick={() => firebaseGoogleSignIn(showTooltip)}\r\n      >\r\n        Sign in with\r\n      </button>\r\n\r\n      <span className=\"modal--sign-in__go-to-reset\">\r\n        Forgot password?{' '}\r\n        <Link className=\"modal--sign-in__link\" to=\"/reset-password\">\r\n          Reset\r\n        </Link>\r\n      </span>\r\n      <span className=\"modal--sign-in__go-to-sign-up\">\r\n        Back to{' '}\r\n        <Link className=\"modal--sign-in__link\" to=\"/sign-up\">\r\n          Sign up\r\n        </Link>\r\n      </span>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default SignInModalContent;\r\n","import React from 'react';\r\nimport Modal from '../../components/modal';\r\nimport SignInModalContent from './components/sign-in-modal-content';\r\n\r\nconst SignInPage: React.FC = () => (\r\n  <main className=\"sign-in-page\">\r\n    <Modal classes=\"modal--sign-in\" title=\"Sign in\">\r\n      <SignInModalContent />\r\n    </Modal>\r\n  </main>\r\n);\r\n\r\nexport default SignInPage;\r\n","import React, { useMemo } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { Formik, Form } from 'formik';\r\n\r\nimport { useAppContext, useTooltipContext } from '../../../context/';\r\nimport { resetPasswordValidationSchema } from '../../../validationSchemas';\r\nimport { firebaseSendPasswordResetEmail } from '../../../services/firebase-service';\r\nimport CustomInput from '../../../components/customInput';\r\n\r\nimport './reset-password-modal-content.css';\r\n\r\nconst ResetPasswordModalContent: React.FC = () => {\r\n  const { actionCodeSettings } = useAppContext();\r\n  const { showTooltip } = useTooltipContext();\r\n\r\n  return (\r\n    <>\r\n      <Formik\r\n        initialValues={{\r\n          email: '',\r\n        }}\r\n        validationSchema={resetPasswordValidationSchema}\r\n        onSubmit={(values, { setSubmitting }) =>\r\n          firebaseSendPasswordResetEmail(values, actionCodeSettings, showTooltip, setSubmitting)\r\n        }\r\n      >\r\n        {({ isSubmitting, errors, touched }) => (\r\n          <Form className=\"reset-password-form\">\r\n            {useMemo(\r\n              () => (\r\n                <div className=\"reset-password-form__field-wrapper\">\r\n                  <CustomInput\r\n                    label=\"Email\"\r\n                    labelClass=\"reset-password-form__label\"\r\n                    isRequired={true}\r\n                    fieldClass=\"reset-password-form__field\"\r\n                    type=\"email\"\r\n                    fieldName=\"email\"\r\n                    placeholder=\"Enter your email\"\r\n                    isError={'email' in errors}\r\n                    isTouched={'email' in touched}\r\n                  />\r\n                </div>\r\n              ),\r\n              [errors, touched]\r\n            )}\r\n\r\n            <button\r\n              className=\"reset-password-form__submit-btn\"\r\n              type=\"submit\"\r\n              disabled={isSubmitting}\r\n            >\r\n              Reset password\r\n            </button>\r\n          </Form>\r\n        )}\r\n      </Formik>\r\n\r\n      <Link className=\"modal--reset-password__sign-in-link\" to=\"/sign-in\">\r\n        I've just remembered :)\r\n      </Link>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ResetPasswordModalContent;\r\n","import React from 'react';\r\nimport { Redirect } from 'react-router-dom';\r\nimport Modal from '../../components/modal';\r\nimport ResetPasswordModalContent from './components/reset-password-modal-content';\r\n\r\nconst ResetPasswordPage: React.FC = () => (\r\n  <main className=\"reset-password-page\">\r\n    <Modal classes=\"modal--reset-password\" title=\"Reset password\">\r\n      <ResetPasswordModalContent />\r\n    </Modal>\r\n  </main>\r\n);\r\n\r\nexport default ResetPasswordPage;\r\n","import Header from \"./header\";\r\nexport default Header;\r\n","import React from 'react';\r\nimport { NavLink } from 'react-router-dom';\r\nimport { useTooltipContext } from '../../context';\r\nimport { firebaseSignOut } from '../../services/firebase-service';\r\n\r\nimport './header.css';\r\n\r\nconst Header: React.FC = () => {\r\n  const { showTooltip } = useTooltipContext();\r\n\r\n  return (\r\n    <header className=\"page-header\">\r\n      <div className=\"container flex-wrapper\">\r\n        <nav className=\"main-nav\">\r\n          <NavLink exact to=\"/\" className=\"main-nav__link\" activeClassName=\"main-nav__active-link\">\r\n            Doit!\r\n          </NavLink>\r\n          <ul className=\"main-nav__list\">\r\n            <li className=\"main-nav__item\">\r\n              <NavLink\r\n                to=\"/todo\"\r\n                className=\"main-nav__link\"\r\n                activeClassName=\"main-nav__active-link\"\r\n              >\r\n                Todo\r\n              </NavLink>\r\n            </li>\r\n            <li className=\"main-nav__item\">\r\n              <NavLink\r\n                to=\"/notes\"\r\n                className=\"main-nav__link\"\r\n                activeClassName=\"main-nav__active-link\"\r\n              >\r\n                Notes\r\n              </NavLink>\r\n            </li>\r\n            <li className=\"main-nav__item\">\r\n              <NavLink\r\n                to=\"/settings\"\r\n                className=\"main-nav__link\"\r\n                activeClassName=\"main-nav__active-link\"\r\n              >\r\n                Settings\r\n              </NavLink>\r\n            </li>\r\n          </ul>\r\n        </nav>\r\n\r\n        <button className=\"page-header__sign-out-btn\" onClick={() => firebaseSignOut(showTooltip)}>\r\n          Sign out\r\n        </button>\r\n      </div>\r\n    </header>\r\n  );\r\n};\r\n\r\nexport default Header;\r\n","import React from 'react';\r\nimport { useTooltipContext } from '../../context';\r\nimport { firebaseSignOut } from '../../services/firebase-service';\r\n\r\nimport './emailUnverifiedOverlay.css';\r\n\r\nconst EmailUnverifiedOverlay = () => {\r\n  const { showTooltip } = useTooltipContext();\r\n\r\n  return (\r\n    <div className=\"app-overlay\">\r\n      <div className=\"app-overlay__content\">\r\n        Please confirm your email to use the app or{' '}\r\n        <button className=\"app-overlay__sign-out-btn\" onClick={() => firebaseSignOut(showTooltip)}>\r\n          Sign out\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default EmailUnverifiedOverlay;\r\n","import Tooltip from './tooltip';\r\nexport default Tooltip;\r\n","import React, { useEffect } from 'react';\r\nimport { Transition } from 'react-transition-group';\r\nimport { useTooltipContext } from '../../context';\r\nimport './tooltip.css';\r\n\r\nconst Tooltip: React.FC = () => {\r\n  const { message, type, isOpen, hideTooltip } = useTooltipContext();\r\n\r\n  useEffect(() => {\r\n    if (isOpen) {\r\n      let timerId = setTimeout(hideTooltip, 10000);\r\n      return () => {\r\n        clearTimeout(timerId);\r\n      };\r\n    }\r\n  }, [isOpen]);\r\n\r\n  return (\r\n    <Transition in={isOpen} timeout={300} unmountOnExit>\r\n      {(transitionState: string) => (\r\n        <div className={`tooltip ${transitionState} tooltip--${type}`}>\r\n          <span className=\"tooltip__message\">{message}</span>\r\n          <button className=\"tooltip__close\" onClick={() => hideTooltip()}></button>\r\n        </div>\r\n      )}\r\n    </Transition>\r\n  );\r\n};\r\nexport default Tooltip;\r\n","import App from \"./app\";\r\nexport default App;\r\n","import React from 'react';\r\nimport { HashRouter as Router, Redirect, Route } from 'react-router-dom';\r\nimport {\r\n  MainPage,\r\n  TodosPage,\r\n  NotesPage,\r\n  SettingsPage,\r\n  SignUpPage,\r\n  SignInPage,\r\n  ResetPasswordPage,\r\n} from '../pages';\r\nimport { useAppContext } from '../context';\r\nimport Header from '../components/header';\r\nimport EmailUnverifiedOverlay from '../components/emailUnverifiedOverlay';\r\nimport Tooltip from '../components/tooltip';\r\n\r\nimport '../assets/css/normalize.css';\r\nimport './scaffolding.css';\r\n\r\nconst App: React.FC = () => {\r\n  const { isLoggedIn, currentUser } = useAppContext();\r\n\r\n  return (\r\n    <Router>\r\n      {isLoggedIn ? (\r\n        <>\r\n          {currentUser.emailVerified ? (\r\n            <>\r\n              <Route path=\"/sign-in\" render={() => <Redirect to=\"/\" />} />\r\n              <Route path=\"/sign-up\" render={() => <Redirect to=\"/\" />} />\r\n              <Header />\r\n              <Tooltip />\r\n              <Route path=\"/\" component={MainPage} exact />\r\n              <Route path=\"/todo\" component={TodosPage} />\r\n              <Route path=\"/notes\" component={NotesPage} />\r\n              <Route path=\"/settings\" component={SettingsPage} />\r\n            </>\r\n          ) : (\r\n            <>\r\n              <Route path=\"/sign-in\" render={() => <Redirect to=\"/\" />} />\r\n              <Route path=\"/sign-up\" render={() => <Redirect to=\"/\" />} />\r\n              <Header />\r\n              <Tooltip />\r\n              <EmailUnverifiedOverlay />\r\n            </>\r\n          )}\r\n        </>\r\n      ) : (\r\n        <>\r\n          <Tooltip />\r\n          <Route path=\"/sign-up\" component={SignUpPage} />\r\n          <Route path=\"/sign-in\" component={SignInPage} />\r\n          <Route path=\"/reset-password\" component={ResetPasswordPage} />\r\n          {/* @todo Использовать switch из react-router-dom*/}\r\n          {/* <Route path=\"*\" render={() => <Redirect to=\"/sign-up\" />} /> */}\r\n          <Redirect to=\"/sign-up\" />\r\n        </>\r\n      )}\r\n    </Router>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\nimport App from './app';\r\nimport { AppProvider, TooltipProvider } from './context';\r\nimport firebase from 'firebase/app';\r\nimport 'firebase/auth';\r\nimport 'firebase/database';\r\n\r\ninterface IFirebaseConfig {\r\n  apiKey: string;\r\n  authDomain: string;\r\n  databaseURL: string;\r\n  projectId: string;\r\n  storageBucket: string;\r\n  messagingSenderId: string;\r\n  appId: string;\r\n}\r\n\r\nconst firebaseConfig: IFirebaseConfig = {\r\n  apiKey: 'AIzaSyD4KDh3FaOBTHDF_oleVT06eUTvbDCStNY',\r\n  authDomain: 'todo-1c323.firebaseapp.com',\r\n  databaseURL: 'https://todo-1c323-default-rtdb.firebaseio.com',\r\n  projectId: 'todo-1c323',\r\n  storageBucket: 'todo-1c323.appspot.com',\r\n  messagingSenderId: '372839437605',\r\n  appId: '1:372839437605:web:31ef34b6e882e585f576cc',\r\n};\r\n\r\nfirebase.initializeApp(firebaseConfig);\r\n\r\nReactDOM.render(\r\n  <TooltipProvider>\r\n    <AppProvider>\r\n      <App />\r\n    </AppProvider>\r\n  </TooltipProvider>,\r\n  document.querySelector('#root')\r\n);\r\n"],"sourceRoot":""}