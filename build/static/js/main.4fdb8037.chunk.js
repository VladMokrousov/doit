(this.webpackJsonptodo=this.webpackJsonptodo||[]).push([[0],Array(34).concat([function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,,,,,,function(e,t,n){"use strict";n.r(t);var a=n(0),s=n(2),c=n.n(s),o=n(20),i=n.n(o),r=n(10),l=n(8),d=function(e){var t=e.text;return Object(a.jsx)("h1",{className:"page-title",children:t})},u=function(){return Object(a.jsx)("main",{className:"main-page",children:Object(a.jsx)("div",{className:"container",children:Object(a.jsx)(d,{text:"Welcome to the greatest todo app ever!!!"})})})},j=n(3),b=n(14),m=n(5),h=(n(34),function(e){var t=e.onSearchChange,n=Object(s.useState)(""),c=Object(m.a)(n,2),o=c[0],i=c[1];return Object(a.jsx)("input",{type:"text",placeholder:"Type this somthing",className:"search-input",value:o,onChange:function(e){var n=e.target.value;i(n),t(n)}})}),f=(n(35),function(e){var t=e.fieldsContent,n=e.onDeleted,s=t.description,c=t.status,o=t.priority,i=t.endDatePlan,r=t.endDateActual,l="table__item-cell";return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("td",{className:l,children:Object(a.jsx)("span",{className:"table__item-cell--description",children:s})}),Object(a.jsx)("td",{className:l,children:Object(a.jsx)("span",{className:"table__item-cell--status",children:c})}),Object(a.jsx)("td",{className:l,children:Object(a.jsx)("span",{className:"table__item-cell--priority",children:o})}),Object(a.jsx)("td",{className:l,children:Object(a.jsx)("span",{className:"table__item-cell--datePlan",children:i})}),Object(a.jsx)("td",{className:l,children:Object(a.jsx)("span",{className:"table__item-cell--actualDate",children:r})}),Object(a.jsx)("td",{className:l,children:Object(a.jsx)("button",{type:"button",className:"btn table__btn table__btn--del",onClick:n,children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})})]})}),O=(n(36),function(e){var t=e.todos,n=e.onDeleted,s=e.onSelected,c=e.overlayText,o=["Description","Status","Priority","End date plan","End date actual","Action"].map((function(e){var t="Description"==e?"table__header--description":"Status"==e?"table__header--status":"Priority"==e?"table__header--priority":"End date plan"==e?"table__header--planDate":"End date actual"==e?"table__header--actualDate":"Action"==e?"table__header--action":"",n=t?"table__header ".concat(t):"table__header";return Object(a.jsx)("th",{className:n,scope:"col",children:e},e)}));if(t&&n&&s){var i=t.map((function(e){var t=e.id,c=Object(b.a)(e,["id"]),o="High"==c.fieldsContent.priority?"table__item--important":null,i="Done"==c.fieldsContent.status?"table__item--done":null;return Object(a.jsx)("tr",{className:"table__item ".concat(i," ").concat(o),onDoubleClick:function(e){return s(e,t)},children:Object(a.jsx)(f,Object(j.a)(Object(j.a)({},c),{},{onDeleted:function(){return n(t)}}))},t)}));return Object(a.jsxs)("table",{className:"table table--todo",children:[Object(a.jsx)("thead",{children:Object(a.jsx)("tr",{className:"table__headers table--todo__headers",children:o})}),Object(a.jsx)("tbody",{children:i})]})}return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("table",{className:"table table--todo",children:[Object(a.jsx)("thead",{children:Object(a.jsx)("tr",{className:"table__headers table--todo__headers",children:o})}),Object(a.jsx)("tbody",{})]}),Object(a.jsx)("span",{children:c})]})}),p=(n(37),function(e){var t=e.filter,n=e.onFilterChange,s=e.everyStatusCount,c=[{name:"all",label:"All"},{name:"new",label:"New"},{name:"inProgress",label:"In progress"},{name:"done",label:"Done"}];c.forEach((function(e){e.count=s[e.name]}));var o=c.map((function(e){var s=e.name,c=e.label,o=e.count,i=t===s?"status-filter__btn--active":null;return Object(a.jsx)("button",{type:"button",className:"status-filter__btn btn ".concat(i),onClick:function(){n(s)},children:"".concat(c," - ").concat(o)},s)}));return Object(a.jsx)("div",{className:"status-filter",children:o})}),g=(n(38),function(e){var t=e.children,n=document.createElement("div");return n.classList.add("overlay"),Object(s.useEffect)((function(){document.body.style.overflow="hidden";var e=document.querySelector("#modal");return e&&e.append(n),function(){n.remove(),document.body.style.overflow="visible"}}),[]),Object(o.createPortal)(t,n)}),x=n(6),v=c.a.createContext({}),_=function(){return Object(s.useContext)(v)},N=function(e){var t=e.children,n=Object(s.useState)(!1),c=Object(m.a)(n,2),o=c[0],i=c[1],r=Object(s.useState)(!1),l=Object(m.a)(r,2),d=l[0],u=l[1],j=Object(s.useState)(!1),b=Object(m.a)(j,2),h=b[0],f=b[1],O={url:"https://vladmokrousov.github.io/doit/build/index.html"};Object(s.useEffect)((function(){x.a.auth().onAuthStateChanged((function(e){if(e)if(e.emailVerified||e.sendEmailVerification(O).catch((function(e){console.log("\u041f\u0440\u0438 \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u0438 email \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430",e.message)})),localStorage.getItem("rememberMe"))p(e);else{var t=new Date(e.metadata.lastSignInTime);Math.round(t.getTime()/1e3)<Math.round((new Date).getTime()/1e3)-86400?x.a.auth().signOut().catch((function(e){console.log(e.message)})):p(e)}else g();f(!0)}))}),[]);var p=function(e){i(!0),u(e)},g=function(){i(!1),u(!1)};return h?Object(a.jsx)(v.Provider,{value:{isLoggedIn:o,currentUser:d,actionCodeSettings:O},children:t}):null},w=c.a.createContext({}),C=function(){return Object(s.useContext)(w)},y=function(e){var t=e.children,n=Object(s.useState)(!1),c=Object(m.a)(n,2),o=c[0],i=c[1],r=Object(s.useState)(""),l=Object(m.a)(r,2),d=l[0],u=l[1];return Object(a.jsx)(w.Provider,{value:{isOpen:o,message:d,showTooltip:function(e){u(e),i(!0)},hideTooltip:function(){i(!1),u("")}},children:t})},S=(n(39),function(e){var t=e.selectedItemId,n=e.onEdited,c=e.onAdded,o=e.onToggleModal,i=_().currentUser,r=new Date,l=r.getMonth()+1,d=r.getDate(),u="".concat(r.getFullYear(),"-").concat(2==String(l).length?l:"0"+l,"-").concat(2==String(d).length?d:"0"+d),b=Object(s.useState)({description:"",priority:"Low",status:"New",endDatePlan:u,endDateActual:"-"}),h=Object(m.a)(b,2),f=h[0],O=h[1];Object(s.useEffect)((function(){t&&x.a.database().ref("users/"+i.uid+"/todos").once("value").then((function(e){e.forEach((function(e){var n=e.val();if(n.id===t)return O(Object(j.a)({},n.fieldsContent)),!0}))})).catch((function(e){console.log("Couldn't take the data from DB: "+e)}))}),[]);var p=f.description,g=f.priority,v=f.status,N=f.endDatePlan;return Object(a.jsxs)("form",{className:"todos-form",onSubmit:function(e){e.preventDefault(),t?n(f):c(f),o(e)},children:[Object(a.jsx)("label",{htmlFor:"description",children:"Description (*): "}),Object(a.jsx)("input",{className:"todos-form__description-field",id:"description",type:"text",name:"description",onChange:function(e){O((function(t){return Object(j.a)(Object(j.a)({},t),{},{description:e.target.value})}))},placeholder:"What must be to do?",value:p,required:!0}),Object(a.jsxs)("div",{className:"todos-form__select-wrapper flex-wrapper flex-wrapper--jsb",children:[Object(a.jsxs)("div",{className:"todos-form__priority-wrapper",children:[Object(a.jsx)("span",{className:"todos-form__label-for-select",children:"Priority:"}),Object(a.jsxs)("select",{className:"todos-form__select",name:"priority",onChange:function(e){O((function(t){return Object(j.a)(Object(j.a)({},t),{},{priority:e.target.value})}))},value:g,children:[Object(a.jsx)("option",{value:"Low",children:"Low"}),Object(a.jsx)("option",{value:"Medium",children:"Medium"}),Object(a.jsx)("option",{value:"High",children:"High"})]})]}),Object(a.jsxs)("div",{className:"todos-form__status-wrapper",children:[Object(a.jsx)("span",{className:"todos-form__label-for-select",children:"Status: "}),Object(a.jsxs)("select",{className:"todos-form__select",disabled:!t,name:"status",onChange:function(e){"Done"==e.target.value?O((function(e){return Object(j.a)(Object(j.a)({},e),{},{endDateActual:u})})):O((function(e){return Object(j.a)(Object(j.a)({},e),{},{endDateActual:"-"})})),O((function(t){return Object(j.a)(Object(j.a)({},t),{},{status:e.target.value})}))},value:v,children:[Object(a.jsx)("option",{value:"New",children:"New"}),Object(a.jsx)("option",{value:"In process",children:"In process"}),Object(a.jsx)("option",{value:"Done",children:"Done"})]})]})]}),Object(a.jsx)("label",{htmlFor:"calendar",children:"End Date: "}),Object(a.jsx)("input",{className:"todos-form__calendar",id:"calendar",type:"date",name:"calendar",onChange:function(e){O((function(t){return Object(j.a)(Object(j.a)({},t),{},{endDatePlan:e.target.value})}))},value:N}),Object(a.jsx)("button",{className:"todos-form__submit",children:"Save"})]})}),D=(n(40),function(e){var t=e.classes,n=e.title,s=e.onCloseBtnClick,c=e.children;return Object(a.jsxs)("section",{className:"modal ".concat(t),children:[Object(a.jsx)("h2",{className:"modal__title",children:n}),s&&Object(a.jsx)("button",{className:"modal__close",onClick:s,children:"X"}),c]})}),I=function(){var e=_().currentUser,t=Object(s.useState)({term:"",filter:"all",showModal:!1,selectedItemId:!1,isDataLoaded:!1}),n=Object(m.a)(t,2),c=n[0],o=n[1];if(Object(s.useEffect)((function(){var t=function(e){o((function(t){t.isDataLoaded;var n=Object(b.a)(t,["isDataLoaded"]);return Object(j.a)(Object(j.a)({isDataLoaded:!0},n),{},{todosData:e.val()})}))},n=x.a.database().ref("users/"+e.uid+"/todos");return n.on("value",t),function(){n.off("value",t)}}),[]),c.isDataLoaded){var i=100,r=function(t){var n=function(e){return{fieldsContent:e,id:i}}(Object(j.a)({},t));x.a.database().ref("users/"+e.uid+"/todos").push(n).catch((function(e){console.log("Add item failed: ".concat(e.message))}))},l=function(e){"X"==e.target.textContent&&o((function(e){return Object(j.a)(Object(j.a)({},e),{},{selectedItemId:!1})})),o((function(e){var t=e.showModal,n=Object(b.a)(e,["showModal"]);return Object(j.a)(Object(j.a)({},n),{},{showModal:!t})}))};if(c.todosData){var u=100;Object.values(c.todosData).forEach((function(e){e.id>u&&(u=e.id)})),i=u+1;var f=c.todosData,v=c.term,N=c.filter,w=c.showModal,C=c.selectedItemId,y=function(e,t){switch(t){case"all":return e;case"new":return e.filter((function(e){return"New"==e.fieldsContent.status}));case"inProgress":return e.filter((function(e){return"In process"==e.fieldsContent.status}));case"done":return e.filter((function(e){return"Done"==e.fieldsContent.status}));default:return e}}(function(e,t){return 0===t.length?e:e.filter((function(e){return e.fieldsContent.description.toLowerCase().indexOf(t.toLowerCase())>-1}))}(Object.values(f),v),N),I={all:Object.values(f).length,new:Object.values(f).filter((function(e){return"New"==e.fieldsContent.status})).length,inProgress:Object.values(f).filter((function(e){return"In process"==e.fieldsContent.status})).length,done:Object.values(f).filter((function(e){return"Done"==e.fieldsContent.status})).length};return Object(a.jsx)("main",{className:"todos-page",children:Object(a.jsxs)("div",{className:"container",children:[Object(a.jsx)(d,{text:"Todo List"}),Object(a.jsxs)("div",{className:"flex-wrapper",children:[Object(a.jsx)("button",{className:"modal-toggle-button",onClick:l,children:"Add task"}),Object(a.jsx)(h,{onSearchChange:function(e){o((function(t){return Object(j.a)(Object(j.a)({},t),{},{term:e})}))}}),Object(a.jsx)(p,{filter:N,onFilterChange:function(e){o((function(t){return Object(j.a)(Object(j.a)({},t),{},{filter:e})}))},everyStatusCount:I})]}),Object(a.jsx)(O,{todos:y,onDeleted:function(t){x.a.database().ref("users/"+e.uid+"/todos").once("value").then((function(n){n.forEach((function(n){if(n.val().id===t)return x.a.database().ref("users/"+e.uid+"/todos/".concat(n.key)).remove().catch((function(e){console.log("Remove failed: "+e.message)})),!0}))})).catch((function(e){console.log("Couldn't take the data from DB: "+e)}))},onSelected:function(e,t){o((function(e){return Object(j.a)(Object(j.a)({},e),{},{selectedItemId:t})})),l(e)}}),w&&Object(a.jsx)(g,{children:Object(a.jsx)(D,{classes:"modal--todos",title:C?"Edit task":"Add task",onCloseBtnClick:l,children:Object(a.jsx)(S,{onAdded:r,onEdited:function(t){x.a.database().ref("users/"+e.uid+"/todos").once("value").then((function(n){n.forEach((function(n){if(n.val().id===c.selectedItemId)return x.a.database().ref("users/"+e.uid+"/todos/".concat(n.key,"/fieldsContent")).set(Object(j.a)({},t)).catch((function(e){console.log("Edit item failed: "+e.message)})),!0}))})).catch((function(e){console.log("Couldn't take the data from DB: "+e)})),o((function(e){e.selectedItemId;var t=Object(b.a)(e,["selectedItemId"]);return Object(j.a)({selectedItemId:!1},t)}))},onToggleModal:l,selectedItemId:C})})})]})})}return Object(a.jsx)("main",{className:"todos-page",children:Object(a.jsxs)("div",{className:"container",children:[Object(a.jsx)(d,{text:"Todo List"}),Object(a.jsx)("div",{className:"flex-wrapper",children:Object(a.jsx)("button",{className:"modal-toggle-button",onClick:l,children:"Add task"})}),Object(a.jsx)(O,{overlayText:"You can sleep soundly"}),c.showModal&&Object(a.jsx)(g,{children:Object(a.jsx)(D,{classes:"modal--todos",title:"Add task",onCloseBtnClick:l,children:Object(a.jsx)(S,{onAdded:r,selectedItemId:!1,onToggleModal:l})})})]})})}return Object(a.jsx)("main",{className:"todos-page",children:Object(a.jsxs)("div",{className:"container",children:[Object(a.jsx)(d,{text:"Todo List"}),Object(a.jsx)("span",{children:"Loading..."})]})})},k=(n(41),function(e){var t=e.creationDate,n=e.description,s=e.onDeleted;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{className:"note__header",children:[Object(a.jsx)("span",{children:t}),Object(a.jsx)("button",{type:"button",className:"btn note__btn note__btn--del",onClick:s,children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})]}),Object(a.jsx)("p",{className:"note__description",children:n})]})}),E=(n(42),function(e){var t=e.notes,n=e.onDeleted,s=e.onSelected,c=e.overlayText;if(t&&n&&s){var o=t.map((function(e){var t=e.id,c=Object(b.a)(e,["id"]);return Object(a.jsx)("li",{className:"list__item",onDoubleClick:function(e){return s(e,t)},children:Object(a.jsx)(k,Object(j.a)(Object(j.a)({},c),{},{onDeleted:function(){return n(t)}}))},t)}));return Object(a.jsx)("ul",{className:"list list--notes",children:o})}return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("ul",{className:"list list--notes"}),Object(a.jsx)("span",{children:c})]})}),F=(n(43),function(e){var t=e.selectedItemId,n=e.onEdited,c=e.onAdded,o=e.onToggleModal,i=_().currentUser,r=Object(s.useState)(""),l=Object(m.a)(r,2),d=l[0],u=l[1];Object(s.useEffect)((function(){t&&x.a.database().ref("users/"+i.uid+"/notes").once("value").then((function(e){e.forEach((function(e){var n=e.val();if(n.id===t)return u(n.description),!0}))})).catch((function(e){console.log("Couldn't take the data from DB: "+e)}))}),[]);return Object(a.jsxs)("form",{className:"notes-form",onSubmit:function(e){e.preventDefault(),t?n(d):c(d),o(e)},children:[Object(a.jsx)("label",{htmlFor:"description",children:"Description (*): "}),Object(a.jsx)("textarea",{className:"notes-form__description-field",id:"description",name:"description",onChange:function(e){u(e.target.value)},placeholder:"Type something:)",value:d,required:!0}),Object(a.jsx)("button",{className:"notes-form__submit",children:"Save"})]})}),P=function(){var e=_().currentUser,t=Object(s.useState)({showModal:!1,selectedItemId:!1,isDataLoaded:!1}),n=Object(m.a)(t,2),c=n[0],o=n[1];if(Object(s.useEffect)((function(){var t=function(e){o((function(t){t.isDataLoaded;var n=Object(b.a)(t,["isDataLoaded"]);return Object(j.a)(Object(j.a)({isDataLoaded:!0},n),{},{notesData:e.val()})}))},n=x.a.database().ref("users/"+e.uid+"/notes");return n.on("value",t),function(){n.off("value",t)}}),[]),c.isDataLoaded){var i=100,r=function(t){var n=function(e){return{description:e,creationDate:l(),id:i}}(t);x.a.database().ref("users/"+e.uid+"/notes").push(n).catch((function(e){console.log("Add item failed: ".concat(e.message))}))},l=function(){var e=new Date,t=e.getMonth()+1,n=e.getDate();return"".concat(2==String(n).length?n:"0"+n,".").concat(2==String(t).length?t:"0"+t,".").concat(e.getFullYear())},u=function(e){"X"==e.target.textContent&&o((function(e){return Object(j.a)(Object(j.a)({},e),{},{selectedItemId:!1})})),o((function(e){var t=e.showModal,n=Object(b.a)(e,["showModal"]);return Object(j.a)(Object(j.a)({},n),{},{showModal:!t})}))};if(c.notesData){var h=100;Object.values(c.notesData).forEach((function(e){e.id>h&&(h=e.id)})),i=h+1;var f=c.notesData,O=c.showModal,p=c.selectedItemId;return Object(a.jsx)("main",{className:"notes-page",children:Object(a.jsxs)("div",{className:"container",children:[Object(a.jsx)(d,{text:"Notes"}),Object(a.jsx)("button",{className:"modal-toggle-button",onClick:u,children:"Add note"}),Object(a.jsx)(E,{notes:Object.values(f),onDeleted:function(t){x.a.database().ref("users/"+e.uid+"/notes").once("value").then((function(n){n.forEach((function(n){if(n.val().id===t)return x.a.database().ref("users/"+e.uid+"/notes/".concat(n.key)).remove().catch((function(e){console.log("Remove failed: "+e.message)})),!0}))})).catch((function(e){console.log("Couldn't take the data from DB: "+e)}))},onSelected:function(e,t){o((function(e){return Object(j.a)(Object(j.a)({},e),{},{selectedItemId:t})})),u(e)}}),O&&Object(a.jsx)(g,{children:Object(a.jsx)(D,{classes:"modal--notes",title:p?"Edit note":"Add note",onCloseBtnClick:u,children:Object(a.jsx)(F,{onAdded:r,onEdited:function(t){x.a.database().ref("users/"+e.uid+"/notes").once("value").then((function(n){n.forEach((function(n){if(n.val().id===c.selectedItemId)return x.a.database().ref("users/"+e.uid+"/notes/".concat(n.key,"/description")).set(t).catch((function(e){console.log("Edit item failed: "+e.message)})),!0}))})).catch((function(e){console.log("Couldn't take the data from DB: "+e)})),o((function(e){e.selectedItemId;var t=Object(b.a)(e,["selectedItemId"]);return Object(j.a)({selectedItemId:!1},t)}))},onToggleModal:u,selectedItemId:p})})})]})})}return Object(a.jsx)("main",{className:"notes-page",children:Object(a.jsxs)("div",{className:"container",children:[Object(a.jsx)(d,{text:"Notes"}),Object(a.jsx)("button",{className:"modal-toggle-button",onClick:u,children:"Add note"}),Object(a.jsx)(E,{overlayText:"You can sleep soundly"}),c.showModal&&Object(a.jsx)(g,{children:Object(a.jsx)(D,{classes:"modal--notes",title:"Add note",onCloseBtnClick:u,children:Object(a.jsx)(F,{onAdded:r,onToggleModal:u,selectedItemId:!1})})})]})})}return Object(a.jsx)("main",{className:"notes-page",children:Object(a.jsxs)("div",{className:"container",children:[Object(a.jsx)(d,{text:"Notes"}),Object(a.jsx)("span",{children:"Loading..."})]})})},A=n(13),T=(n(44),function(e){var t=e.onToggleModal,n=e.user,c=e.actionCodeSettings,o=Object(s.useState)({oldEmail:n.email,password:""}),i=Object(m.a)(o,2),r=i[0],l=i[1],d=Object(s.useState)(n.email),u=Object(m.a)(d,2),b=u[0],h=u[1],f=Object(s.useState)(!0),O=Object(m.a)(f,2),p=O[0],g=O[1],v=function(e){var t=e.target.id,n=e.target.value;l((function(e){return Object(j.a)(Object(j.a)({},e),{},Object(A.a)({},t,n))}))};return Object(a.jsxs)("form",{className:"change-email-form",onSubmit:p?function(e){e.preventDefault();var t=r.oldEmail,a=r.password,s=x.a.auth.EmailAuthProvider.credential(t,a);n.reauthenticateWithCredential(s).then((function(){g(!1)})).catch((function(e){console.log("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0441\u0434\u0435\u043b\u0430\u0442\u044c reauth",e)}))}:function(e){e.preventDefault(),n.verifyBeforeUpdateEmail(b,c).then((function(){console.log("Confirm your new email to finish change the email"),t(e)})).catch((function(e){console.log("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c email.",e.message)}))},children:[p?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("label",{htmlFor:"oldEmail",children:"Old email (*): "}),Object(a.jsx)("input",{className:"change-email-form__old-email-field",id:"oldEmail",type:"email",placeholder:"Enter you old email",onChange:v,value:r.oldEmail,required:!0}),Object(a.jsx)("label",{htmlFor:"password",children:"Password (*): "}),Object(a.jsx)("input",{className:"change-email-form__password-field",id:"password",type:"password",placeholder:"Enter you password",onChange:v,value:r.password,required:!0})]}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("label",{htmlFor:"newEmail",children:"New email (*): "}),Object(a.jsx)("input",{className:"change-email-form__new-email-field",id:"newEmail",type:"email",placeholder:"Enter new email",onChange:function(e){h(e.target.value)},value:b,required:!0})]}),Object(a.jsx)("button",{className:"change-email-form__submit",children:p?"Continue":"Save"})]})}),M=(n(45),function(e){var t=e.onToggleModal,n=e.user,c=Object(s.useState)({email:n.email,oldPassword:""}),o=Object(m.a)(c,2),i=o[0],r=o[1],l=Object(s.useState)(!0),d=Object(m.a)(l,2),u=d[0],b=d[1],h=Object(s.useState)(""),f=Object(m.a)(h,2),O=f[0],p=f[1],g=function(e){var t=e.target.id,n=e.target.value;r((function(e){return Object(j.a)(Object(j.a)({},e),{},Object(A.a)({},t,n))}))};return Object(a.jsxs)("form",{className:"change-password-form",onSubmit:u?function(e){e.preventDefault();var t=i.email,a=i.oldPassword,s=x.a.auth.EmailAuthProvider.credential(t,a);n.reauthenticateWithCredential(s).then((function(){b(!1)})).catch((function(e){console.log("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0441\u0434\u0435\u043b\u0430\u0442\u044c reauth",e)}))}:function(e){e.preventDefault(),n.updatePassword(O).then((function(){console.log("\u0422\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0431\u043d\u043e\u0432\u0438\u043b \u043f\u0430\u0440\u043e\u043b\u044c!"),t(e)})).catch((function(e){console.log("\u041d\u0435 \u043f\u043e\u043b\u0443\u0447\u0438\u043b\u043e\u0441\u044c \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c...",e)}))},children:[u?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("label",{htmlFor:"email",children:"Email (*): "}),Object(a.jsx)("input",{className:"change-password-form__email-field",id:"email",type:"email",placeholder:"Enter you email",onChange:g,value:i.email,required:!0}),Object(a.jsx)("label",{htmlFor:"oldPassword",children:"Old password (*): "}),Object(a.jsx)("input",{className:"change-password-form__old-password-field",id:"oldPassword",type:"password",placeholder:"Enter you old password",onChange:g,value:i.oldPassword,required:!0})]}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("label",{htmlFor:"newPassword",children:"New password (*): "}),Object(a.jsx)("input",{className:"change-password-form__new-password-field",id:"newPassword",type:"password",placeholder:"Enter new password",onChange:function(e){p(e.target.value)},value:O,required:!0})]}),Object(a.jsx)("button",{className:"change-password-form__submit",children:u?"Continue":"Save"})]})}),L=(n(46),function(e){var t=e.onToggleModal,n=e.user,c=Object(s.useState)({email:n.email,password:""}),o=Object(m.a)(c,2),i=o[0],r=o[1],l=Object(s.useState)(!0),d=Object(m.a)(l,2),u=d[0],b=d[1],h=function(e){var t=e.target.id,n=e.target.value;r((function(e){return Object(j.a)(Object(j.a)({},e),{},Object(A.a)({},t,n))}))};return Object(a.jsx)("form",{className:"delete-account-form",onSubmit:u?function(e){e.preventDefault();var t=i.email,a=i.password,s=x.a.auth.EmailAuthProvider.credential(t,a);n.reauthenticateWithCredential(s).then((function(){b(!1)})).catch((function(e){console.log("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0441\u0434\u0435\u043b\u0430\u0442\u044c reauth",e)}))}:function(e){e.preventDefault(),n.delete().catch((function(e){console.log(e)}))},children:u?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("label",{htmlFor:"email",children:"Email (*): "}),Object(a.jsx)("input",{className:"delete-account-form__email-field",id:"email",type:"email",placeholder:"Enter you email",onChange:h,value:i.email,required:!0}),Object(a.jsx)("label",{htmlFor:"password",children:"Password (*): "}),Object(a.jsx)("input",{className:"delete-account-form__password-field",id:"password",type:"password",placeholder:"Enter you password",onChange:h,value:i.password,required:!0}),Object(a.jsx)("button",{className:"delete-account-form__submit",children:"Continue"})]}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("span",{children:"Do you sure want to delete your account? This action is irreversibly..."}),Object(a.jsxs)("div",{className:"delete-account-form__bnt-wrapper",children:[Object(a.jsx)("button",{className:"delete-account-form__agree",type:"submit",children:"Yes"}),Object(a.jsx)("button",{className:"delete-account-form__disagree",type:"button",onClick:function(e){t(e)},children:"No"})]})]})})}),q=(n(47),function(){var e=_(),t=e.currentUser,n=e.actionCodeSettings,c=Object(s.useState)(t.displayName),o=Object(m.a)(c,2),i=o[0],r=o[1],l=Object(s.useState)(t.photoURL),u=Object(m.a)(l,2),j=u[0],b=u[1],h=Object(s.useState)(!1),f=Object(m.a)(h,2),O=f[0],p=f[1],v=Object(s.useState)(!1),N=Object(m.a)(v,2),w=N[0],C=N[1],y=Object(s.useState)(!1),S=Object(m.a)(y,2),I=S[0],k=S[1],E=Object(s.useState)(!1),F=Object(m.a)(E,2),P=F[0],A=F[1],q=Object(s.useState)(!1),B=Object(m.a)(q,2),U=B[0],R=B[1],W="google.com"==t.providerData[0].providerId,Y=t.email,V=function(e){k((function(e){return!e}))},G=function(e){A((function(e){return!e}))},H=function(e){R((function(e){return!e}))};return Object(a.jsx)("main",{className:"settings-page",children:Object(a.jsxs)("div",{className:"container",children:[Object(a.jsx)(d,{text:"Settings"}),Object(a.jsx)("span",{className:"settings-page__subtitle",children:"Account"}),Object(a.jsxs)("div",{className:"settings-wrapper",children:[Object(a.jsxs)("div",{className:"settings-item settings-item__avatar-wrapper",children:[Object(a.jsx)("img",{className:"settings-item__avatar",src:j||"https://yt3.ggpht.com/ytc/AAUvwng-3d-BcGfaNN09TTsLOoFfVhCT96sjcPQeJzQ2iQ=s900-c-k-c0x00ffffff-no-rj",onClick:function(){C(!0)},width:"100",height:"100",alt:"User's avatar"}),w?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("input",{className:"settings-item__field settings-item__field--avatar",type:"text",name:"avatar",onChange:function(e){b(e.target.value)},placeholder:"Type link on you avatar",value:j||""}),Object(a.jsx)("button",{className:"settings-item__btn",onClick:function(){t.updateProfile({photoURL:j}).then((function(){return C(!1)})).catch((function(e){console.log("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",e.message)}))},children:"Save"}),Object(a.jsx)("button",{className:"settings-item__btn",onClick:function(){b(t.photoURL),C(!1)},children:"Cancel"})]}):null]}),O?Object(a.jsxs)("div",{className:"settings-item",children:[Object(a.jsx)("input",{className:"settings-item__field settings-item__field--name",type:"text",name:"name",onChange:function(e){r(e.target.value)},placeholder:"What is your name?",value:i||""}),Object(a.jsx)("button",{className:"settings-item__btn",onClick:function(){t.updateProfile({displayName:i}).then((function(){return p(!1)})).catch((function(e){console.log("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0438\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",e.message)}))},children:"Save"}),Object(a.jsx)("button",{className:"settings-item__btn",onClick:function(){r(t.displayName),p(!1)},children:"Cancel"})]}):Object(a.jsx)("div",{className:"settings-item",children:Object(a.jsx)("span",{className:"settings-item__text",onClick:function(){p(!0)},children:i||"Anonymous"})}),Object(a.jsxs)("div",{className:"settings-item settings-item--email",children:[Object(a.jsx)("span",{onClick:W?void 0:V,children:"Your email: "}),Object(a.jsx)("span",{className:W?"settings-item__text settings-item__text--unclickable":"settings-item__text",onClick:W?void 0:V,children:Y})]}),!W&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{className:"settings-item",children:Object(a.jsx)("button",{className:"settings-item__btn",onClick:G,children:"Change password"})}),Object(a.jsx)("div",{className:"settings-item",children:Object(a.jsx)("button",{className:"settings-item__btn",onClick:function(){x.a.auth().sendPasswordResetEmail(Y,n).then((function(){})).catch((function(e){console.log("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c email:(",e.message)}))},children:"Send me email to reset the password"})})]}),Object(a.jsx)("div",{className:"settings-item",children:Object(a.jsx)("button",{className:"settings-item__btn",onClick:H,children:"Delete account"})})]}),Object(a.jsx)("span",{className:"settings-page__subtitle",children:"App"}),I&&Object(a.jsx)(g,{children:Object(a.jsx)(D,{classes:"modal--change-email",title:"Changing the email",onCloseBtnClick:V,children:Object(a.jsx)(T,{onToggleModal:V,user:t,actionCodeSettings:n})})}),P&&Object(a.jsx)(g,{children:Object(a.jsx)(D,{classes:"modal--change-password",title:"Changing the password",onCloseBtnClick:G,children:Object(a.jsx)(M,{onToggleModal:G,user:t})})}),U&&Object(a.jsx)(g,{children:Object(a.jsx)(D,{classes:"modal--delete-account",title:"Deleting the account",onCloseBtnClick:H,children:Object(a.jsx)(L,{user:t,onToggleModal:H})})})]})})}),B=(n(48),function(){var e=C().showTooltip,t=Object(s.useState)({email:"",password:"",repeatPassword:""}),n=Object(m.a)(t,2),c=n[0],o=n[1],i=function(e){var t=e.target.id,n=e.target.value;o((function(e){return Object(j.a)(Object(j.a)({},e),{},Object(A.a)({},t,n))}))};return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("form",{className:"sign-up-form",onSubmit:function(t){t.preventDefault();var n=c.email,a=c.password;a==c.repeatPassword?x.a.auth().createUserWithEmailAndPassword(n,a).then((function(){return localStorage.setItem("rememberMe","true")})).catch((function(e){return console.log(e)})):e("You password and repeated password don't match")},children:[Object(a.jsx)("label",{htmlFor:"email",children:"Email (*): "}),Object(a.jsx)("input",{className:"sign-up-form__email-field",id:"email",type:"email",name:"email",placeholder:"Enter your email",onChange:i,required:!0}),Object(a.jsx)("label",{htmlFor:"password",children:"Password (*): "}),Object(a.jsx)("input",{className:"sign-up-form__password-field",id:"password",type:"password",name:"password",placeholder:"Create a password",onChange:i,required:!0}),Object(a.jsx)("label",{htmlFor:"repeatPassword",children:"Repeat password (*): "}),Object(a.jsx)("input",{className:"sign-up-form__repeat-password-field",id:"repeatPassword",type:"password",name:"repeat-password",placeholder:"Repeat a password",onChange:i,required:!0}),Object(a.jsx)("button",{className:"sign-up-form__submit",children:"Sign up"})]}),Object(a.jsxs)("span",{className:"modal--sign-up__sign-up-with-google",children:["You can pass an alternative registration with Google."," ",Object(a.jsx)(r.b,{className:"modal--sign-up__google-link",to:"#",onClick:function(){var t=new x.a.auth.GoogleAuthProvider;x.a.auth().signInWithPopup(t).then((function(){return localStorage.setItem("rememberMe","true")})).catch((function(t){e(t.message)}))},children:"Let's do it!"})]}),Object(a.jsxs)("span",{className:"modal--sign-up__go-to-sign-in",children:["Already have an account?"," ",Object(a.jsx)(r.b,{className:"modal--sign-up__sign-in-link",to:"/sign-in",children:"Sign in"})]})]})}),U=function(){return Object(a.jsx)("main",{className:"sign-up-page",children:Object(a.jsx)(D,{classes:"modal--sign-up",title:"Sign up",children:Object(a.jsx)(B,{})})})},R=(n(53),function(){var e=C().showTooltip,t=Object(s.useState)({email:"",password:""}),n=Object(m.a)(t,2),c=n[0],o=n[1],i=Object(s.useState)(localStorage.getItem("rememberMe")),l=Object(m.a)(i,2),d=l[0],u=l[1],b=function(e){var t=e.target.id,n=e.target.value;o((function(e){return Object(j.a)(Object(j.a)({},e),{},Object(A.a)({},t,n))}))};return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("form",{className:"sign-in-form",onSubmit:function(t){t.preventDefault();var n=c.email,a=c.password;x.a.auth().signInWithEmailAndPassword(n,a).catch((function(t){return e(t.message)}))},children:[Object(a.jsx)("label",{htmlFor:"email",children:"Email (*): "}),Object(a.jsx)("input",{className:"sign-in-form__email-field",id:"email",type:"email",name:"email",placeholder:"Enter you email",onChange:b,required:!0}),Object(a.jsx)("label",{htmlFor:"password",children:"Password (*): "}),Object(a.jsx)("input",{className:"sign-in-form__password-field",id:"password",type:"password",name:"password",placeholder:"Enter you password",onChange:b,required:!0}),Object(a.jsx)("label",{htmlFor:"rememberMe",children:"Remember me "}),Object(a.jsx)("input",{className:"sign-up-form__remember-me-checkbox",id:"rememberMe",type:"checkbox",name:"remember-me",onChange:function(e){d?(localStorage.removeItem("rememberMe"),u(null)):(localStorage.setItem("rememberMe","true"),u("true"))},checked:!!d}),Object(a.jsx)("button",{className:"sign-in-form__submit",children:"Sign in"})]}),Object(a.jsx)(r.b,{className:"modal--sign-in__google-link",to:"#",children:"Sign in with Google"}),Object(a.jsxs)("span",{className:"modal--sign-in__go-to-reset",children:["Forgot password?"," ",Object(a.jsx)(r.b,{className:"modal--sign-in__reset-link",to:"/reset-password",children:"Reset"})]}),Object(a.jsxs)("span",{className:"modal--sign-in__go-to-sign-up",children:["Return to"," ",Object(a.jsx)(r.b,{className:"modal--sign-in__sign-up-link",to:"/sign-up",children:"Sign up"})]})]})}),W=function(){return Object(a.jsx)("main",{className:"sign-in-page",children:Object(a.jsx)(D,{classes:"modal--sign-in",title:"Sign in",children:Object(a.jsx)(R,{})})})},Y=(n(54),function(){var e=_().actionCodeSettings,t=C().showTooltip,n=Object(s.useState)(""),c=Object(m.a)(n,2),o=c[0],i=c[1];return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("form",{className:"reset-password-form",onSubmit:function(n){n.preventDefault(),x.a.auth().sendPasswordResetEmail(o,e).then((function(){})).catch((function(e){t(e.message)}))},children:[Object(a.jsx)("label",{htmlFor:"email",children:"Email (*): "}),Object(a.jsx)("input",{className:"reset-password-form__email-field",id:"email",type:"email",name:"email",placeholder:"Enter you email",onChange:function(e){i(e.target.value)},value:o,required:!0}),Object(a.jsx)("button",{className:"reset-password-form__submit",children:"Reset password"})]}),Object(a.jsx)(r.b,{className:"modal--reset-password__sign-in-link",to:"/sign-in",children:"I remember :)"})]})}),V=function(){return Object(a.jsx)("main",{className:"reset-password-page",children:Object(a.jsx)(D,{classes:"modal--reset-password",title:"Reset password",children:Object(a.jsx)(Y,{})})})},G=(n(55),function(){return Object(a.jsx)("header",{className:"page-header",children:Object(a.jsxs)("div",{className:"container flex-wrapper flex-wrapper--jsb",children:[Object(a.jsxs)("nav",{className:"main-nav",children:[Object(a.jsx)(r.b,{to:"/",children:"Doit!"}),Object(a.jsxs)("ul",{className:"main-nav__list",children:[Object(a.jsx)("li",{className:"main-nav__item",children:Object(a.jsx)(r.b,{to:"/todo",children:"Todo"})}),Object(a.jsx)("li",{className:"main-nav__item",children:Object(a.jsx)(r.b,{to:"/notes",children:"Notes"})}),Object(a.jsx)("li",{className:"main-nav__item",children:Object(a.jsx)(r.b,{to:"/settings",children:"Settings"})})]})]}),Object(a.jsx)("button",{className:"page-header__sign-out",onClick:function(e){x.a.auth().signOut().catch((function(e){console.log(e.message)}))},children:"Sign out"})]})})}),H=(n(56),function(){var e=C(),t=e.message,n=e.isOpen,s=e.hideTooltip;return n?Object(a.jsxs)("div",{className:"tooltip",children:[Object(a.jsx)("span",{className:"tooltip__message",children:t}),Object(a.jsx)("button",{className:"tooltip__close",onClick:function(){return s()},children:"X"})]}):null}),X=(n(57),n(58),n(59),function(){var e=_(),t=e.isLoggedIn,n=e.currentUser;return Object(a.jsx)(r.a,{children:t?Object(a.jsx)(a.Fragment,{children:n.emailVerified?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(G,{}),Object(a.jsx)(H,{}),Object(a.jsx)(l.b,{path:"/",render:function(){return Object(a.jsx)(u,{})},exact:!0}),Object(a.jsx)(l.b,{path:"/todo",render:function(){return Object(a.jsx)(I,{})}}),Object(a.jsx)(l.b,{path:"/notes",render:function(){return Object(a.jsx)(P,{})}}),Object(a.jsx)(l.b,{path:"/settings",render:function(){return Object(a.jsx)(q,{})}}),Object(a.jsx)(l.a,{to:"/"})]}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(G,{}),Object(a.jsx)("div",{className:"app__overlay",children:Object(a.jsx)("span",{className:"app__confirm-message",children:"Please confirm your email to use the app"})})]})}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(H,{}),Object(a.jsx)(l.b,{path:"/sign-up",render:function(){return Object(a.jsx)(U,{})}}),Object(a.jsx)(l.b,{path:"/sign-in",render:function(){return Object(a.jsx)(W,{})}}),Object(a.jsx)(l.b,{path:"/reset-password",render:function(){return Object(a.jsx)(V,{})}}),Object(a.jsx)(l.a,{to:"/sign-up"})]})})});n(60),n(62);x.a.initializeApp({apiKey:"AIzaSyD4KDh3FaOBTHDF_oleVT06eUTvbDCStNY",authDomain:"todo-1c323.firebaseapp.com",databaseURL:"https://todo-1c323-default-rtdb.firebaseio.com",projectId:"todo-1c323",storageBucket:"todo-1c323.appspot.com",messagingSenderId:"372839437605",appId:"1:372839437605:web:31ef34b6e882e585f576cc"}),i.a.render(Object(a.jsx)(N,{children:Object(a.jsx)(y,{children:Object(a.jsx)(X,{})})}),document.querySelector("#root"))}]),[[66,1,2]]]);
//# sourceMappingURL=main.4fdb8037.chunk.js.map